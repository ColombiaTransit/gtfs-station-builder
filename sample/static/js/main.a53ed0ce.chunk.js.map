{"version":3,"sources":["images/circle-blue.png","images/circle-black.png","images/eway-logo.png","interfaces/Stop.tsx","interfaces/Pathway.tsx","services/VisService.tsx","components/Vis.tsx","components/StopDialog.tsx","components/PathwayDialog.tsx","components/StationBuilder.tsx","services/DataService.tsx","services/FileService.tsx","map/TxtOverlay.tsx","App.tsx","index.js","images/wheelchair-accessible.png","images/wheelchair-not-possible.png","images/circle-red.png"],"names":["module","exports","LocationTypeMap","Platform","Station","Entrance/Exit","GenericNode","BoardingArea","LocationTypeOnNodeLabelMap","WheelchairBoardingMap","NoInfo","Accessible","NotPossible","LocationTypeColors","PathwayModeMap","Walkway","Stairs","MovingSidewalk","Escalator","Lift","FareGate","ExitGate","PathwayModeOnEdgeLabelMap","PathwayModeColors","VisService","from","to","hash","hashReversedDir","undefined","this","edgeRoundness","type","roundness","stop","prefix","locationType","label","stopName","stopId","platformCode","signpostedAs","parentStation","pathway","pathwayMode","traversalTime","id","getNodeLabel","color","x","y","image","wheelchairBoarding","wheelchairAccessibleImage","wheelchairNotPossibleImage","shape","size","node","includes","stations","coefs","newStopId","stopLat","latX","latK","stopLon","lonX","lonK","pathwayId","fromStopId","toStopId","highlight","arrows","isBidirectional","smooth","getEdgeSmoothVariant","getEdgeLabel","edge","newPathwayId","reversedSignpostedAs","Vis","network","handleDocumentKeydown","e","_this","props","isDialogShown","keyCode","selection","getSelection","nodes","length","edges","onItemDelete","dataToDelete","deleteSelected","_this2","container","document","getElementById","data","stops","filter","map","convertStopToNode","pathways","convertPathwayToEdge","options","borderWidth","width","selectionWidth","font","align","manipulation","enabled","initiallyActive","addNode","onStopAdd","editNode","onStopEdit","deleteNode","callback","getConnectedEdges","addEdge","onPathwayAdd","editEdge","movedEdge","body","get","updatePathwayInEdge","deleteEdge","interaction","dragView","hoverConnectedEdges","selectConnectedEdges","zoomView","physics","locales","gtfs","edit","del","back","addDescription","edgeDescription","editEdgeDescription","createEdgeError","deleteClusterError","editClusterError","locale","vis","Network","on","edgesDataSet","nodesDataSet","event","srcEvent","ctrlKey","position","pointer","canvas","onFareZoneAdd","forEach","add","onPathwayEdit","update","newNode","preventDefault","editEdgeMode","nodeId","onStopDragEnd","addEventListener","removeEventListener","react_default","a","createElement","Component","StopDialog","Object","classCallCheck","possibleConstructorReturn","getPrototypeOf","call","handleCancel","onCancel","handleApply","state","onApply","objectSpread","alert","handleParentStationChange","setState","Number","target","value","handleLevelChange","levelId","handleLocationTypeChange","platforms","handleWheelchairBoardingChange","handleStopNameChange","handlePlatformCodeChange","handleSignpostedAsChange","handleKeyDown","parentStationOptions","station","push","key","parentPlatformOptions","platform","levelOptions","levels","level","levelIndex","levelName","locationTypeOptions","wheelchairBoardingOptions","wheelchairBoardingKey","className","onKeyDown","onChange","disabled","onClick","PathwayDialog","parseFloat","maxSlope","minWidth","isNaN","handlePathwayModeChange","handleIsBidirectionalChange","checked","handleLengthChange","replace","handleTraversalTimeChange","parseInt","handleStairCountChange","stairCount","handleMaxSlopeChange","handleMinWidthChange","handleReversedSignpostedAsChange","toString","pathwayModeOptions","pathwayModeKey","StationBuilder","mapRef","React","createRef","handleDialogCancel","handleStopAddMode","prepareNewNode","selectedStop","handleStopEditMode","handlePathwayAddMode","prepareNewEdge","selectedPathway","handlePathwayEditMode","handleStopDialogApply","stopIndex","findIndex","curStop","attachStopToNode","handlePathwayDialogApply","pathwayIndex","curPathway","attachPathwayToEdge","handleItemDelete","some","find","splice","deletedStopsIds","deletedPathwaysIds","handleSaveClick","onSave","handleCancelClick","handleStopDragEnd","handleFareZoneAdd","node1","node2","edge1","edge2","Error","minLat","minLon","maxLat","maxLon","latGap","lonGap","cloneDeep","mapMarkers","bounds","google","maps","LatLngBounds","extend","lat","lng","current","mapDiv","appendChild","fitBounds","console","log","Map","Marker","icon","circleBlueImage","circleRedImage","marker","setMap","Vis_Vis","StopDialog_StopDialog","PathwayDialog_PathwayDialog","ref","DataService","recordFromGTFS","rows","split","records","header","row","cells","csvToArray","cell","cellIndex","recordGTFS","fieldName","escapeText","text","m0","m1","m2","m3","test","FileService","readUploadedFileAsText","_callee","inputFile","temporaryFileReader","regenerator_default","wrap","_context","prev","next","FileReader","abrupt","Promise","resolve","reject","onerror","abort","DOMException","onload","result","readAsText","TxtOverlay","pos","pos_","text_","class_","map_","div_","onAdd","div","innerHTML","getProjection","fromLatLngToDivPixel","style","left","top","getPanes","floatPane","draw","onRemove","parentNode","removeChild","hide","visibility","show","toggle","toggleDOM","getMap","OverlayView","App","requiredFiles","handleFileChange","files","zipFile","handleZip","Array","handleFiles","handleStationSave","dataAll","mode","handleStationCancel","loadSampleData","fetch","then","response","ok","blob","sampleZipBlob","handleStationSelect","stationId","stationIds","Math","abs","platformIds","stopIds","selectedStation","handleLoadFeedClick","mapObjects","mapObject","untouchedFiles","handleDownloadClick","stopsTxt","getStopGTFSHeader","pathwaysTxt","getPathwayGTFSHeader","levelsTxt","getLevelGTFSHeader","stopToGTFS","pathwayToGTFS","levelToGTFS","zip","JSZip","fileName","file","generateAsync","saveAs","requiredFilePromises","untouchedFilePromises","requiredFileNames","untouchedFileNames","all","indexOf","name","checkRequiredFiles","handleFilePromises","_this3","loadAsync","relativePath","async","message","_this4","communicationPacket","fileContents","fileContent","fileIndex","content","index","extractData","showStationsOnMap","_this5","circleBlackImage","LatLng","addListener","fileNames","requiredFileName","join","fromGTFS","stopFromGTFS","pathwayFromGTFS","levelFromGTFS","src","ewayLogo","alt","multiple","StationBuilder_StationBuilder","window","GtfsStationBuilder","mount","ReactDOM","render","unmount","unmountComponentAtNode","App_App"],"mappings":"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","file":"static/js/main.a53ed0ce.chunk.js","sourcesContent":["module.exports = \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAe5JREFUeNqEk89LVFEUx7++Z+/hNI0TjaXFMKmN7QZi1CI0IQJ3Gi7cmhi0DMRFi9BahP4DbVq0DQQ3LXIlRpo/iCKlRQsTxvGpDCXDTNn8al7f87xPQ9/Ygc/jnvvu95x77zlXx8lWqxArei2oqiDqVUSIQX6SFTJJZk/KeJ28JXYFfpPnJOS1g3byijRBOwW09AAXbwKn6ynbARJzwPo08Ccva6fIfZJ2AwTJa9KJYCPQMYaGGwM47wd0namZO5kGvi+9BBbGKVsTzRPyVFcB+slD6CZwewKxO4Pw8eQFCotloERq+etC8zWkchxY7zmZu0zNG40foccJ09SNs61DzmHzFJXtQ8TXuF8z/gAId8lqCXBLxAHlMEUc9axB0fa+4QKDRM7Jupg71VytymQ4rnkGOrOUjgQwtSORjIA78kmAX6rOQCbpiKu8RMr2CvxkLdfd1VSAz45rLeDrRhaGVrlREkmWdPuDDEvSXO5S6bA8tpaB+cewMt7iTZYSS884mBf3I5lzy7gpV0PaJMjejw2kjKsoGiFUM0WKB0ysfUFu5hH3+gJOMmCYfPo3QZ3qsP22DYRtRO/aiN2z0dJrw3/JbeccGVHlP2ZyvaPkm8c7kNe4SPr+9xrFotIk5Aqpkdsmq+SdGh/YXwEGAGUQly2iFN0tAAAAAElFTkSuQmCC\"","module.exports = \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAABmJLR0QA/wD/AP+gvaeTAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAB3RJTUUH4wwCCwsSL+WhZAAAANpJREFUOMud0kEuBGEUBOBvfoywGENYkzBXYCduIHEAG1ew5hQuIZyB2LDEXtygV8QkI2mb19Fp3Z3xV1LJv/ir6uW9WtCPtSDM2j4MOkTHwW0M8YEXXOOuL/EA9yg7+IUrbLaJ9/GGcqnDYPn3fYNxXTzGQ09yGy/rBqeNhF6uSyXeMYEUI5UZPEsYYUcedlOcaZhpsJrwGXfOQVEZPGeIv6Nc4AjTfy7wCRuVwWI0bF7xFCfNkbZwO6f4PM7/ByNcVJVucIbHZvKgY0ETHGIPKyjwGnUv6h9/ALhFdZUDpz63AAAAAElFTkSuQmCC\"","module.exports = \"data:image/png;base64,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\"","export default interface Stop {\n\tstopId: number;\n\tstopLat: number,\n\tstopLon: number,\n\tparentStation?: number,\n    stopName?: string;\n    locationType: number;\n    wheelchairBoarding: number;\n    levelId?: number;\n    platformCode?: string;\n    signpostedAs?: string;\n}\n\nexport const LocationTypeMap: { [key: string]: number } = {\n    \"Platform\": 0,\n    \"Station\": 1,\n    \"Entrance/Exit\": 2,\n    \"GenericNode\": 3,\n    \"BoardingArea\": 4\n}\n\nexport const LocationTypeOnNodeLabelMap = [\n    \"Platform\",\n    \"Station\",\n    \"E/E\",\n    \"GN\",\n    \"BA\"\n]\n\nexport const WheelchairBoardingMap: { [key: string]: number } = {\n    \"NoInfo\": 0,\n    \"Accessible\": 1,\n    \"NotPossible\": 2\n}\n\nexport const LocationTypeColors = [\n    \"#6898ee\",\n    \"#333333\",\n    \"#f2565c\",\n    \"#999999\",\n    \"#7ecb7d\"\n]\n","export default interface Pathway {\n    pathwayId: number;\n    fromStopId: number;\n    toStopId: number;\n    pathwayMode: number;\n    isBidirectional: boolean;\n    length?: number;\n    traversalTime?: number;\n    stairCount?: number;\n    maxSlope?: number;\n    minWidth?: number;\n    signpostedAs?: string;\n    reversedSignpostedAs?: string;\n}\n\nexport const PathwayModeMap: { [key: string]: number } = {\n    \"Walkway\": 1,\n    \"Stairs\": 2,\n    \"MovingSidewalk\": 3,\n    \"Escalator\": 4,\n    \"Lift\": 5,\n    \"FareGate\": 6,\n    \"ExitGate\": 7\n}\n\nexport const PathwayModeOnEdgeLabelMap = [\n    \"\",\n    \"Walkway\", // pathway modes begin from 1\n    \"Stairs\",\n    \"MovingSidewalk\",\n    \"Escalator\",\n    \"Lift\",\n    \"FareGate\",\n    \"ExitGate\"\n]\n\nexport const PathwayModeColors = [\n    \"\",\n    \"#000000\", // pathway modes begin from 1\n    \"#6898ee\",\n    \"#888888\",\n    \"#7ecb7d\",\n    \"#f38e1a\",\n    \"#9772c4\",\n    \"#f2565c\"\n]\n","import Stop, { LocationTypeOnNodeLabelMap, LocationTypeColors, WheelchairBoardingMap, LocationTypeMap } from \"../interfaces/Stop\";\nimport Pathway, { PathwayModeOnEdgeLabelMap, PathwayModeColors, PathwayModeMap } from \"../interfaces/Pathway\";\nimport VisNode from \"../interfaces/VisNode\";\nimport VisEdge from \"../interfaces/VisEdge\";\nimport wheelchairAccessibleImage from '../images/wheelchair-accessible.png';\nimport wheelchairNotPossibleImage from '../images/wheelchair-not-possible.png';\n\n// This service defines how to draw things\n//   and take care of stop-node and pathway-edge convertion\nexport default class VisService {\n\tstatic newStopId = -1;\n\tstatic newPathwayId = -1;\n\tstatic edgeRoundness: {\n\t\t[key: string]: number\n\t} = {};\n\n\tstatic getEdgeSmoothVariant(from: number, to: number): { type: string, roundness: number } {\n\t\tlet hash = from + \":\" + to + \":\" + 1;\n\t\tlet hashReversedDir = from + \":\" + to + \":\" + 2;\n\t\tif (from > to) {\n\t\t\thash = to + \":\" + from + \":\" + 2;\n\t\t\thashReversedDir = to + \":\" + from + \":\" + 1;\n\t\t}\n\t\tif (this.edgeRoundness[hash] === undefined) {\n\t\t\tthis.edgeRoundness[hash] = 0.2;\n\t\t\tthis.edgeRoundness[hashReversedDir] = 0.0;\n\t\t}\n\t\telse {\n\t\t\tthis.edgeRoundness[hash] += 0.2;\n\t\t}\n\t\treturn {\n\t\t\ttype: \"curvedCW\",\n\t\t\troundness: this.edgeRoundness[hash]\n\t\t}\n\t}\n\n    static getNodeLabel(stop: Stop): string {\n        let prefix = LocationTypeOnNodeLabelMap[stop.locationType];\n        let label =  stop.stopName ? prefix + ' \"' + stop.stopName + '\"' : prefix;\n        if (stop.locationType === 0) { // Platform\n\t\t\tlabel = prefix + ' #' + stop.stopId;\n\t\t\tif (stop.platformCode) {\n                label += '\\nCode: \"' + stop.platformCode + '\"';\n            }\n            if (stop.signpostedAs) {\n                label += '\\nSignposted: \"' + stop.signpostedAs + '\"';\n            }\n\t\t}\n\t\telse if (stop.locationType === 2) { // Entrance/Exit\n\t\t\tif (stop.platformCode) {\n                label += '\\nNumber: \"' + stop.platformCode + '\"';\n            }\n\t\t}\n\t\telse if (stop.locationType === 4) { // Boarding Area\n            label += '\\nFor #' + stop.parentStation;\n\t\t}\n        return label;\n    }\n\n    static getEdgeLabel(pathway: Pathway): string {\n        let prefix = PathwayModeOnEdgeLabelMap[pathway.pathwayMode];\n        let label = prefix;\n        if (pathway.traversalTime) {\n            label += '\\n' + pathway.traversalTime + ' s'\n        }\n        return label;\n\t}\n\n\tstatic convertStopToNode(stop: Stop): VisNode {\n        return {\n            id: stop.stopId,\n            label: VisService.getNodeLabel(stop),\n            color: LocationTypeColors[stop.locationType],\n            x: 0,\n            y: 0,\n            image: stop.wheelchairBoarding === 1 ? wheelchairAccessibleImage : stop.wheelchairBoarding === 2 ? wheelchairNotPossibleImage : \"\",\n            shape: 'circularImage',\n            size: 12,\n            stop: stop\n        }\n    }\n\n    static attachStopToNode(stop: Stop, node: VisNode): VisNode {\n        if ([3, 4].includes(stop.locationType)) {\n            stop.wheelchairBoarding = WheelchairBoardingMap.NoInfo;\n        }\n        node.label = VisService.getNodeLabel(stop);\n        node.color = LocationTypeColors[stop.locationType];\n        node.shape = 'circularImage';\n        node.size = 12;\n        node.image = stop.wheelchairBoarding === 1 ? wheelchairAccessibleImage : stop.wheelchairBoarding === 2 ? wheelchairNotPossibleImage : \"\";\n        node.stop = stop;\n        return node;\n    }\n\n    static prepareNewNode(node: VisNode, stations: Stop[], coefs:{[key: string]: number}): VisNode {\n\t\tnode.id = this.newStopId;\n        node.label = \"\";\n        node.color = LocationTypeColors[LocationTypeMap.GenericNode];\n        node.shape = 'circularImage';\n\t\tnode.size = 12;\n\t\tnode.image = \"\";\n        node.stop = {\n\t\t\tstopId: this.newStopId,\n\t\t\tstopLat: ((node.y || 0) - coefs.latX) / coefs.latK,\n\t\t\tstopLon: ((node.x || 0) - coefs.lonX) / coefs.lonK,\n\t\t\tparentStation: stations[0].stopId,\n            stopName: \"\",\n            locationType: LocationTypeMap.GenericNode,\n            wheelchairBoarding: WheelchairBoardingMap.NoInfo,\n            platformCode: \"\",\n            signpostedAs: \"\"\n\t\t};\n\t\tthis.newStopId--;\n        return node;\n    }\n\n    static convertPathwayToEdge(pathway: Pathway): VisEdge {\n        return {\n            id: pathway.pathwayId,\n            from: pathway.fromStopId,\n            to: pathway.toStopId,\n            color: {\n                color: PathwayModeColors[pathway.pathwayMode],\n                highlight: PathwayModeColors[pathway.pathwayMode]\n            },\n            arrows: {\n                from: pathway.isBidirectional,\n                to: true\n\t\t\t},\n\t\t\tsmooth: this.getEdgeSmoothVariant(pathway.fromStopId, pathway.toStopId),\n            label: VisService.getEdgeLabel(pathway),\n            pathway: pathway\n\t\t};\n    }\n\n    static attachPathwayToEdge(pathway: Pathway, edge: VisEdge): VisEdge {\n        edge.color.color = PathwayModeColors[pathway.pathwayMode];\n        edge.color.highlight = PathwayModeColors[pathway.pathwayMode];\n        edge.arrows.from = pathway.isBidirectional;\n        edge.label = VisService.getEdgeLabel(pathway);\n\t\tedge.pathway = pathway;\n        return edge;\n\t}\n\t\n\tstatic updatePathwayInEdge(edge: VisEdge): VisEdge {\n\t\tedge.pathway.fromStopId = edge.from;\n\t\tedge.pathway.toStopId = edge.to;\n        return edge;\n    }\n\n    static prepareNewEdge(edge: VisEdge): VisEdge {\n\t\tedge.id = this.newPathwayId;\n        edge.color = {\n            color: PathwayModeColors[PathwayModeMap.Walkway],\n            highlight: PathwayModeColors[PathwayModeMap.Walkway]\n        }\n        edge.arrows = {\n            from: true,\n            to: true\n        };\n        edge.label = '';\n        edge.pathway = {\n\t\t\tpathwayId: this.newPathwayId,\n\t\t\ttraversalTime: 10,\n            fromStopId: edge.from,\n            toStopId: edge.to,\n            pathwayMode: PathwayModeMap.Walkway,\n            isBidirectional: true,\n            signpostedAs: \"\",\n            reversedSignpostedAs: \"\"\n\t\t}\n\t\tedge.smooth = this.getEdgeSmoothVariant(edge.from, edge.to);\n\t\tthis.newPathwayId--;\n        return edge;\n    }\n}\n","import React, { Component } from 'react';\nimport vis from 'vis';\nimport 'vis/dist/vis-network.min.css';\nimport './Vis.scss';\nimport Stop from '../interfaces/Stop';\nimport VisNode from '../interfaces/VisNode';\nimport VisService from '../services/VisService';\nimport VisEdge from '../interfaces/VisEdge';\nimport Communication from '../interfaces/Communication';\nimport Pathway from '../interfaces/Pathway';\n\nexport interface VisState {\n\n}\n\nexport interface VisProps {\n\tdata: Communication,\n\tonStopAdd: (node: VisNode, callback: (node?: VisNode) => void) => void,\n\tonStopEdit: (node: VisNode, callback: (node?: VisNode) => void) => void,\n\tonItemDelete: (dataToDelete: { nodes: number[], edges: number[] }, callback: (dataToDelete?: { nodes: number[], edges: number[] }) => void) => void,\n\tonStopDragEnd: (nodeId: number, position: {x: number, y: number}) => void,\n\tonPathwayAdd: (edge: VisEdge, callback: (edge?: VisEdge) => void) => void,\n\tonPathwayEdit: (edge: VisEdge, callback: (edge?: VisEdge) => void) => void,\n\tonFareZoneAdd: (position: {x: number, y: number}, callback: (nodes: VisNode[], edges: VisEdge[]) => void) => void,\n\tlatK: number,\n\tlatX: number,\n\tlonK: number,\n\tlonX: number,\n\tisDialogShown: boolean\n}\n\nexport default class Vis extends Component<VisProps, VisState> {\n\tprivate network: any;\n\n\tpublic componentDidMount() {\n\t\tvar container = document.getElementById('vis');\n\t\tif (!container) {\n\t\t\treturn;\n\t\t}\n\n\t\t// get nodes from stops\n\t\tconst nodes: VisNode[] = this.props.data.stops.filter((stop: Stop) => {\n\t\t\treturn stop.locationType !== 1;\n\t\t}).map((stop: Stop): VisNode => {\n\t\t\tconst node = VisService.convertStopToNode(stop);\n\t\t\t// Transform stop coordinates into Vis x:y\n\t\t\tnode.x = this.props.lonK * stop.stopLon + this.props.lonX;\n\t\t\tnode.y = this.props.latK * stop.stopLat + this.props.latX;\n\t\t\treturn node;\n\t\t});\n\n\t\t// get edges from pathways\n\t\tconst edges: VisEdge[] = this.props.data.pathways.map((pathway: Pathway): VisEdge => {\n\t\t\tconst edge = VisService.convertPathwayToEdge(pathway);\n\t\t\treturn edge;\n\t\t});\n\n\t\t// configure vis\n\t\tvar options = {\n\t\t\tnodes: {\n\t\t\t\tborderWidth: 2\n\t\t\t},\n\t\t\tedges: {\n\t\t\t\twidth: 1,\n\t\t\t\tselectionWidth: 2,\n\t\t\t\tsmooth: true,\n\t\t\t\tfont: {\n\t\t\t\t\talign: 'middle',\n\t\t\t\t\tsize: 10\n\t\t\t\t}\n\t\t\t},\n\t\t\tmanipulation: {\n\t\t\t\tenabled: true,\n\t\t\t\tinitiallyActive: true,\n\t\t\t\taddNode: this.props.onStopAdd,\n\t\t\t\teditNode: this.props.onStopEdit,\n\t\t\t\tdeleteNode: (dataToDelete: { nodes: number[], edges: number[] }, callback: (dataToDelete?: { nodes: number[], edges: number[] }) => void): void => {\n\t\t\t\t\tdataToDelete.edges = network.getConnectedEdges(dataToDelete.nodes[0]);\n\t\t\t\t\tthis.props.onItemDelete(dataToDelete, callback);\n\t\t\t\t},\n\t\t\t\taddEdge: this.props.onPathwayAdd,\n\t\t\t\teditEdge: (movedEdge: VisEdge, callback: (edge: VisEdge) => {}) => {\n\t\t\t\t\tlet edgesDataSet = network.body.data.edges;\n\t\t\t\t\tlet edge = edgesDataSet.get(movedEdge.id);\n\t\t\t\t\tedge.from = movedEdge.from;\n\t\t\t\t\tedge.to = movedEdge.to;\n\t\t\t\t\tedge = VisService.updatePathwayInEdge(edge);\n\t\t\t\t\tcallback(edge);\n\t\t\t\t},\n\t\t\t\tdeleteEdge: this.props.onItemDelete\n\t\t\t},\n\t\t\tinteraction: {\n\t\t\t\tdragView: true,\n\t\t\t\thoverConnectedEdges: false,\n\t\t\t\tselectConnectedEdges: false,\n\t\t\t\tzoomView: true\n\t\t\t},\n\t\t\tphysics: false,\n\t\t\tlocales: {\n\t\t\t\t'gtfs': {\n\t\t\t\t\tedit: 'Edit',\n\t\t\t\t\tdel: 'Delete selected',\n\t\t\t\t\tback: 'Back',\n\t\t\t\t\taddNode: 'Add Location',\n\t\t\t\t\taddEdge: 'Add Pathway',\n\t\t\t\t\teditNode: 'Edit Location',\n\t\t\t\t\teditEdge: 'Edit Pathway',\n\t\t\t\t\taddDescription: 'Click in an empty space to place a new location.',\n\t\t\t\t\tedgeDescription: 'Click on a location and drag the pathway to another location to connect them.',\n\t\t\t\t\teditEdgeDescription: 'Click on the control points and drag them to a location to connect to it.',\n\t\t\t\t\tcreateEdgeError: 'Cannot link pathways to a cluster.',\n\t\t\t\t\tdeleteClusterError: 'Clusters cannot be deleted.',\n\t\t\t\t\teditClusterError: 'Clusters cannot be edited.'\n\t\t\t\t}\n\t\t\t},\n\t\t\tlocale: 'gtfs'\n\t\t};\n\n\t\tlet network = new vis.Network(container, { nodes, edges }, options);\n\t\tthis.network = network;\n\n\t\tnetwork.on(\"doubleClick\", (e: any) => {\n\t\t\tconst selection = network.getSelection();\n\t\t\tconst edgesDataSet = network.body.data.edges;\n\t\t\tconst nodesDataSet = network.body.data.nodes;\n\t\t\tif (e.event.srcEvent.ctrlKey) {\n\t\t\t\tconst position = e.pointer.canvas;\n\t\t\t\tthis.props.onFareZoneAdd(position, (nodes: VisNode[], edges: VisEdge[]) => {\n\t\t\t\t\tnodes.forEach((node) => {\n\t\t\t\t\t\tnodesDataSet.add(node);\n\t\t\t\t\t});\n\t\t\t\t\tedges.forEach((edge) => {\n\t\t\t\t\t\tedgesDataSet.add(edge);\n\t\t\t\t\t});\n\t\t\t\t});\n\t\t\t}\n\t\t\telse {\n\t\t\t\tif (selection.nodes.length === 1) {\n\t\t\t\t\tnetwork.editNode();\n\t\t\t\t}\n\t\t\t\telse if (selection.edges.length === 1) {\n\t\t\t\t\tconst edge: any = edgesDataSet.get(selection.edges[0]);\n\t\t\t\t\tthis.props.onPathwayEdit(edge, (edge?: VisEdge) => {\n\t\t\t\t\t\tif (edge) {\n\t\t\t\t\t\t\tedgesDataSet.update(edge);\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t\telse {\n\t\t\t\t\tconst position = e.pointer.canvas;\n\t\t\t\t\tconst newNode: any = {\n\t\t\t\t\t\tx: position.x,\n\t\t\t\t\t\ty: position.y\n\t\t\t\t\t};\n\t\t\t\t\tthis.props.onStopAdd(newNode, (node?: VisNode) => {\n\t\t\t\t\t\tif (node) {\n\t\t\t\t\t\t\tnodesDataSet.add(node);\n\t\t\t\t\t\t}\n\t\t\t\t\t})\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\n\t\tnetwork.on(\"oncontext\", (e: any) => {\n\t\t\te.event.preventDefault();\n\t\t\tlet selection = network.getSelection();\n\t\t\tif (selection.edges.length === 1) {\n\t\t\t\tnetwork.editEdgeMode();\n\t\t\t}\n\t\t});\n\n\t\tnetwork.on(\"dragEnd\", (e: any) => {\n\t\t\tif (e.nodes.length !== 0) {\n\t\t\t\tconst nodeId = e.nodes[0];\n\t\t\t\tconst position = e.pointer.canvas;\n\t\t\t\tthis.props.onStopDragEnd(nodeId, position);\n\t\t\t}\n\t\t});\n\n\t\tdocument.addEventListener('keydown', this.handleDocumentKeydown);\n\t}\n\n\tpublic componentWillUnmount() {\n\t\tdocument.removeEventListener('keydown', this.handleDocumentKeydown);\n\t} \n\n\tprivate handleDocumentKeydown = (e: KeyboardEvent) => {\n\t\tif (!this.props.isDialogShown && e.keyCode === 8) {\n\t\t\tconst selection = this.network.getSelection();\n\t\t\tif ((selection.nodes.length === 1) || (selection.edges.length === 1)) {\n\t\t\t\tthis.props.onItemDelete(selection, (dataToDelete?: { nodes: number[], edges: number[] }) => {\n\t\t\t\t\tif (dataToDelete) {\n\t\t\t\t\t\tthis.network.deleteSelected();\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t}\n\t\t}\n\t}\n\n\trender() {\n\t\treturn (\n\t\t\t<div id=\"vis\"></div>\n\t\t);\n\t}\n}\n","import React, { Component } from \"react\";\nimport \"./StopDialog.scss\";\nimport Stop, {\n\tLocationTypeMap,\n\tWheelchairBoardingMap,\n\tLocationTypeOnNodeLabelMap\n} from \"../interfaces/Stop\";\nimport Level from \"../interfaces/Level\";\n\nexport interface StopDialogProps {\n\tstop: Stop;\n\tstations: Stop[];\n\tplatforms: Stop[];\n\tlevels: Level[];\n\tonCancel: () => void;\n\tonApply: (stop: Stop) => void;\n}\n\nexport interface StopDialogState {\n\tparentStation: number;\n\tstopName?: string;\n\tlocationType: number;\n\twheelchairBoarding: number;\n\tplatformCode?: string;\n\tsignpostedAs?: string;\n\tlevelId?: number;\n}\n\nexport default class StopDialog extends Component<StopDialogProps, StopDialogState> {\n\tconstructor(props: StopDialogProps) {\n\t\tsuper(props);\n\t\tthis.state = {\n\t\t\tparentStation: props.stop.parentStation || -1,\n\t\t\tlevelId: props.stop.levelId || -1,\n\t\t\tstopName: props.stop.stopName,\n\t\t\tlocationType: props.stop.locationType,\n\t\t\twheelchairBoarding: props.stop.wheelchairBoarding,\n\t\t\tplatformCode: props.stop.platformCode,\n\t\t\tsignpostedAs: props.stop.signpostedAs\n\t\t};\n\t}\n\n\tprivate handleCancel = () => {\n\t\tthis.props.onCancel();\n\t};\n\n\tprivate handleApply = () => {\n\t\t// Validate\n\t\tif ([0, 1, 2].includes(this.state.locationType) && !this.state.stopName) {\n\t\t\talert(\"Selected location type must have a name\");\n\t\t\treturn;\n\t\t}\n\n\t\tthis.props.onApply({\n\t\t\t...this.props.stop,\n\t\t\t...this.state\n\t\t});\n\t};\n\n\tprivate handleParentStationChange = (\n\t\tevent: React.ChangeEvent<HTMLSelectElement>\n\t) => {\n\t\tthis.setState({\n\t\t\tparentStation: Number(event.target.value)\n\t\t});\n\t};\n\n\tprivate handleLevelChange = (event: React.ChangeEvent<HTMLSelectElement>) => {\n\t\tthis.setState({\n\t\t\tlevelId: Number(event.target.value)\n\t\t});\n\t}\n\n\tprivate handleLocationTypeChange = (\n\t\tevent: React.ChangeEvent<HTMLSelectElement>\n\t) => {\n\t\tlet parentStation = -1;\n\t\tif (Number(event.target.value) === 3) { // Station for Generic Node\n\t\t\tparentStation = this.props.stations[0].stopId;\n\t\t}\n\t\telse if (Number(event.target.value) === 4) { // Platform for Boarding Area\n\t\t\tparentStation = this.props.platforms[0].stopId;\n\t\t}\n\t\tthis.setState({\n\t\t\tlocationType: Number(event.target.value),\n\t\t\tparentStation\n\t\t});\n\t};\n\n\tprivate handleWheelchairBoardingChange = (\n\t\tevent: React.ChangeEvent<HTMLSelectElement>\n\t) => {\n\t\tthis.setState({\n\t\t\twheelchairBoarding: Number(event.target.value)\n\t\t});\n\t};\n\n\tprivate handleStopNameChange = (\n\t\tevent: React.ChangeEvent<HTMLInputElement>\n\t) => {\n\t\tthis.setState({\n\t\t\tstopName: event.target.value\n\t\t});\n\t};\n\n\tprivate handlePlatformCodeChange = (\n\t\tevent: React.ChangeEvent<HTMLInputElement>\n\t) => {\n\t\tthis.setState({\n\t\t\tplatformCode: event.target.value\n\t\t});\n\t};\n\n\tprivate handleSignpostedAsChange = (\n\t\tevent: React.ChangeEvent<HTMLInputElement>\n\t) => {\n\t\tthis.setState({\n\t\t\tsignpostedAs: event.target.value\n\t\t});\n\t};\n\n\tprivate handleKeyDown = (event: React.KeyboardEvent<HTMLDivElement>) => {\n\t\tif (event.keyCode === 13) {\n\t\t\tthis.handleApply();\n\t\t}\n\t}\n\n\trender() {\n\t\tconst parentStationOptions: JSX.Element[] = [];\n\t\tthis.props.stations.forEach(station => {\n\t\t\tparentStationOptions.push(\n\t\t\t\t<option key={station.stopId} value={station.stopId}>\n\t\t\t\t\t{station.stopName}\n\t\t\t\t</option>\n\t\t\t);\n\t\t});\n\n\t\tconst parentPlatformOptions: JSX.Element[] = [];\n\t\tthis.props.platforms.forEach(platform => {\n\t\t\tparentPlatformOptions.push(\n\t\t\t\t<option key={platform.stopId} value={platform.stopId}>\n\t\t\t\t\t{platform.stopId}. {platform.stopName}\n\t\t\t\t</option>\n\t\t\t);\n\t\t});\n\n\t\tconst levelOptions: JSX.Element[] = [];\n\t\tlevelOptions.push(\n\t\t\t<option key={-1} value={-1}>\n\t\t\t\tNone\n\t\t\t</option>\n\t\t);\n\t\tthis.props.levels.forEach(level => {\n\t\t\tlevelOptions.push(\n\t\t\t\t<option key={level.levelId} value={level.levelId}>\n\t\t\t\t\t{level.levelIndex} {level.levelName}\n\t\t\t\t</option>\n\t\t\t);\n\t\t});\n\n\t\tconst locationTypeOptions: JSX.Element[] = [];\n\t\tfor (const locationType in LocationTypeMap) {\n\t\t\tif ([\"Platform\", \"Station\", \"Entrance/Exit\"].includes(locationType)) {\n\t\t\t\tcontinue;\n\t\t\t}\n\t\t\tlocationTypeOptions.push(\n\t\t\t\t<option key={locationType} value={LocationTypeMap[locationType]}>\n\t\t\t\t\t{locationType}\n\t\t\t\t</option>\n\t\t\t);\n\t\t}\n\n\t\tconst wheelchairBoardingOptions: JSX.Element[] = [];\n\t\tfor (const wheelchairBoardingKey in WheelchairBoardingMap) {\n\t\t\twheelchairBoardingOptions.push(\n\t\t\t\t<option\n\t\t\t\t\tkey={wheelchairBoardingKey}\n\t\t\t\t\tvalue={WheelchairBoardingMap[wheelchairBoardingKey]}>\n\t\t\t\t\t{wheelchairBoardingKey}\n\t\t\t\t</option>\n\t\t\t);\n\t\t}\n\n\t\treturn (\n\t\t\t<div className=\"stop-dialog\" onKeyDown={this.handleKeyDown}>\n\t\t\t\t<div className=\"header\">Location properties</div>\n\t\t\t\t<div className=\"content\">\n\t\t\t\t\t<div>ID: {this.props.stop.stopId}</div>\n\t\t\t\t\t<div>\n\t\t\t\t\t\t{(this.state.locationType === 4) ? <div>\n\t\t\t\t\t\t\tParent platform:{\" \"}\n              \t\t\t\t<select\n\t\t\t\t\t\t\t\tvalue={this.state.parentStation}\n\t\t\t\t\t\t\t\tonChange={this.handleParentStationChange}>\n\t\t\t\t\t\t\t\t{parentPlatformOptions}\n\t\t\t\t\t\t\t</select>\n\t\t\t\t\t\t</div> : <div>\n\t\t\t\t\t\t\tParent station:{\" \"}\n              \t\t\t\t<select\n\t\t\t\t\t\t\t\tvalue={this.state.parentStation}\n\t\t\t\t\t\t\t\tonChange={this.handleParentStationChange}>\n\t\t\t\t\t\t\t\t{parentStationOptions}\n\t\t\t\t\t\t\t</select>\n\t\t\t\t\t\t</div>}\n\t\t\t\t\t\t<div>\n\t\t\t\t\t\t\tLevel:{\" \"}\n              \t\t\t\t<select\n\t\t\t\t\t\t\t\tvalue={this.state.levelId}\n\t\t\t\t\t\t\t\tonChange={this.handleLevelChange}>\n\t\t\t\t\t\t\t\t{levelOptions}\n\t\t\t\t\t\t\t</select>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t{[0, 2].includes(this.state.locationType) && (\n\t\t\t\t\t\t\t<div>\n\t\t\t\t\t\t\t\tLocation type: {LocationTypeOnNodeLabelMap[this.state.locationType]}\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t)}\n\t\t\t\t\t\t{[3, 4].includes(this.state.locationType) && (\n\t\t\t\t\t\t\t<div>\n\t\t\t\t\t\t\t\tLocation type:{\" \"}\n                \t\t\t\t<select\n\t\t\t\t\t\t\t\t\tvalue={this.state.locationType}\n\t\t\t\t\t\t\t\t\tonChange={this.handleLocationTypeChange}>\n\t\t\t\t\t\t\t\t\t{locationTypeOptions}\n\t\t\t\t\t\t\t\t</select>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t)}\n\t\t\t\t\t\t<div>\n\t\t\t\t\t\t\tName:{\" \"}\n\t\t\t\t\t\t\t<input\n\t\t\t\t\t\t\t\tdisabled={![3, 4].includes(this.state.locationType)}\n\t\t\t\t\t\t\t\ttype=\"text\"\n\t\t\t\t\t\t\t\tvalue={this.state.stopName || \"\"}\n\t\t\t\t\t\t\t\tonChange={this.handleStopNameChange}\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t{[0, 2].includes(this.state.locationType) && (\n\t\t\t\t\t\t\t<div>\n\t\t\t\t\t\t\t\tPlatform code:{\" \"}\n\t\t\t\t\t\t\t\t<input\n\t\t\t\t\t\t\t\t\ttype=\"text\"\n\t\t\t\t\t\t\t\t\tvalue={this.state.platformCode || \"\"}\n\t\t\t\t\t\t\t\t\tonChange={this.handlePlatformCodeChange}\n\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t)}\n\t\t\t\t\t\t{[0].includes(this.state.locationType) && (\n\t\t\t\t\t\t\t<div>\n\t\t\t\t\t\t\t\tSignposted as:{\" \"}\n\t\t\t\t\t\t\t\t<input\n\t\t\t\t\t\t\t\t\ttype=\"text\"\n\t\t\t\t\t\t\t\t\tvalue={this.state.signpostedAs || \"\"}\n\t\t\t\t\t\t\t\t\tonChange={this.handleSignpostedAsChange}\n\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t)}\n\t\t\t\t\t\t{[0, 2].includes(this.state.locationType) && (\n\t\t\t\t\t\t\t<div>\n\t\t\t\t\t\t\t\tWheelchair boarding:{\" \"}\n                \t\t\t\t<select\n\t\t\t\t\t\t\t\t\tvalue={this.state.wheelchairBoarding}\n\t\t\t\t\t\t\t\t\tonChange={this.handleWheelchairBoardingChange}>\n\t\t\t\t\t\t\t\t\t{wheelchairBoardingOptions}\n\t\t\t\t\t\t\t\t</select>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t)}\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t\t<div className=\"footer\">\n\t\t\t\t\t<button onClick={this.handleCancel}>Cancel</button>\n\t\t\t\t\t<button onClick={this.handleApply}>Apply</button>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t);\n\t}\n}\n","import React, { Component } from 'react';\nimport './PathwayDialog.scss';\nimport Pathway, { PathwayModeMap } from '../interfaces/Pathway';\n\nexport interface PathwayDialogProps {\n\tpathway: Pathway,\n\tonCancel: () => void,\n\tonApply: (pathway: Pathway) => void\n}\n\nexport interface PathwayDialogState {\n\tpathwayMode: number;\n\tisBidirectional: boolean;\n\tlength?: string;\n\ttraversalTime?: number;\n\tstairCount?: number;\n\tmaxSlope?: string;\n\tminWidth?: string;\n\tsignpostedAs?: string;\n\treversedSignpostedAs?: string;\n}\n\nexport default class PathwayDialog extends Component<PathwayDialogProps, PathwayDialogState> {\n\tconstructor(props: PathwayDialogProps) {\n\t\tsuper(props);\n\t\tthis.state = {\n\t\t\tpathwayMode: props.pathway.pathwayMode,\n\t\t\tisBidirectional: props.pathway.isBidirectional,\n\t\t\tlength: props.pathway.length ? props.pathway.length.toString() : undefined,\n\t\t\ttraversalTime: props.pathway.traversalTime,\n\t\t\tstairCount: props.pathway.stairCount,\n\t\t\tmaxSlope: props.pathway.maxSlope ? props.pathway.maxSlope.toString() : undefined,\n\t\t\tminWidth: props.pathway.minWidth ? props.pathway.minWidth.toString() : undefined,\n\t\t\tsignpostedAs: props.pathway.signpostedAs,\n\t\t\treversedSignpostedAs: props.pathway.reversedSignpostedAs\n\t\t}\n\t}\n\n\tprivate handleCancel = () => {\n\t\tthis.props.onCancel();\n\t}\n\n\tprivate handleApply = () => {\n\t\tif (!this.state.traversalTime) {\n\t\t\talert(\"Traversal time is required\");\n\t\t\treturn;\n\t\t}\n\t\tconst length = parseFloat(this.state.length || \"\");\n\t\tconst maxSlope = parseFloat(this.state.maxSlope || \"\");\n\t\tconst minWidth = parseFloat(this.state.minWidth || \"\");\n\t\tthis.props.onApply({\n\t\t\t...this.props.pathway,\n\t\t\t...this.state,\n\t\t\t...{\n\t\t\t\tlength: !isNaN(length) ? length : undefined,\n\t\t\t\tmaxSlope: !isNaN(maxSlope) ? maxSlope : undefined,\n\t\t\t\tminWidth: !isNaN(minWidth) ? minWidth : undefined\n\t\t\t}\n\t\t});\n\t}\n\n\tprivate handlePathwayModeChange = (event: React.ChangeEvent<HTMLSelectElement>) => {\n\t\tthis.setState({\n\t\t\tpathwayMode: Number(event.target.value)\n\t\t});\n\t}\n\n\tprivate handleIsBidirectionalChange = (event: React.ChangeEvent<HTMLInputElement>) => {\n\t\tthis.setState({\n\t\t\tisBidirectional: event.target.checked\n\t\t});\n\t}\n\n\tprivate handleLengthChange = (event: React.ChangeEvent<HTMLInputElement>) => {\n\t\tthis.setState({\n\t\t\tlength: event.target.value.replace(\",\", \".\").replace(/[^\\d.]/i, \"\")\n\t\t});\n\t}\n\n\tprivate handleTraversalTimeChange = (event: React.ChangeEvent<HTMLInputElement>) => {\n\t\tthis.setState({\n\t\t\ttraversalTime: parseInt(event.target.value)\n\t\t});\n\t}\n\n\tprivate handleStairCountChange = (event: React.ChangeEvent<HTMLInputElement>) => {\n\t\tthis.setState({\n\t\t\tstairCount: parseInt(event.target.value)\n\t\t});\n\t}\n\n\tprivate handleMaxSlopeChange = (event: React.ChangeEvent<HTMLInputElement>) => {\n\t\tthis.setState({\n\t\t\tmaxSlope: event.target.value.replace(\",\", \".\").replace(/[^\\d.]/i, \"\")\n\t\t});\n\t}\n\n\tprivate handleMinWidthChange = (event: React.ChangeEvent<HTMLInputElement>) => {\n\t\tthis.setState({\n\t\t\tminWidth: event.target.value.replace(\",\", \".\").replace(/[^\\d.]/i, \"\")\n\t\t});\n\t}\n\n\tprivate handleSignpostedAsChange = (event: React.ChangeEvent<HTMLInputElement>) => {\n\t\tthis.setState({\n\t\t\tsignpostedAs: event.target.value\n\t\t});\n\t}\n\n\tprivate handleReversedSignpostedAsChange = (event: React.ChangeEvent<HTMLInputElement>) => {\n\t\tthis.setState({\n\t\t\treversedSignpostedAs: event.target.value\n\t\t});\n\t}\n\n\tprivate handleKeyDown = (event: React.KeyboardEvent<HTMLDivElement>) => {\n\t\tif (event.keyCode === 13) {\n\t\t\tthis.handleApply();\n\t\t}\n\t}\n\n\trender() {\n\t\tconst pathwayModeOptions: JSX.Element[] = [];\n\t\tfor (const pathwayModeKey in PathwayModeMap) {\n\t\t\tpathwayModeOptions.push(\n\t\t\t\t<option key={pathwayModeKey} value={PathwayModeMap[pathwayModeKey]}>{pathwayModeKey}</option>\n\t\t\t);\n\t\t}\n\n\t\treturn (\n\t\t\t<div className=\"pathway-dialog\" onKeyDown={this.handleKeyDown}>\n\t\t\t\t<div className=\"header\">Pathway properties</div>\n\t\t\t\t<div className=\"content\">\n\t\t\t\t\t<div>\n\t\t\t\t\t\tID: {this.props.pathway.pathwayId}\n\t\t\t\t\t</div>\n\t\t\t\t\t<div>\n\t\t\t\t\t\t<div>\n\t\t\t\t\t\t\tLocation type:\n              <select value={this.state.pathwayMode} onChange={this.handlePathwayModeChange}>\n\t\t\t\t\t\t\t\t{pathwayModeOptions}\n\t\t\t\t\t\t\t</select>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div>\n\t\t\t\t\t\t\t<label>\n\t\t\t\t\t\t\t\tIs bidirectional:\n                <input type=\"checkbox\" checked={this.state.isBidirectional} onChange={this.handleIsBidirectionalChange} />\n\t\t\t\t\t\t\t</label>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div>\n\t\t\t\t\t\t\tLength: <input type=\"text\" value={this.state.length || \"\"} onChange={this.handleLengthChange} /> meters\n            </div>\n\t\t\t\t\t\t<div>\n\t\t\t\t\t\t\tTraversal time: <input type=\"text\" value={this.state.traversalTime || \"\"} onChange={this.handleTraversalTimeChange} /> seconds\n            </div>\n\t\t\t\t\t\t<div>\n\t\t\t\t\t\t\tStair count: <input type=\"text\" value={this.state.stairCount || \"\"} onChange={this.handleStairCountChange} />\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div>\n\t\t\t\t\t\t\tMax slope: <input type=\"text\" value={this.state.maxSlope || \"\"} onChange={this.handleMaxSlopeChange} />\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div>\n\t\t\t\t\t\t\tMin width: <input type=\"text\" value={this.state.minWidth || \"\"} onChange={this.handleMinWidthChange} /> meters\n            </div>\n\t\t\t\t\t\t<div>\n\t\t\t\t\t\t\tSignposted as: <input type=\"text\" value={this.state.signpostedAs || \"\"} onChange={this.handleSignpostedAsChange} />\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div>\n\t\t\t\t\t\t\tReversed signposted as: <input type=\"text\" value={this.state.reversedSignpostedAs || \"\"} onChange={this.handleReversedSignpostedAsChange} />\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t\t<div className=\"footer\">\n\t\t\t\t\t<button onClick={this.handleCancel}>Cancel</button>\n\t\t\t\t\t<button onClick={this.handleApply}>Apply</button>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t);\n\t}\n}\n","import React, { Component } from 'react';\nimport './StationBuilder.scss';\nimport Vis from './Vis';\nimport StopDialog from './StopDialog';\nimport Stop from '../interfaces/Stop';\nimport VisNode from '../interfaces/VisNode';\nimport VisService from '../services/VisService';\nimport Communication from '../interfaces/Communication';\nimport Pathway, { PathwayModeMap } from '../interfaces/Pathway';\nimport VisEdge from '../interfaces/VisEdge';\nimport PathwayDialog from './PathwayDialog';\nimport cloneDeep from 'lodash/cloneDeep';\nimport Level from '../interfaces/Level';\nimport circleRedImage from '../images/circle-red.png';\nimport circleBlueImage from '../images/circle-blue.png';\n\ndeclare const google: any;\n\nexport interface StationBuilderProps {\n\tdata: Communication,\n\tonSave: (data: Communication, deletedStopsIds: number[], deletedPathwaysIds: number[]) => void,\n\tonCancel: () => void,\n\tmapDiv?: HTMLDivElement,\n\tmap?: google.maps.Map\n}\n\nexport interface StationBuilderState {\n\tdata: Communication,\n\tselectedStop: {\n\t\tstop: Stop,\n\t\tnode: VisNode,\n\t\tcallback: (node?: VisNode) => void\n\t} | null,\n\tselectedPathway: {\n\t\tpathway: Pathway,\n\t\tedge: VisEdge,\n\t\tcallback: (edge?: VisEdge) => void\n\t} | null,\n\tmapMarkers: google.maps.Marker[],\n\tstations: Stop[],\n\tplatforms: Stop[],\n\tlevels: Level[],\n\tlatK: number,\n\tlatX: number,\n\tlonK: number,\n\tlonX: number,\n\tdeletedStopsIds: number[],\n\tdeletedPathwaysIds: number[]\n}\n\nexport default class StationBuilder extends Component<StationBuilderProps, StationBuilderState> {\n\tprivate mapRef: React.RefObject<HTMLDivElement> = React.createRef();\n\n\tconstructor(props: StationBuilderProps) {\n\t\tsuper(props);\n\t\tlet stations: Stop[] = [];\n\t\tlet platforms: Stop[] = [];\n\t\tprops.data.stops.forEach((stop: Stop) => {\n\t\t\tif (stop.locationType === 0) {\n\t\t\t\tplatforms.push(stop);\n\t\t\t}\n\t\t\tif (stop.locationType === 1) {\n\t\t\t\tstations.push(stop);\n\t\t\t}\n\t\t});\n\t\tif (stations.length === 0) {\n\t\t\tthrow new Error(\"No station provided in input data\");\n\t\t}\n\t\tif (platforms.length === 0) {\n\t\t\tthrow new Error(\"No platforms provided in input data\");\n\t\t}\n\n\t\tlet minLat = 0;\n\t\tlet minLon = 0;\n\t\tlet maxLat = 0;\n\t\tlet maxLon = 0;\n\t\tprops.data.stops.forEach((stop: Stop) => {\n\t\t\tif (!minLat || (stop.stopLat < minLat)) {\n\t\t\t\tminLat = stop.stopLat;\n\t\t\t}\n\t\t\tif (!minLon || (stop.stopLon < minLon)) {\n\t\t\t\tminLon = stop.stopLon;\n\t\t\t}\n\t\t\tif (!maxLat || (stop.stopLat > maxLat)) {\n\t\t\t\tmaxLat = stop.stopLat;\n\t\t\t}\n\t\t\tif (!maxLon || (stop.stopLon > maxLon)) {\n\t\t\t\tmaxLon = stop.stopLon;\n\t\t\t}\n\t\t});\n\t\tlet latGap = maxLat - minLat;\n\t\tlet lonGap = maxLon - minLon;\n\t\tconst lonK = 1000.0 / lonGap;\n\t\tconst lonX = -minLon * 1000.0 / lonGap;\n\t\tconst latK = -1000.0 / latGap;\n\t\tconst latX = maxLat * 1000.0 / latGap;\n\n\t\t// Init VisService state\n\t\tVisService.newStopId = -1;\n\t\tVisService.newPathwayId = -1;\n\t\tVisService.edgeRoundness = {};\n\n\t\tthis.state = {\n\t\t\tdata: cloneDeep(props.data),\n\t\t\tselectedStop: null,\n\t\t\tselectedPathway: null,\n\t\t\tmapMarkers: [],\n\t\t\tstations,\n\t\t\tplatforms,\n\t\t\tlevels: props.data.levels,\n\t\t\tlatK,\n\t\t\tlatX,\n\t\t\tlonK,\n\t\t\tlonX,\n\t\t\tdeletedStopsIds: [],\n\t\t\tdeletedPathwaysIds: []\n\t\t};\n\t}\n\n\tpublic componentDidMount() {\n\t\tconst bounds = new google.maps.LatLngBounds();\n\t\tthis.props.data.stops.forEach((stop: Stop) => {\n\t\t\tbounds.extend({\n\t\t\t\tlat: stop.stopLat,\n\t\t\t\tlng: stop.stopLon\n\t\t\t});\n\t\t});\n\n\t\tlet map: google.maps.Map;\n\n\t\tif (this.mapRef.current) {\n\t\t\tif (this.props.mapDiv && this.props.map) {\n\t\t\t\tthis.mapRef.current.appendChild(this.props.mapDiv);\n\t\t\t\tthis.props.map.fitBounds(bounds);\n\t\t\t\tmap = this.props.map;\n\t\t\t}\n\t\t\telse {\n\t\t\t\tconsole.log(\"Google map initialized\");\n\t\t\t\tmap = new google.maps.Map(this.mapRef.current);\n\t\t\t\tmap.fitBounds(bounds);\n\t\t\t}\n\t\t}\n\n\t\tthis.props.data.stops.filter((stop: Stop) => {\n\t\t\treturn [0, 2].includes(stop.locationType);\n\t\t}).forEach((stop: Stop) => {\n\t\t\tthis.state.mapMarkers.push(new google.maps.Marker({\n\t\t\t\tmap: map,\n\t\t\t\tposition: {\n\t\t\t\t\tlat: stop.stopLat,\n\t\t\t\t\tlng: stop.stopLon\n\t\t\t\t},\n\t\t\t\ticon: stop.locationType === 0 ? circleBlueImage : circleRedImage\n\t\t\t}));\n\t\t});\n\n\t\tdocument.addEventListener('keydown', this.handleDocumentKeydown);\n\t}\n\n\tprivate handleDocumentKeydown = (e: KeyboardEvent) => {\n\t\tif (e.keyCode === 27) {\n\t\t\tthis.handleDialogCancel();\n\t\t}\n\t}\n\n\tpublic componentWillUnmount() {\n\t\tthis.state.mapMarkers.forEach((marker) => {\n\t\t\tmarker.setMap(null);\n\t\t});\n\t\tdocument.removeEventListener('keydown', this.handleDocumentKeydown);\n\t}\n\n\tprivate handleStopAddMode = (node: VisNode, callback: (node?: VisNode) => void) => {\n\t\tnode = VisService.prepareNewNode(node, this.state.stations, {\n\t\t\tlatK: this.state.latK,\n\t\t\tlatX: this.state.latX,\n\t\t\tlonK: this.state.lonK,\n\t\t\tlonX: this.state.lonX\n\t\t});\n\t\tthis.setState({\n\t\t\tselectedStop: {\n\t\t\t\tstop: node.stop,\n\t\t\t\tnode: node,\n\t\t\t\tcallback: callback\n\t\t\t}\n\t\t});\n\t}\n\n\tprivate handleStopEditMode = (node: VisNode, callback: (node?: VisNode) => void) => {\n\t\tthis.setState({\n\t\t\tselectedStop: {\n\t\t\t\tstop: node.stop,\n\t\t\t\tnode: node,\n\t\t\t\tcallback: callback\n\t\t\t}\n\t\t});\n\t}\n\n\tprivate handlePathwayAddMode = (edge: VisEdge, callback: (edge?: VisEdge) => void) => {\n\t\tedge = VisService.prepareNewEdge(edge);\n\t\tthis.setState({\n\t\t\tselectedPathway: {\n\t\t\t\tpathway: edge.pathway,\n\t\t\t\tedge: edge,\n\t\t\t\tcallback: callback\n\t\t\t}\n\t\t});\n\t}\n\n\tprivate handlePathwayEditMode = (edge: VisEdge, callback: (edge?: VisEdge) => void) => {\n\t\tthis.setState({\n\t\t\tselectedPathway: {\n\t\t\t\tpathway: edge.pathway,\n\t\t\t\tedge: edge,\n\t\t\t\tcallback: callback\n\t\t\t}\n\t\t});\n\t}\n\n\tprivate handleStopDialogApply = (stop: Stop) => {\n\t\tif (this.state.selectedStop) {\n\t\t\tconst data = this.state.data;\n\t\t\tconst stopIndex = data.stops.findIndex(curStop => curStop.stopId === stop.stopId);\n\t\t\tif (stopIndex === -1) {\n\t\t\t\tdata.stops.push(stop);\n\t\t\t}\n\t\t\telse {\n\t\t\t\tdata.stops[stopIndex] = stop;\n\t\t\t}\n\t\t\tconst node = VisService.attachStopToNode(stop, this.state.selectedStop.node);\n\t\t\tthis.state.selectedStop.callback(node);\n\t\t\tthis.setState({\n\t\t\t\tselectedStop: null,\n\t\t\t\tdata\n\t\t\t});\n\t\t}\n\t}\n\n\tprivate handlePathwayDialogApply = (pathway: Pathway) => {\n\t\tif (this.state.selectedPathway) {\n\t\t\tconst data = this.state.data;\n\t\t\tconst pathwayIndex = data.pathways.findIndex(curPathway => curPathway.pathwayId === pathway.pathwayId);\n\t\t\tif (pathwayIndex === -1) {\n\t\t\t\tdata.pathways.push(pathway);\n\t\t\t}\n\t\t\telse {\n\t\t\t\tdata.pathways[pathwayIndex] = pathway;\n\t\t\t}\n\t\t\tconst edge = VisService.attachPathwayToEdge(pathway, this.state.selectedPathway.edge);\n\t\t\tthis.state.selectedPathway.callback(edge);\n\t\t\tthis.setState({\n\t\t\t\tselectedPathway: null,\n\t\t\t\tdata\n\t\t\t});\n\t\t}\n\t}\n\n\tprivate handleItemDelete = (\n\t\tdataToDelete: { nodes: number[], edges: number[] },\n\t\tcallback: (dataToDelete?: { nodes: number[], edges: number[] }) => void\n\t) => {\n\t\tconst hasError = dataToDelete.nodes.some((nodeId: number) => {\n\t\t\tconst stop: Stop | undefined = this.state.data.stops.find(stop => stop.stopId === nodeId);\n\t\t\tif (stop && ![3, 4].includes(stop.locationType)) {\n\t\t\t\talert(\"You can't delete this location type\");\n\t\t\t\treturn true;\n\t\t\t}\n\t\t\tconst stopIndex = this.state.data.stops.findIndex(stop => stop.stopId === nodeId);\n\t\t\tif (stopIndex !== -1) {\n\t\t\t\tthis.state.data.stops.splice(stopIndex, 1);\n\t\t\t\tthis.state.deletedStopsIds.push(nodeId);\n\t\t\t}\n\t\t\treturn false;\n\t\t});\n\t\tif (hasError) {\n\t\t\tcallback();\n\t\t\treturn;\n\t\t}\n\t\tdataToDelete.edges.forEach((pathwayId: number) => {\n\t\t\tconst pathwayIndex = this.state.data.pathways.findIndex(pathway => pathway.pathwayId === pathwayId);\n\t\t\tif (pathwayIndex !== -1) {\n\t\t\t\tthis.state.data.pathways.splice(pathwayIndex, 1);\n\t\t\t\tthis.state.deletedPathwaysIds.push(pathwayId);\n\t\t\t}\n\t\t});\n\t\tcallback(dataToDelete);\n\t}\n\n\tprivate handleDialogCancel = () => {\n\t\tif (this.state.selectedStop) {\n\t\t\tthis.state.selectedStop.callback();\n\t\t\tthis.setState({\n\t\t\t\tselectedStop: null\n\t\t\t});\n\t\t}\n\t\tif (this.state.selectedPathway) {\n\t\t\tthis.state.selectedPathway.callback();\n\t\t\tthis.setState({\n\t\t\t\tselectedPathway: null\n\t\t\t});\n\t\t}\n\t}\n\n\tprivate handleSaveClick = () => {\n\t\tthis.props.onSave(this.state.data, this.state.deletedStopsIds, this.state.deletedPathwaysIds);\n\t}\n\n\tprivate handleCancelClick = () => {\n\t\tthis.props.onCancel();\n\t}\n\n\tprivate handleStopDragEnd = (nodeId: number, position: {x: number, y: number}) => {\n\t\tconst stop: Stop | undefined = this.state.data.stops.find((stop: Stop) => {\n\t\t\treturn stop.stopId === nodeId;\n\t\t});\n\t\t// Update position for generic nodes and boarding areas\n\t\tif (stop && [3, 4].includes(stop.locationType)) {\n\t\t\tstop.stopLat = ((position.y || 0) - this.state.latX) / this.state.latK;\n\t\t\tstop.stopLon = ((position.x || 0) - this.state.lonX) / this.state.lonK;\n\t\t}\n\t}\n\n\tprivate handleFareZoneAdd = (position: {x: number, y: number}, callback: (nodes: VisNode[], edges: VisEdge[]) => void) => {\n\t\tconst node1: VisNode = VisService.prepareNewNode({\n\t\t\tx: position.x,\n\t\t\ty: position.y\n\t\t} as VisNode, this.state.stations, {\n\t\t\tlatK: this.state.latK,\n\t\t\tlatX: this.state.latX,\n\t\t\tlonK: this.state.lonK,\n\t\t\tlonX: this.state.lonX\n\t\t});\n\t\tthis.state.data.stops.push(node1.stop);\n\n\t\tconst node2: VisNode = VisService.prepareNewNode({\n\t\t\tx: position.x - 100,\n\t\t\ty: position.y\n\t\t} as VisNode, this.state.stations, {\n\t\t\tlatK: this.state.latK,\n\t\t\tlatX: this.state.latX,\n\t\t\tlonK: this.state.lonK,\n\t\t\tlonX: this.state.lonX\n\t\t});\n\t\tthis.state.data.stops.push(node2.stop);\n\n\t\tlet edge1: VisEdge = VisService.prepareNewEdge({\n\t\t\tfrom: node1.id,\n\t\t\tto: node2.id\n\t\t} as VisEdge);\n\t\tedge1.pathway.pathwayMode = PathwayModeMap['FareGate'];\n\t\tedge1.pathway.isBidirectional = false;\n\t\tedge1.pathway.traversalTime = 10;\n\t\tedge1 = VisService.attachPathwayToEdge(edge1.pathway, edge1);\n\t\tthis.state.data.pathways.push(edge1.pathway);\n\n\t\tlet edge2: VisEdge = VisService.prepareNewEdge({\n\t\t\tfrom: node2.id,\n\t\t\tto: node1.id\n\t\t} as VisEdge);\n\t\tedge2.pathway.pathwayMode = PathwayModeMap['ExitGate'];\n\t\tedge2.pathway.isBidirectional = false;\n\t\tedge2.pathway.traversalTime = 10;\n\t\tedge2 = VisService.attachPathwayToEdge(edge2.pathway, edge2);\n\t\tthis.state.data.pathways.push(edge2.pathway);\n\n\t\tcallback([node1, node2], [edge1, edge2]);\n\t}\n\n\trender() {\n\t\treturn (\n\t\t\t<div className=\"station-builder\">\n\t\t\t\t<div className=\"panel\">\n\t\t\t\t\t<button className=\"save\" onClick={this.handleSaveClick}>Save</button>\n\t\t\t\t\t<button className=\"cancel\" onClick={this.handleCancelClick}>Cancel</button>\n\t\t\t\t</div>\n\t\t\t\t<div className=\"main\">\n\t\t\t\t\t<div className=\"graph\">\n\t\t\t\t\t\t<Vis\n\t\t\t\t\t\t\tdata={this.state.data}\n\t\t\t\t\t\t\tonStopAdd={this.handleStopAddMode}\n\t\t\t\t\t\t\tonStopEdit={this.handleStopEditMode}\n\t\t\t\t\t\t\tonItemDelete={this.handleItemDelete}\n\t\t\t\t\t\t\tonStopDragEnd={this.handleStopDragEnd}\n\t\t\t\t\t\t\tonPathwayAdd={this.handlePathwayAddMode}\n\t\t\t\t\t\t\tonPathwayEdit={this.handlePathwayEditMode}\n\t\t\t\t\t\t\tonFareZoneAdd={this.handleFareZoneAdd}\n\t\t\t\t\t\t\tlatK={this.state.latK}\n\t\t\t\t\t\t\tlatX={this.state.latX}\n\t\t\t\t\t\t\tlonK={this.state.lonK}\n\t\t\t\t\t\t\tlonX={this.state.lonX}\n\t\t\t\t\t\t\tisDialogShown={!!(this.state.selectedStop || this.state.selectedPathway)}></Vis>\n\n\t\t\t\t\t\t{this.state.selectedStop && <StopDialog\n\t\t\t\t\t\t\tstop={this.state.selectedStop.stop}\n\t\t\t\t\t\t\tstations={this.state.stations}\n\t\t\t\t\t\t\tplatforms={this.state.platforms}\n\t\t\t\t\t\t\tlevels={this.state.levels}\n\t\t\t\t\t\t\tonCancel={this.handleDialogCancel}\n\t\t\t\t\t\t\tonApply={this.handleStopDialogApply}></StopDialog>}\n\n\t\t\t\t\t\t{this.state.selectedPathway && <PathwayDialog\n\t\t\t\t\t\t\tpathway={this.state.selectedPathway.pathway}\n\t\t\t\t\t\t\tonCancel={this.handleDialogCancel}\n\t\t\t\t\t\t\tonApply={this.handlePathwayDialogApply}></PathwayDialog>}\n\t\t\t\t\t</div>\n\t\t\t\t\t<div className=\"map\" ref={this.mapRef}></div>\n\t\t\t\t</div>\n\t\t\t\t{(this.state.selectedStop || this.state.selectedPathway) && <div className=\"dialog-bg\" onClick={this.handleDialogCancel}></div>}\n\t\t\t</div>\n\t\t);\n\t}\n}\n","import Stop from \"../interfaces/Stop\";\nimport Pathway from \"../interfaces/Pathway\";\nimport Level from \"../interfaces/Level\";\n\n/* GTFS to objects conversion and vise versa */\nexport default class DataService {\n    static fromGTFS<T>(data: string, recordFromGTFS: (record: {[key: string]: string}) => T): T[] {\n        const rows: string[] = data.split(\"\\n\");\n        let records: T[] = [];\n        let header: string[] = [];\n        rows.forEach((row: string) => {\n\t\t\tif (row) {\n\t\t\t\tconst cells = this.csvToArray(row);\n\t\t\t\t// header\n\t\t\t\tif (header.length === 0) {\n\t\t\t\t\tcells.forEach((cell: string, cellIndex: number) => {\n\t\t\t\t\t\theader[cellIndex] = cell;\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t\t// data\n\t\t\t\telse {\n\t\t\t\t\tlet recordGTFS: {[key: string]: string} = {};\n\t\t\t\t\tcells.forEach((cell: string, cellIndex: number) => {\n\t\t\t\t\t\tif (cell !== '') {\n\t\t\t\t\t\t\tconst fieldName = header[cellIndex];\n\t\t\t\t\t\t\trecordGTFS[fieldName] = cell;\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\n\t\t\t\t\trecords.push(recordFromGTFS(recordGTFS));\n\t\t\t\t}\n\t\t\t}\n        });\n        return records;\n    }\n\n    static stopFromGTFS(stop: {[key: string]: string}): Stop {\n        return {\n\t\t\tstopId: Number(stop['stop_id']),\n\t\t\tstopLat: Number(stop['stop_lat']),\n\t\t\tstopLon: Number(stop['stop_lon']),\n\t\t\tparentStation: stop['parent_station'] ? Number(stop['parent_station']) : undefined,\n            stopName: stop['stop_name'],\n            locationType: Number(stop['location_type']),\n            wheelchairBoarding: Number(stop['wheelchair_boarding']),\n            levelId: stop['level_id'] ? Number(stop['level_id']) : undefined,\n            platformCode: stop['platform_code'],\n            signpostedAs: stop['signposted_as']\n        };\n    }\n\n\tstatic getStopGTFSHeader(): string {\n\t\treturn\t'stop_id,' +\n\t\t\t\t'stop_lat,' + \n\t\t\t\t'stop_lon,' + \n\t\t\t\t'stop_name,' +\n\t\t\t\t'location_type,' +\n\t\t\t\t'parent_station,' +\n\t\t\t\t'wheelchair_boarding,' +\n\t\t\t\t'level_id,' +\n\t\t\t\t'platform_code,' +\n\t\t\t\t'signposted_as';\n\t}\n\n    static stopToGTFS(stop: Stop): string {\n\t\treturn  stop.stopId.toString() + ',' +\n\t\t\t\tstop.stopLat.toString() + ',' +\n\t\t\t\tstop.stopLon.toString() + ',' +\n\t\t\t\tthis.escapeText(stop.stopName || '') + ',' +\n\t\t\t\tstop.locationType.toString() + ',' +\n\t\t\t\t(stop.parentStation || '') + ',' +\n                stop.wheelchairBoarding.toString() + ',' +\n                (stop.levelId || '') + ',' +\n                this.escapeText(stop.platformCode || '') + ',' +\n                this.escapeText(stop.signpostedAs || '');\n    }\n\n    static pathwayFromGTFS(pathway: {[key: string]: string}): Pathway {\n        return {\n            pathwayId: Number(pathway['pathway_id']),\n            fromStopId: Number(pathway['from_stop_id']),\n            toStopId: Number(pathway['to_stop_id']),\n            pathwayMode: Number(pathway['pathway_mode']),\n            isBidirectional: Number(pathway['is_bidirectional']) === 1,\n            length: pathway['length'] ? Number(pathway['length']) : undefined,\n            traversalTime: pathway['traversal_time'] ? Number(pathway['traversal_time']) : undefined,\n            stairCount: pathway['stair_count'] ? Number(pathway['stair_count']) : undefined,\n            maxSlope: pathway['max_slope'] ? Number(pathway['max_slope']) : undefined,\n            minWidth: pathway['min_width'] ? Number(pathway['min_width']) : undefined,\n            signpostedAs: pathway['signposted_as'],\n            reversedSignpostedAs: pathway['reversed_signposted_as']\n        };\n    }\n\n\tstatic getPathwayGTFSHeader(): string {\n\t\treturn\t'pathway_id,' +\n\t\t\t\t'from_stop_id,' +\n\t\t\t\t'to_stop_id,' +\n\t\t\t\t'pathway_mode,' +\n\t\t\t\t'is_bidirectional,' +\n\t\t\t\t'length,' +\n\t\t\t\t'traversal_time,' +\n\t\t\t\t'stair_count,' +\n\t\t\t\t'max_slope,' +\n\t\t\t\t'min_width,' +\n\t\t\t\t'signposted_as,' +\n\t\t\t\t'reversed_signposted_as';\n\t}\n\n    static pathwayToGTFS(pathway: Pathway): string {\n        return  pathway.pathwayId.toString() + ',' +\n                pathway.fromStopId.toString() + ',' +\n                pathway.toStopId.toString() + ',' +\n                pathway.pathwayMode.toString() + ',' +\n                (pathway.isBidirectional ? '1' : '0') + ',' +\n                (pathway.length || '') + ',' +\n                (pathway.traversalTime || '') + ',' +\n                (pathway.stairCount || '') + ',' +\n                (pathway.maxSlope || '') + ',' +\n                (pathway.minWidth || '') + ',' +\n                this.escapeText(pathway.signpostedAs || '') + ',' +\n                this.escapeText(pathway.reversedSignpostedAs || '');\n    }\n\n    static levelFromGTFS(level: {[key: string]: string}): Level {\n        return {\n            levelId: Number(level['level_id']),\n            levelName: level['level_name'],\n            levelIndex: Number(level['level_index'])\n        };\n    }\n\n\tstatic getLevelGTFSHeader(): string {\n\t\treturn\t'level_id,' +\n\t\t\t\t'level_name,' +\n\t\t\t\t'level_index';\n\t}\n\n    static levelToGTFS(level: Level): string {\n        return  level.levelId.toString() + ',' +\n\t\t\t\tthis.escapeText(level.levelName || '') + ',' +\n                level.levelIndex.toString();\n\t}\n\n\t// TODO\n\tstatic escapeText(text: string): string {\n\t\treturn text;\n\t}\n\n\t// Return array of string values\n\t// Source: https://stackoverflow.com/questions/8493195/how-can-i-parse-a-csv-string-with-javascript-which-contains-comma-in-data\n\tstatic csvToArray(text: string) {\n\t\tvar re_value = /(?!\\s*$)\\s*(?:'([^'\\\\]*(?:\\\\[\\S\\s][^'\\\\]*)*)'|\"([^\"\\\\]*(?:\\\\[\\S\\s][^\"\\\\]*)*)\"|([^,'\"\\s\\\\]*(?:\\s+[^,'\"\\s\\\\]+)*))\\s*(?:,|$)/g;\n\t\tvar a = [];                     // Initialize array to receive values.\n\t\ttext.replace(re_value, // \"Walk\" the string using replace with callback.\n\t\t\tfunction(m0, m1, m2, m3) {\n\t\t\t\t// Remove backslash from \\' in single quoted values.\n\t\t\t\tif      (m1 !== undefined) a.push(m1.replace(/\\\\'/g, \"'\"));\n\t\t\t\t// Remove backslash from \\\" in double quoted values.\n\t\t\t\telse if (m2 !== undefined) a.push(m2.replace(/\\\\\"/g, '\"'));\n\t\t\t\telse if (m3 !== undefined) a.push(m3);\n\t\t\t\treturn ''; // Return empty string.\n\t\t\t});\n\t\t// Handle special case of empty last value.\n\t\tif (/,\\s*$/.test(text)) a.push('');\n\t\treturn a;\n\t};\n}\n\n","export default class FileService {\n\tpublic static readUploadedFileAsText = async (inputFile: File): Promise<string> => {\n\t\tconst temporaryFileReader = new FileReader();\n\n\t\treturn new Promise((resolve, reject) => {\n\t\t\ttemporaryFileReader.onerror = () => {\n\t\t\t\ttemporaryFileReader.abort();\n\t\t\t\treject(new DOMException(\"Error while parsing input file.\"));\n\t\t\t};\n\n\t\t\ttemporaryFileReader.onload = () => {\n\t\t\t\tresolve((temporaryFileReader.result || \"\") as string);\n\t\t\t};\n\t\t\ttemporaryFileReader.readAsText(inputFile);\n\t\t});\n\t};\n}\n","declare const google: any;\n\nclass TxtOverlay extends google.maps.OverlayView {\n\tprivate pos_: google.maps.LatLng;\n\tprivate text_: string;\n\tprivate class_: string;\n\tprivate map_: google.maps.Map;\n\tprivate div_: HTMLElement | null;\n\n\tpublic constructor(pos: google.maps.LatLng, text: string, className: string, map: google.maps.Map) {\n\t\tsuper();\n\t\tthis.pos_ = pos;\n\t\tthis.text_ = text;\n\t\tthis.class_ = className;\n\t\tthis.map_ = map;\n\t\tthis.div_ = null;\n\t\tthis.setMap(map);\n\t}\n\n\tpublic onAdd = () => {\n\t\tvar div = document.createElement('DIV');\n\t\tdiv.className = this.class_;\n\t\tdiv.innerHTML = this.text_;\n\t\tthis.div_ = div;\n\t\tvar overlayProjection = this.getProjection();\n\t\tvar position = overlayProjection.fromLatLngToDivPixel(this.pos_);\n\t\tdiv.style.left = position.x + 'px';\n\t\tdiv.style.top = position.y + 'px';\n\t\tvar panes = this.getPanes();\n\t\tpanes.floatPane.appendChild(div);\n\t}\n\t\n\tpublic draw = () =>  {\n\t\tvar overlayProjection = this.getProjection();\n\t\tvar position = overlayProjection.fromLatLngToDivPixel(this.pos_);\n\t\tvar div = this.div_;\n\t\tif (div) {\n\t\t\tdiv.style.left = position.x + 'px';\n\t\t\tdiv.style.top = position.y + 'px';\n\t\t}\n\t}\n\t\n\tpublic onRemove = () => {\n\t\tif (this.div_ && this.div_.parentNode) {\n\t\t\tthis.div_.parentNode.removeChild(this.div_);\n\t\t\tthis.div_ = null;\n\t\t}\n\t}\n\t\n\tpublic hide = () => {\n\t\tif (this.div_) {\n\t\t\tthis.div_.style.visibility = \"hidden\";\n\t\t}\n\t}\n\t\n\t\n\tpublic show = () => {\n\t\tif (this.div_) {\n\t\t\tthis.div_.style.visibility = \"visible\";\n\t\t}\n\t}\n\t\n\tpublic toggle = () => {\n\t\tif (this.div_) {\n\t\t\tif (this.div_.style.visibility === \"hidden\") {\n\t\t\t\tthis.show();\n\t\t\t} else {\n\t\t\t\tthis.hide();\n\t\t\t}\n\t\t}\n\t}\n\t\n\tpublic toggleDOM = () => {\n\t\tif (this.getMap()) {\n\t\t\tthis.setMap(null);\n\t\t} else {\n\t\t\tthis.setMap(this.map_);\n\t\t}\n\t}\n}\n\nexport default TxtOverlay;","import React, { Component } from \"react\";\nimport \"./App.scss\";\nimport StationBuilder from \"./components/StationBuilder\";\nimport Communication from \"./interfaces/Communication\";\nimport DataService from \"./services/DataService\";\nimport JSZip, { JSZipObject } from 'jszip';\nimport FileService from \"./services/FileService\";\nimport Stop from \"./interfaces/Stop\";\nimport circleBlackImage from './images/circle-black.png';\nimport ewayLogo from './images/eway-logo.png';\nimport TxtOverlay from \"./map/TxtOverlay\";\nimport Pathway from \"./interfaces/Pathway\";\nimport Level from \"./interfaces/Level\";\nimport { saveAs } from 'file-saver';\n\nexport interface AppProps {}\n\ntype AppMode = \"FILE_UPLADING\" | \"STATION_SELECTION\" | \"STATION_BUILDER\";\n\ndeclare const google: any;\n\nexport interface AppState {\n\tmode: AppMode;\n\tstations: Communication | null;\n\tselectedStation: Communication | null;\n\tuntouchedFiles: {[key: string]: string};\n\tmap?: google.maps.Map;\n\tmapObjects: (google.maps.Marker | TxtOverlay)[];\n}\n\nexport default class App extends Component<AppProps, AppState> {\n\tprivate mapRef: React.RefObject<HTMLDivElement> = React.createRef();\n\tprivate requiredFiles = [\"stops.txt\", \"pathways.txt\"]; // \"levels.txt\"\n\n\tpublic constructor(props: AppProps) {\n\t\tsuper(props);\n\t\tthis.state = {\n\t\t\tmode: \"FILE_UPLADING\",\n\t\t\tstations: null,\n\t\t\tselectedStation: null,\n\t\t\tuntouchedFiles: {},\n\t\t\tmapObjects: []\n\t\t};\n\t}\n\n\tprivate handleFileChange = (event: React.ChangeEvent<HTMLInputElement>) => {\n\t\tif (event.target.files) {\n\t\t\t// Zip\n\t\t\tif (event.target.files.length === 1) {\n\t\t\t\tconst zipFile = event.target.files[0];\n\t\t\t\tthis.handleZip(zipFile);\n\t\t\t}\n\t\t\t// Separate files\n\t\t\telse {\n\t\t\t\tconst files = Array.from(event.target.files);\n\t\t\t\tthis.handleFiles(files);\n\t\t\t}\n\t\t}\n\t}\n\n\tprivate handleFiles(files: File[]) {\n\t\tconst requiredFileNames: string[] = [];\n\t\tconst untouchedFileNames: string[] = [];\n\t\tlet requiredFilePromises;\n\t\tlet untouchedFilePromises;\n\t\t\n\t\trequiredFilePromises = Promise.all(files\n\t\t\t.filter((file: File) => this.requiredFiles.indexOf(file.name) !== -1)\n\t\t\t.map((file: File) => {\n\t\t\t\trequiredFileNames.push(file.name);\n\t\t\t\treturn FileService.readUploadedFileAsText(file);\n\t\t\t}));\n\t\tuntouchedFilePromises = Promise.all(files\n\t\t\t.filter((file: File) => file.name.indexOf(\".txt\") !== -1)\n\t\t\t.filter((file: File) => this.requiredFiles.indexOf(file.name) === -1)\n\t\t\t.map((file: File) => {\n\t\t\t\tuntouchedFileNames.push(file.name);\n\t\t\t\treturn FileService.readUploadedFileAsText(file);\n\t\t\t}));\n\t\t\n\t\tif (!this.checkRequiredFiles(requiredFileNames)) {\n\t\t\treturn;\n\t\t}\n\n\t\tthis.handleFilePromises(\n\t\t\tuntouchedFilePromises, \n\t\t\trequiredFilePromises, \n\t\t\tuntouchedFileNames, \n\t\t\trequiredFileNames);\n\t}\n\n\tprivate handleZip(zipFile: Blob | File) {\n\t\tconst requiredFileNames: string[] = [];\n\t\tconst untouchedFileNames: string[] = [];\n\t\tlet requiredFilePromises;\n\t\tlet untouchedFilePromises;\n\n\t\tJSZip.loadAsync(zipFile).then((zip) => {\n\t\t\tconst files: JSZipObject[] = [];\n\t\t\tzip.forEach((relativePath, file) => {\n\t\t\t\tfiles.push(file);\n\t\t\t});\n\n\t\t\trequiredFilePromises = Promise.all(files\n\t\t\t\t.filter((file: JSZipObject) => this.requiredFiles.indexOf(file.name) !== -1)\n\t\t\t\t.map((file: JSZipObject) => {\n\t\t\t\t\trequiredFileNames.push(file.name);\n\t\t\t\t\treturn file.async(\"text\");\n\t\t\t\t}));\n\t\t\tuntouchedFilePromises = Promise.all(files\n\t\t\t\t.filter((file: JSZipObject) => file.name.indexOf(\".txt\") !== -1)\n\t\t\t\t.filter((file: JSZipObject) => this.requiredFiles.indexOf(file.name) === -1)\n\t\t\t\t.map((file: JSZipObject) => {\n\t\t\t\t\tuntouchedFileNames.push(file.name);\n\t\t\t\t\treturn file.async(\"text\");\n\t\t\t\t}));\n\t\t\t\n\t\t\tif (!this.checkRequiredFiles(requiredFileNames)) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tthis.handleFilePromises(\n\t\t\t\tuntouchedFilePromises, \n\t\t\t\trequiredFilePromises, \n\t\t\t\tuntouchedFileNames, \n\t\t\t\trequiredFileNames);\n\t\t}, function (e) {\n\t\t\talert(e.message);\n\t\t});\n\t}\n\n\tprivate handleFilePromises(\n\t\tuntouchedFilePromises: Promise<string[]>, \n\t\trequiredFilePromises: Promise<string[]>, \n\t\tuntouchedFileNames: string[], \n\t\trequiredFileNames: string[]\n\t) {\n\t\tlet communicationPacket: Communication = {\n\t\t\tstops: [],\n\t\t\tpathways: [],\n\t\t\tlevels: []\n\t\t};\n\t\tuntouchedFilePromises.then((fileContents: string[]) => {\n\t\t\tconst untouchedFiles: {[key: string]: string} = {};\n\t\t\tfileContents.forEach((fileContent, fileIndex) => {\n\t\t\t\tuntouchedFiles[untouchedFileNames[fileIndex]] = fileContent;\n\t\t\t});\n\t\t\trequiredFilePromises.then((fileContents: string[]) => {\n\t\t\t\tfileContents.forEach((content: string, index: number) => {\n\t\t\t\t\tthis.extractData(requiredFileNames[index], content, communicationPacket);\n\t\t\t\t});\n\n\t\t\t\tthis.setState({\n\t\t\t\t\tstations: communicationPacket,\n\t\t\t\t\tmode: \"STATION_SELECTION\",\n\t\t\t\t\tuntouchedFiles\n\t\t\t\t}, () => {\n\t\t\t\t\tthis.showStationsOnMap(communicationPacket.stops);\n\t\t\t\t});\n\t\t\t});\n\t\t});\n\t}\n\n\tprivate showStationsOnMap(stops: Stop[]) {\n\t\tlet map: google.maps.Map;\n\t\tif (!this.state.map) {\n\t\t\tmap = new google.maps.Map(this.mapRef.current);\n\t\t\tconsole.log(\"Google map initialized\");\n\t\t\tthis.setState({\n\t\t\t\tmap\n\t\t\t});\n\t\t}\n\t\telse {\n\t\t\tmap = this.state.map;\n\t\t}\n\n\t\tif (this.state.mapObjects.length === 0) {\n\t\t\tconst bounds = new google.maps.LatLngBounds();\n\t\t\tstops.filter(stop => stop.locationType === 1).forEach(stop => {\n\t\t\t\tconst position = {\n\t\t\t\t\tlat: stop.stopLat,\n\t\t\t\t\tlng: stop.stopLon\n\t\t\t\t};\n\t\t\t\tbounds.extend(position);\n\t\t\t\tconst marker = new google.maps.Marker({\n\t\t\t\t\tmap,\n\t\t\t\t\tposition,\n\t\t\t\t\ticon: circleBlackImage\n\t\t\t\t});\n\t\t\t\tconst label = new TxtOverlay(\n\t\t\t\t\tnew google.maps.LatLng(stop.stopLat, stop.stopLon),\n\t\t\t\t\tstop.stopName || \"\",\n\t\t\t\t\t\"station-name\",\n\t\t\t\t\tmap\n\t\t\t\t);\n\t\t\t\tgoogle.maps.event.addListener(marker, 'click', () => {\n\t\t\t\t\tthis.handleStationSelect(stop.stopId);\n\t\t\t\t});\n\t\t\t\tthis.state.mapObjects.push(marker);\n\t\t\t\tthis.state.mapObjects.push(label);\n\t\t\t});\n\t\t\tmap.fitBounds(bounds);\n\t\t}\n\t}\n\n\tprivate checkRequiredFiles(fileNames: string[]): boolean {\n\t\tconst fileMissing = this.requiredFiles.some((requiredFileName: string) => {\n\t\t\treturn fileNames.findIndex(name => name === requiredFileName) === -1;\n\t\t});\n\t\tif (fileMissing) {\n\t\t\talert(\"You missed some of the required files: [\" + this.requiredFiles.join(\", \") + \"]\");\n\t\t\treturn false;\n\t\t}\n\t\telse {\n\t\t\treturn true;\n\t\t}\n\t}\n\n\tprivate extractData(fileName: string, data: string, communicationPacket: Communication): void {\n\t\tswitch (fileName) {\n\t\t\tcase \"stops.txt\":\n\t\t\t\tcommunicationPacket.stops = DataService.fromGTFS(\n\t\t\t\t\tdata,\n\t\t\t\t\tDataService.stopFromGTFS\n\t\t\t\t);\n\t\t\t\tbreak;\n\t\t\tcase \"pathways.txt\":\n\t\t\t\tcommunicationPacket.pathways = DataService.fromGTFS(\n\t\t\t\t\tdata,\n\t\t\t\t\tDataService.pathwayFromGTFS\n\t\t\t\t);\n\t\t\t\tbreak;\n\t\t\tcase \"levels.txt\":\n\t\t\t\tcommunicationPacket.levels = DataService.fromGTFS(\n\t\t\t\t\tdata,\n\t\t\t\t\tDataService.levelFromGTFS\n\t\t\t\t);\n\t\t\t\tbreak;\n\t\t}\n\t}\n\n\tprivate handleStationSave = (data: Communication, deletedStopsIds: number[], deletedPathwaysIds: number[]) => {\n\t\tconst dataAll = this.state.stations;\n\t\tif (dataAll) {\n\t\t\tdata.stops.forEach(stop => {\n\t\t\t\tconst stopIndex = dataAll.stops.findIndex(curStop => curStop.stopId === stop.stopId);\n\t\t\t\tif (stopIndex !== -1) {\n\t\t\t\t\tdataAll.stops[stopIndex] = stop;\n\t\t\t\t}\n\t\t\t\telse {\n\t\t\t\t\tdataAll.stops.push(stop);\n\t\t\t\t}\n\t\t\t});\n\t\t\tdeletedStopsIds.forEach(stopId => {\n\t\t\t\tconst stopIndex = dataAll.stops.findIndex(curStop => curStop.stopId === stopId);\n\t\t\t\tif (stopIndex !== -1) {\n\t\t\t\t\tdataAll.stops.splice(stopIndex, 1);\n\t\t\t\t}\n\t\t\t});\n\t\t\tdata.pathways.forEach(pathway => {\n\t\t\t\tconst pathwayIndex = dataAll.pathways.findIndex(curPathway => curPathway.pathwayId === pathway.pathwayId);\n\t\t\t\tif (pathwayIndex !== -1) {\n\t\t\t\t\tdataAll.pathways[pathwayIndex] = pathway;\n\t\t\t\t}\n\t\t\t\telse {\n\t\t\t\t\tdataAll.pathways.push(pathway);\n\t\t\t\t}\n\t\t\t});\n\t\t\tdeletedPathwaysIds.forEach(pathwayId => {\n\t\t\t\tconst pathwayIndex = dataAll.pathways.findIndex(curPathway => curPathway.pathwayId === pathwayId);\n\t\t\t\tif (pathwayIndex !== -1) {\n\t\t\t\t\tdataAll.pathways.splice(pathwayIndex, 1);\n\t\t\t\t}\n\t\t\t});\n\t\t\tthis.setState({\n\t\t\t\tmode: \"STATION_SELECTION\"\n\t\t\t});\n\t\t}\n\t}\n\n\tprivate handleStationCancel = () => {\n\t\tthis.setState({\n\t\t\tmode: \"STATION_SELECTION\"\n\t\t});\n\t}\n\n\tprivate loadSampleData = () => {\n\t\tconst sampleZip = fetch(\"https://kostjerry.github.io/gtfs-station-builder/sample/gtfs-translations-pathways-vehicles-sample.zip\");\n\t\tsampleZip.then(response => {\n\t\t\tif (response.ok) {\n\t\t\t\tresponse.blob().then(sampleZipBlob => {\n\t\t\t\t\tthis.handleZip(sampleZipBlob);\n\t\t\t\t});\n\t\t\t}\n\t\t});\n\t}\n\n\tprivate handleStationSelect = (stationId: number) => {\n\t\tif (this.state.stations) {\n\t\t\tconst station = this.state.stations.stops.find(stop => stop.stopId === stationId);\n\t\t\tif (station) {\n\t\t\t\t// Filter selected station and its neighbors\n\t\t\t\tconst stationIds = this.state.stations.stops.filter(stop => {\n\t\t\t\t\treturn ((Math.abs(stop.stopLat - station.stopLat) < 0.005)\n\t\t\t\t\t\t&& (Math.abs(stop.stopLon - station.stopLon) < 0.005)\n\t\t\t\t\t\t&& (stop.locationType === 1));\n\t\t\t\t}).map(station => station.stopId);\n\t\t\t\tlet platformIds: number[] = [];\n\t\t\t\tthis.state.stations.stops.forEach(stop => {\n\t\t\t\t\tif (stationIds.includes(stop.parentStation || -1) && (stop.locationType === 0)) {\n\t\t\t\t\t\tplatformIds.push(stop.stopId);\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t\tconst stops = this.state.stations.stops.filter(stop => {\n\t\t\t\t\treturn (stationIds.includes(stop.parentStation || -1)\n\t\t\t\t\t\t|| stationIds.includes(stop.stopId)\n\t\t\t\t\t\t|| platformIds.includes(stop.parentStation || -1));\n\t\t\t\t});\n\n\t\t\t\tconst stopIds = stops.map(stop => stop.stopId);\n\t\t\t\tconst pathways = this.state.stations.pathways.filter(pathway => {\n\t\t\t\t\treturn stopIds.includes(pathway.fromStopId) ||\n\t\t\t\t\t\tstopIds.includes(pathway.toStopId);\n\t\t\t\t});\n\t\t\t\tthis.setState({\n\t\t\t\t\tselectedStation: {\n\t\t\t\t\t\tstops,\n\t\t\t\t\t\tpathways,\n\t\t\t\t\t\tlevels: this.state.stations.levels\n\t\t\t\t\t},\n\t\t\t\t\tmode: \"STATION_BUILDER\"\n\t\t\t\t});\n\t\t\t}\n\t\t}\n\t}\n\n\tprivate handleLoadFeedClick = () => {\n\t\tthis.state.mapObjects.forEach(mapObject => {\n\t\t\tmapObject.setMap(null);\n\t\t});\n\t\tthis.setState({\n\t\t\tmode: \"FILE_UPLADING\",\n\t\t\tstations: null,\n\t\t\tselectedStation: null,\n\t\t\tuntouchedFiles: {},\n\t\t\tmapObjects: []\n\t\t});\n\t}\n\n\tprivate handleDownloadClick = () => {\n\t\tif (this.state.stations) {\n\t\t\tlet stopsTxt = DataService.getStopGTFSHeader() + \"\\n\";\n\t\t\tlet pathwaysTxt = DataService.getPathwayGTFSHeader() + \"\\n\";\n\t\t\tlet levelsTxt = DataService.getLevelGTFSHeader() + \"\\n\";\n\t\t\tthis.state.stations.stops.forEach((stop: Stop) => {\n\t\t\t\tstopsTxt += DataService.stopToGTFS(stop) + \"\\n\";\n\t\t\t});\n\t\t\tthis.state.stations.pathways.forEach((pathway: Pathway) => {\n\t\t\t\tpathwaysTxt += DataService.pathwayToGTFS(pathway) + \"\\n\";\n\t\t\t});\n\t\t\tthis.state.stations.levels.forEach((level: Level) => {\n\t\t\t\tlevelsTxt += DataService.levelToGTFS(level) + \"\\n\";\n\t\t\t});\n\t\t\tconst zip = new JSZip();\n\t\t\tzip.file('stops.txt', stopsTxt);\n\t\t\tzip.file('pathways.txt', pathwaysTxt);\n\t\t\tzip.file('levels.txt', levelsTxt);\n\t\t\tfor (const fileName in this.state.untouchedFiles) {\n\t\t\t\tzip.file(fileName, this.state.untouchedFiles[fileName]);\n\t\t\t}\n\t\t\tzip.generateAsync({ type: \"blob\" }).then(function (blob) {\n\t\t\t\tsaveAs(blob, \"gtfs.zip\");\n\t\t\t});\n\t\t}\n\t}\n\n\trender() {\n\t\treturn (\n\t\t\t<div className=\"container\">\n\t\t\t\t{this.state.mode === \"FILE_UPLADING\" && (\n\t\t\t\t\t<div className=\"controls\">\n\t\t\t\t\t\t<img src={ewayLogo} alt=\"\" />\n\t\t\t\t\t\t<h2>GTFS station builder</h2>\n\t\t\t\t\t\t<div>\n\t\t\t\t\t\t\tSelect stops.txt, pathways.txt and levels.txt (you can also select a .zip containing those files):\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<input\n\t\t\t\t\t\t\ttype=\"file\"\n\t\t\t\t\t\t\tmultiple={true}\n\t\t\t\t\t\t\tonChange={this.handleFileChange}\n\t\t\t\t\t\t/>\n\t\t\t\t\t\t<br />\n\t\t\t\t\t\t<div>OR</div>\n\t\t\t\t\t\t<br />\n\t\t\t\t\t\t<button onClick={this.loadSampleData}>LOAD SAMPLE DATA</button>\n\t\t\t\t\t</div>\n\t\t\t\t)}\n\n\t\t\t\t{this.state.mode === \"STATION_SELECTION\" && this.state.stations && <div>\n\t\t\t\t\t<div className=\"panel\">\n\t\t\t\t\t\t<button className=\"download\" onClick={this.handleDownloadClick}>Download</button>\n\t\t\t\t\t\t<button className=\"load\" onClick={this.handleLoadFeedClick}>Load another feed</button>\n\t\t\t\t\t</div>\n\t\t\t\t</div>}\n\t\t\t\t<div className={\"map\" + (this.state.mode !== \"STATION_SELECTION\" ? \" hidden\" : \"\")} ref={this.mapRef}></div>\n\n\t\t\t\t{this.state.mode === \"STATION_BUILDER\" && this.state.selectedStation && (\n\t\t\t\t\t<StationBuilder\n\t\t\t\t\t\tdata={this.state.selectedStation}\n\t\t\t\t\t\tonSave={this.handleStationSave}\n\t\t\t\t\t\tonCancel={this.handleStationCancel}></StationBuilder>\n\t\t\t\t)}\n\t\t\t</div>\n\t\t);\n\t}\n}\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport StationBuilder from './components/StationBuilder';\nimport App from './App';\n\nwindow.GtfsStationBuilder = {\n    mount: (props, container) => {\n        ReactDOM.render(<StationBuilder {...props} />, container);\n    },\n    unmount: (container) => {\n        ReactDOM.unmountComponentAtNode(container);\n    }\n}\n\nconst ref = document.getElementById(\"gtfs-station-builder-root\");\nif (ref) {\n\tReactDOM.render(<App />, ref);\n}\n","module.exports = \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABgAAAAYCAYAAADgdz34AAAABmJLR0QA/wD/AP+gvaeTAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAB3RJTUUH4wgODi84vCtShwAAAMVJREFUSMftlbENwjAUREPKdLAFtEyRiFBSwgaho6Uge8Ak3oIVMgAiBdWjOYkPMorskAIpJ30pts/35G9LSZJRfyEgBxpVPgSg4aUmZG8awZsMcYLCnKAY6h4ACN2XdoSWgPOBYmCf4bUNwqM+4StlPICqT4u+AZzy9r7WGF2BLAZwU8CsAwBw/gnA41kArXzb3i0yawfgpO+dfC0wDwGU9pKBqarSHMBS3ovGx+hn6lFtfBmwiX1Na7XrrnJAOf5fRr3pCeqXbYu/ZJnBAAAAAElFTkSuQmCC\"","module.exports = \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABgAAAAYCAYAAADgdz34AAAABmJLR0QA/wD/AP+gvaeTAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAB3RJTUUH4wgODwAgvJmYiwAAAOZJREFUSMftlDEOgjAUhltGNr2Frp4CIquj3gA3Vwe5h56kt/AKHMDI4PS5PGJDGmlpWYx/0oTS9nt//sJT6q+BAOy5nguutdZKKZV5HiyAVkbhCw9x1vJR64L3Gq5lE5LQyZxbkNIyWfo4D77kHtK79HWejUArwLjyThFLY8NwKOZ73grjBdSuArE/jBHO0XWhlu5APqXAQwDLkQIA1+gCrmiANdDJ6/3kiIZw4ARc5PkgSx2wCilQOaJYALVcPMBG9t5kfg7ujF/UWPtyYBcDN8BThgGqyY0rWfOatTP69KJU8N/QG1gTxBTCzhI8AAAAAElFTkSuQmCC\"","module.exports = \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAcNJREFUeNp8kr8vQ1EUx799rVYbXiVIlPrNRFKJ+BFCYhRCSNjEwG4xmIjdYvAHGCwNq5UQkUgk2Egs0kgsLJRWOb7nvVulWif5vPfOved77n33fr34P8IGjfdCBZ4ioklDI/GTZ3JJ4uTgvxX7yCGRIrySLVJVSNxLbrWwhMygVDZRJnHYfNsyDb8Eco12ScVPsSZHOtkCr+wgLNLcLdI/KjI4LjIwJhKNyTYbtcPKNllTodc0mCVLXAEbsDHX1w8EQ0Ca5/aecQnbiNXVI3T/gGNk8AZpYvm+xYcyoV1GEcB8JAp8Mkml+f7MobnXwoJdjRH4tFwbDKvYNgl6dKIm4q5YKFLcUVMjupyLcaLVZ67JGSnXzXAVZD5+CwP+X6md+wxpgxdzz7jDhyv2eP6IviOZRML5RyceLdPgQrMTmi19Qb8ESooa5en6BmeuKfU/Ly0zrg5LnXJiBUkgcV9YnUhgnfNHboNzcpyd8hmHOXe8iKDcolIk0iHSMSRS2ynXzHXc1LyR6fz+1WQv26SBhlL3LVA0RVdGcwZS8bK5/j+hB7yatXQeuu/T/JU9Rc6qXU1C2khQT5tcGbs//iz8EmAAjZWhjml2ZOkAAAAASUVORK5CYII=\""],"sourceRoot":""}