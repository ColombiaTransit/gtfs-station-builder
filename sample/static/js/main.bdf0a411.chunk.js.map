{"version":3,"sources":["images/circle-blue.png","images/circle-black.png","images/eway-logo.png","interfaces/Stop.tsx","interfaces/Pathway.tsx","services/VisService.tsx","components/Vis.tsx","components/StopDialog.tsx","components/PathwayDialog.tsx","services/DataService.tsx","components/StationBuilder.tsx","services/FileService.tsx","map/TxtOverlay.tsx","App.tsx","index.js","images/wheelchair-accessible.png","images/wheelchair-not-possible.png","images/circle-red.png"],"names":["module","exports","LocationTypeMap","Platform","Station","Entrance/Exit","GenericNode","BoardingArea","LocationTypeOnNodeLabelMap","WheelchairBoardingMap","NoInfo","Accessible","NotPossible","LocationTypeColors","PathwayModeMap","Walkway","Stairs","MovingSidewalk","Escalator","Lift","FareGate","ExitGate","PathwayModeOnEdgeLabelMap","PathwayModeColors","VisService","from","to","hash","hashReversedDir","undefined","this","edgeRoundness","type","roundness","stop","label","stopName","locationType","stopId","platformCode","signpostedAs","parentStation","vehiclesInfo","pathway","pathwayMode","traversalTime","id","getNodeLabel","color","x","y","image","wheelchairBoarding","wheelchairAccessibleImage","wheelchairNotPossibleImage","shape","size","node","includes","stations","coefs","newStopId","toString","stopLat","latX","latK","stopLon","lonX","lonK","pathwayId","fromStopId","toStopId","highlight","arrows","isBidirectional","smooth","getEdgeSmoothVariant","getEdgeLabel","edge","newPathwayId","reversedSignpostedAs","Vis","network","handleDocumentKeydown","e","_this","props","isDialogShown","keyCode","selection","getSelection","nodes","length","edges","onItemDelete","dataToDelete","deleteSelected","_this2","container","document","getElementById","data","stops","filter","map","convertStopToNode","pathways","convertPathwayToEdge","options","borderWidth","scaling","enabled","min","max","width","selectionWidth","font","align","manipulation","initiallyActive","addNode","onStopAdd","editNode","onStopEdit","deleteNode","callback","getConnectedEdges","addEdge","onPathwayAdd","editEdge","movedEdge","body","get","updatePathwayInEdge","deleteEdge","interaction","dragView","hoverConnectedEdges","selectConnectedEdges","zoomView","physics","visPhysicsOptions","locales","gtfs","edit","del","back","addDescription","edgeDescription","editEdgeDescription","createEdgeError","deleteClusterError","editClusterError","locale","vis","Network","on","edgesDataSet","nodesDataSet","event","srcEvent","ctrlKey","position","pointer","canvas","onFareZoneAdd","forEach","add","onPathwayEdit","update","newNode","preventDefault","editEdgeMode","nodeId","onStopDragEnd","storePositions","positions","getPositions","Object","keys","onNetworkStabilized","addEventListener","removeEventListener","visOptions","getOptionsFromConfigurator","setOptions","react_default","a","createElement","Component","StopDialog","classCallCheck","possibleConstructorReturn","getPrototypeOf","call","vehicleSelectRef","React","createRef","handleCancel","onCancel","handleApply","state","onApply","objectSpread","vehicleBoardings","alert","handleParentStationChange","setState","target","value","handleLevelChange","levelId","handleLocationTypeChange","Number","platforms","handleWheelchairBoardingChange","handleStopNameChange","handlePlatformCodeChange","handleSignpostedAsChange","handleKeyDown","handleVehicleDeleteClick","vehicleKey","index","findIndex","vehicleBoarding","boardingAreaId","vehicleCategoryId","childSequence","doorId","splice","forceUpdate","handleVehicleAddClick","current","selectedVehicleProps","split","doorSequence","vehicles","vehicle","platformIds","child","children","find","door","doors","curKey","push","cloneDeep","parentStationOptions","station","key","platform","join","parentPlatformOptions","levelOptions","levels","level","levelIndex","levelName","locationTypeOptions","wheelchairBoardingOptions","wheelchairBoardingKey","vehiclesToSelect","vehicleToSelect","className","onKeyDown","onChange","disabled","cellPadding","cellSpacing","vehicleCategoryName","onClick","colSpan","ref","PathwayDialog","parseFloat","maxSlope","minWidth","isNaN","handlePathwayModeChange","handleIsBidirectionalChange","checked","handleLengthChange","replace","handleTraversalTimeChange","parseInt","handleStairCountChange","stairCount","handleMaxSlopeChange","handleMinWidthChange","handleReversedSignpostedAsChange","pathwayModeOptions","pathwayModeKey","DataService","recordFromGTFS","rows","records","header","row","cells","csvToArray","cell","cellIndex","recordGTFS","fieldName","escapeText","vehicleCategory","vehicleCoupling","parentId","childId","vehicleDoor","text","m0","m1","m2","m3","test","StationBuilder","mapRef","handleDialogCancel","handleStopAddMode","prepareNewNode","selectedStop","handleStopEditMode","handlePathwayAddMode","prepareNewEdge","selectedPathway","handlePathwayEditMode","handleStopDialogApply","newVehicleBoardings","attachVehiclesInfoToStop","stopIndex","curStop","attachStopToNode","handlePathwayDialogApply","pathwayIndex","curPathway","attachPathwayToEdge","handleItemDelete","some","deletedStopsIds","deletedPathwaysIds","handleSaveClick","oldVehicleBoardings","deletedVehicleBoardingsIds","oldVehicleBoarding","oldId","getVehicleBoardingId","newVehicleBoarding","onSave","handleGravityClick","window","confirm","barnesHut","gravitationalConstant","avoidOverlap","centralGravity","minVelocity","maxVelocity","stabilization","isLoading","handleNetworkStabilized","handleCancelClick","handleStopDragEnd","handleAllNodes","handleFareZoneAdd","node1","node2","edge1","edge2","Error","minLat","minLon","maxLat","maxLon","latGap","lonGap","mapMarkers","bounds","google","maps","LatLngBounds","extend","lat","lng","mapDiv","appendChild","fitBounds","console","log","Map","Marker","icon","circleBlueImage","circleRedImage","marker","setMap","_this3","Vis_Vis","StopDialog_StopDialog","PathwayDialog_PathwayDialog","FileService","readUploadedFileAsText","_callee","inputFile","temporaryFileReader","regenerator_default","wrap","_context","prev","next","FileReader","abrupt","Promise","resolve","reject","onerror","abort","DOMException","onload","result","readAsText","TxtOverlay","pos","pos_","text_","class_","map_","div_","onAdd","div","innerHTML","getProjection","fromLatLngToDivPixel","style","left","top","getPanes","floatPane","draw","onRemove","parentNode","removeChild","hide","visibility","show","toggle","toggleDOM","getMap","OverlayView","App","requiredFileNames","handleFileChange","files","zipFile","handleZip","Array","handleFiles","handleStationSave","dataNew","dataActual","vehicleBoardingNew","vehicleBoardingNewId","curVehicleBoarding","vehicleBoardingId","vehicleBoardingIndex","mode","handleStationCancel","loadSampleDataMsk","fetch","then","response","ok","blob","sampleZipBlob","loadSampleDataParis","handleStationSelect","stationId","stationIds","Math","abs","stopIds","selectedStation","handleLoadFeedClick","mapObjects","mapObject","untouchedFiles","handleDownloadClick","stopsTxt","getStopGTFSHeader","stopToGTFS","pathwaysTxt","getPathwayGTFSHeader","pathwayToGTFS","levelsTxt","getLevelGTFSHeader","levelToGTFS","vehicleBoardingsTxt","getVehicleBoardingGTFSHeader","vehicleBoardingToGTFS","zip","JSZip","fileName","file","generateAsync","compression","compressionOptions","saveAs","fileNames","filePromises","all","name","indexOf","checkRequiredFiles","handleFilePromises","loadAsync","relativePath","async","message","communicationPacket","fileContents","fileContent","fileIndex","extractData","minStopId","minPathwayId","extractVehicles","showStationsOnMap","vehicleCategoriesTxt","vehicleCouplingsTxt","vehicleDoorsTxt","categories","fromGTFS","vehicleCategoryFromGTFS","couplings","vehicleCouplingFromGTFS","vehicleDoorFromGTFS","categoriesHash","category","doorsHash","coupling","values","_this4","circleBlackImage","LatLng","addListener","requiredFileName","stopFromGTFS","pathwayFromGTFS","levelFromGTFS","vehicleBoardingFromGTFS","src","ewayLogo","alt","multiple","StationBuilder_StationBuilder","GtfsStationBuilder","mount","ReactDOM","render","unmount","unmountComponentAtNode","App_App"],"mappings":"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","file":"static/js/main.bdf0a411.chunk.js","sourcesContent":["module.exports = \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAe5JREFUeNqEk89LVFEUx7++Z+/hNI0TjaXFMKmN7QZi1CI0IQJ3Gi7cmhi0DMRFi9BahP4DbVq0DQQ3LXIlRpo/iCKlRQsTxvGpDCXDTNn8al7f87xPQ9/Ygc/jnvvu95x77zlXx8lWqxArei2oqiDqVUSIQX6SFTJJZk/KeJ28JXYFfpPnJOS1g3byijRBOwW09AAXbwKn6ynbARJzwPo08Ccva6fIfZJ2AwTJa9KJYCPQMYaGGwM47wd0namZO5kGvi+9BBbGKVsTzRPyVFcB+slD6CZwewKxO4Pw8eQFCotloERq+etC8zWkchxY7zmZu0zNG40foccJ09SNs61DzmHzFJXtQ8TXuF8z/gAId8lqCXBLxAHlMEUc9axB0fa+4QKDRM7Jupg71VytymQ4rnkGOrOUjgQwtSORjIA78kmAX6rOQCbpiKu8RMr2CvxkLdfd1VSAz45rLeDrRhaGVrlREkmWdPuDDEvSXO5S6bA8tpaB+cewMt7iTZYSS884mBf3I5lzy7gpV0PaJMjejw2kjKsoGiFUM0WKB0ysfUFu5hH3+gJOMmCYfPo3QZ3qsP22DYRtRO/aiN2z0dJrw3/JbeccGVHlP2ZyvaPkm8c7kNe4SPr+9xrFotIk5Aqpkdsmq+SdGh/YXwEGAGUQly2iFN0tAAAAAElFTkSuQmCC\"","module.exports = \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAABmJLR0QA/wD/AP+gvaeTAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAB3RJTUUH4wwCCwsSL+WhZAAAANpJREFUOMud0kEuBGEUBOBvfoywGENYkzBXYCduIHEAG1ew5hQuIZyB2LDEXtygV8QkI2mb19Fp3Z3xV1LJv/ir6uW9WtCPtSDM2j4MOkTHwW0M8YEXXOOuL/EA9yg7+IUrbLaJ9/GGcqnDYPn3fYNxXTzGQ09yGy/rBqeNhF6uSyXeMYEUI5UZPEsYYUcedlOcaZhpsJrwGXfOQVEZPGeIv6Nc4AjTfy7wCRuVwWI0bF7xFCfNkbZwO6f4PM7/ByNcVJVucIbHZvKgY0ETHGIPKyjwGnUv6h9/ALhFdZUDpz63AAAAAElFTkSuQmCC\"","module.exports = \"data:image/png;base64,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\"","export default interface Stop {\n\tstopId: string;\n\tstopLat: number,\n\tstopLon: number,\n\tparentStation?: string,\n    stopName?: string;\n    locationType: number;\n    wheelchairBoarding: number;\n    levelId?: string;\n    platformCode?: string;\n\tsignpostedAs?: string;\n\n\tvehiclesInfo?: string;\n}\n\nexport const LocationTypeMap: { [key: string]: number } = {\n    \"Platform\": 0,\n    \"Station\": 1,\n    \"Entrance/Exit\": 2,\n    \"GenericNode\": 3,\n    \"BoardingArea\": 4\n}\n\nexport const LocationTypeOnNodeLabelMap = [\n    \"Platform\",\n    \"Station\",\n    \"E/E\",\n    \"GN\",\n    \"BA\"\n]\n\nexport const WheelchairBoardingMap: { [key: string]: number } = {\n    \"NoInfo\": 0,\n    \"Accessible\": 1,\n    \"NotPossible\": 2\n}\n\nexport const LocationTypeColors = [\n    \"#6898ee\",\n    \"#333333\",\n    \"#f2565c\",\n    \"#999999\",\n    \"#7ecb7d\"\n]\n","export default interface Pathway {\n    pathwayId: string;\n    fromStopId: string;\n    toStopId: string;\n    pathwayMode: number;\n    isBidirectional: boolean;\n    length?: number;\n    traversalTime?: number;\n    stairCount?: number;\n    maxSlope?: number;\n    minWidth?: number;\n    signpostedAs?: string;\n    reversedSignpostedAs?: string;\n}\n\nexport const PathwayModeMap: { [key: string]: number } = {\n    \"Walkway\": 1,\n    \"Stairs\": 2,\n    \"MovingSidewalk\": 3,\n    \"Escalator\": 4,\n    \"Lift\": 5,\n    \"FareGate\": 6,\n    \"ExitGate\": 7\n}\n\nexport const PathwayModeOnEdgeLabelMap = [\n    \"\",\n    \"Walkway\", // pathway modes begin from 1\n    \"Stairs\",\n    \"MovingSidewalk\",\n    \"Escalator\",\n    \"Lift\",\n    \"FareGate\",\n    \"ExitGate\"\n]\n\nexport const PathwayModeColors = [\n    \"\",\n    \"#000000\", // pathway modes begin from 1\n    \"#6898ee\",\n    \"#888888\",\n    \"#7ecb7d\",\n    \"#f38e1a\",\n    \"#9772c4\",\n    \"#f2565c\"\n]\n","import Stop, { LocationTypeOnNodeLabelMap, LocationTypeColors, WheelchairBoardingMap, LocationTypeMap } from \"../interfaces/Stop\";\nimport Pathway, { PathwayModeOnEdgeLabelMap, PathwayModeColors, PathwayModeMap } from \"../interfaces/Pathway\";\nimport VisNode from \"../interfaces/VisNode\";\nimport VisEdge from \"../interfaces/VisEdge\";\nimport wheelchairAccessibleImage from '../images/wheelchair-accessible.png';\nimport wheelchairNotPossibleImage from '../images/wheelchair-not-possible.png';\n\n// This service defines how to draw things\n//   and take care of stop-node and pathway-edge convertion\nexport default class VisService {\n\tpublic static newStopId = -1;\n\tpublic static newPathwayId = -1;\n\tstatic edgeRoundness: {\n\t\t[key: string]: number\n\t} = {};\n\n\tstatic getEdgeSmoothVariant(from: string, to: string): { type: string, roundness: number } {\n\t\tlet hash = from + \":\" + to + \":\" + 1;\n\t\tlet hashReversedDir = from + \":\" + to + \":\" + 2;\n\t\tif (from > to) {\n\t\t\thash = to + \":\" + from + \":\" + 2;\n\t\t\thashReversedDir = to + \":\" + from + \":\" + 1;\n\t\t}\n\t\tif (this.edgeRoundness[hash] === undefined) {\n\t\t\tthis.edgeRoundness[hash] = 0.2;\n\t\t\tthis.edgeRoundness[hashReversedDir] = 0.0;\n\t\t}\n\t\telse {\n\t\t\tthis.edgeRoundness[hash] += 0.2;\n\t\t}\n\t\treturn {\n\t\t\ttype: \"curvedCW\",\n\t\t\troundness: this.edgeRoundness[hash]\n\t\t}\n\t}\n\n    static getNodeLabel(stop: Stop): string {\n        // let prefix = LocationTypeOnNodeLabelMap[stop.locationType];\n        let prefix = \"\";\n        let label =  stop.stopName ? prefix + stop.stopName + '\\n' : prefix;\n        if (stop.locationType === 0) { // Platform\n\t\t\tlabel = prefix + ' #' + stop.stopId;\n\t\t\tif (stop.platformCode) {\n                label += '\\nCode: \"' + stop.platformCode + '\"';\n            }\n            if (stop.signpostedAs) {\n                label += '\\nSignposted: \"' + stop.signpostedAs + '\"';\n            }\n\t\t}\n\t\telse if (stop.locationType === 2) { // Entrance/Exit\n\t\t\tif (stop.platformCode) {\n                label += 'Number: \"' + stop.platformCode + '\"';\n            }\n\t\t}\n\t\telse if (stop.locationType === 4) { // Boarding Area\n\t\t\tlabel += 'for #' + stop.parentStation;\n\t\t\tif (stop.vehiclesInfo) {\n\t\t\t\tlabel += '\\n' + stop.vehiclesInfo;\n\t\t\t}\n\t\t}\n        return label;\n    }\n\n    static getEdgeLabel(pathway: Pathway): string {\n        let prefix = PathwayModeOnEdgeLabelMap[pathway.pathwayMode];\n        let label = prefix;\n        if (pathway.traversalTime) {\n            label += '\\n' + pathway.traversalTime + ' s'\n        }\n        return label;\n\t}\n\n\tstatic convertStopToNode(stop: Stop): VisNode {\n        return {\n            id: stop.stopId,\n            label: VisService.getNodeLabel(stop),\n            color: LocationTypeColors[stop.locationType],\n            x: 0,\n            y: 0,\n            image: stop.wheelchairBoarding === 1 ? wheelchairAccessibleImage : stop.wheelchairBoarding === 2 ? wheelchairNotPossibleImage : \"\",\n            shape: 'circularImage',\n            size: 12,\n            stop: stop\n        }\n    }\n\n    static attachStopToNode(stop: Stop, node: VisNode): VisNode {\n        if ([3, 4].includes(stop.locationType)) {\n            stop.wheelchairBoarding = WheelchairBoardingMap.NoInfo;\n        }\n        node.label = VisService.getNodeLabel(stop);\n        node.color = LocationTypeColors[stop.locationType];\n        node.shape = 'circularImage';\n        node.size = 12;\n        node.image = stop.wheelchairBoarding === 1 ? wheelchairAccessibleImage : stop.wheelchairBoarding === 2 ? wheelchairNotPossibleImage : \"\";\n        node.stop = stop;\n        return node;\n    }\n\n    static prepareNewNode(node: VisNode, stations: Stop[], coefs:{[key: string]: number}): VisNode {\n\t\tnode.id = this.newStopId.toString();\n        node.label = \"\";\n        node.color = LocationTypeColors[LocationTypeMap.GenericNode];\n        node.shape = 'circularImage';\n\t\tnode.size = 12;\n\t\tnode.image = \"\";\n        node.stop = {\n\t\t\tstopId: this.newStopId.toString(),\n\t\t\tstopLat: ((node.y || 0) - coefs.latX) / coefs.latK,\n\t\t\tstopLon: ((node.x || 0) - coefs.lonX) / coefs.lonK,\n\t\t\tparentStation: stations[0].stopId,\n            stopName: \"\",\n            locationType: LocationTypeMap.GenericNode,\n            wheelchairBoarding: WheelchairBoardingMap.NoInfo,\n            platformCode: \"\",\n            signpostedAs: \"\"\n\t\t};\n\t\tthis.newStopId--;\n        return node;\n    }\n\n    static convertPathwayToEdge(pathway: Pathway): VisEdge {\n        return {\n            id: pathway.pathwayId,\n            from: pathway.fromStopId,\n            to: pathway.toStopId,\n            color: {\n                color: PathwayModeColors[pathway.pathwayMode],\n                highlight: PathwayModeColors[pathway.pathwayMode]\n            },\n            arrows: {\n                from: pathway.isBidirectional,\n                to: true\n\t\t\t},\n\t\t\tsmooth: this.getEdgeSmoothVariant(pathway.fromStopId, pathway.toStopId),\n            label: VisService.getEdgeLabel(pathway),\n            pathway: pathway\n\t\t};\n    }\n\n    static attachPathwayToEdge(pathway: Pathway, edge: VisEdge): VisEdge {\n        edge.color.color = PathwayModeColors[pathway.pathwayMode];\n        edge.color.highlight = PathwayModeColors[pathway.pathwayMode];\n        edge.arrows.from = pathway.isBidirectional;\n        edge.label = VisService.getEdgeLabel(pathway);\n\t\tedge.pathway = pathway;\n        return edge;\n\t}\n\t\n\tstatic updatePathwayInEdge(edge: VisEdge): VisEdge {\n\t\tedge.pathway.fromStopId = edge.from;\n\t\tedge.pathway.toStopId = edge.to;\n        return edge;\n    }\n\n    static prepareNewEdge(edge: VisEdge): VisEdge {\n\t\tedge.id = this.newPathwayId.toString();\n        edge.color = {\n            color: PathwayModeColors[PathwayModeMap.Stairs],\n            highlight: PathwayModeColors[PathwayModeMap.Stairs]\n        }\n        edge.arrows = {\n            from: true,\n            to: true\n        };\n        edge.label = '';\n        edge.pathway = {\n\t\t\tpathwayId: this.newPathwayId.toString(),\n\t\t\ttraversalTime: 10,\n            fromStopId: edge.from,\n            toStopId: edge.to,\n            pathwayMode: PathwayModeMap.Stairs,\n            isBidirectional: true,\n            signpostedAs: \"\",\n            reversedSignpostedAs: \"\"\n\t\t}\n\t\tedge.smooth = this.getEdgeSmoothVariant(edge.from, edge.to);\n\t\tthis.newPathwayId--;\n        return edge;\n    }\n}\n","import React, { Component } from 'react';\nimport vis from 'vis';\nimport 'vis/dist/vis-network.min.css';\nimport './Vis.scss';\nimport Stop from '../interfaces/Stop';\nimport VisNode from '../interfaces/VisNode';\nimport VisService from '../services/VisService';\nimport VisEdge from '../interfaces/VisEdge';\nimport Communication from '../interfaces/Communication';\nimport Pathway from '../interfaces/Pathway';\n\nexport interface VisState {\n\n}\n\nexport interface VisProps {\n\tdata: Communication,\n\tonStopAdd: (node: VisNode, callback: (node?: VisNode) => void) => void,\n\tonStopEdit: (node: VisNode, callback: (node?: VisNode) => void) => void,\n\tonItemDelete: (dataToDelete: { nodes: string[], edges: string[] }, callback: (dataToDelete?: { nodes: string[], edges: string[] }) => void) => void,\n\tonStopDragEnd: (nodeId: string, position: {x: number, y: number}, handleAllNodes?: boolean) => void,\n\tonPathwayAdd: (edge: VisEdge, callback: (edge?: VisEdge) => void) => void,\n\tonPathwayEdit: (edge: VisEdge, callback: (edge?: VisEdge) => void) => void,\n\tonFareZoneAdd: (position: {x: number, y: number}, callback: (nodes: VisNode[], edges: VisEdge[]) => void) => void,\n\tlatK: number,\n\tlatX: number,\n\tlonK: number,\n\tlonX: number,\n\tisDialogShown: boolean,\n\tvisPhysicsOptions: any,\n\tonNetworkStabilized: () => void\n}\n\nexport default class Vis extends Component<VisProps, VisState> {\n\tprivate network: any;\n\n\tpublic componentDidMount() {\n\t\tvar container = document.getElementById('vis');\n\t\tif (!container) {\n\t\t\treturn;\n\t\t}\n\n\t\t// get nodes from stops\n\t\tconst nodes: VisNode[] = this.props.data.stops.filter((stop: Stop) => {\n\t\t\treturn stop.locationType !== 1;\n\t\t}).map((stop: Stop): VisNode => {\n\t\t\tconst node = VisService.convertStopToNode(stop);\n\t\t\t// Transform stop coordinates into Vis x:y\n\t\t\tnode.x = this.props.lonK * stop.stopLon + this.props.lonX;\n\t\t\tnode.y = this.props.latK * stop.stopLat + this.props.latX;\n\t\t\treturn node;\n\t\t});\n\n\t\t// get edges from pathways\n\t\tconst edges: VisEdge[] = this.props.data.pathways.map((pathway: Pathway): VisEdge => {\n\t\t\tconst edge = VisService.convertPathwayToEdge(pathway);\n\t\t\treturn edge;\n\t\t});\n\n\t\t// configure vis\n\t\tvar options = {\n\t\t\tnodes: {\n\t\t\t\tborderWidth: 2,\n\t\t\t\tscaling: {\n\t\t\t\t\tlabel: {\n\t\t\t\t\t\tenabled: true,\n\t\t\t\t\t\tmin: 16,\n\t\t\t\t\t\tmax: 16\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t},\n\t\t\tedges: {\n\t\t\t\twidth: 1,\n\t\t\t\tselectionWidth: 2,\n\t\t\t\tsmooth: true,\n\t\t\t\tfont: {\n\t\t\t\t\talign: 'middle',\n\t\t\t\t\tsize: 10\n\t\t\t\t}\n\t\t\t},\n\t\t\tmanipulation: {\n\t\t\t\tenabled: true,\n\t\t\t\tinitiallyActive: true,\n\t\t\t\taddNode: this.props.onStopAdd,\n\t\t\t\teditNode: this.props.onStopEdit,\n\t\t\t\tdeleteNode: (dataToDelete: { nodes: string[], edges: string[] }, callback: (dataToDelete?: { nodes: string[], edges: string[] }) => void): void => {\n\t\t\t\t\tdataToDelete.edges = network.getConnectedEdges(dataToDelete.nodes[0]);\n\t\t\t\t\tthis.props.onItemDelete(dataToDelete, callback);\n\t\t\t\t},\n\t\t\t\taddEdge: this.props.onPathwayAdd,\n\t\t\t\teditEdge: (movedEdge: VisEdge, callback: (edge: VisEdge) => {}) => {\n\t\t\t\t\tlet edgesDataSet = network.body.data.edges;\n\t\t\t\t\tlet edge = edgesDataSet.get(movedEdge.id);\n\t\t\t\t\tedge.from = movedEdge.from;\n\t\t\t\t\tedge.to = movedEdge.to;\n\t\t\t\t\tedge = VisService.updatePathwayInEdge(edge);\n\t\t\t\t\tcallback(edge);\n\t\t\t\t},\n\t\t\t\tdeleteEdge: this.props.onItemDelete\n\t\t\t},\n\t\t\tinteraction: {\n\t\t\t\tdragView: true,\n\t\t\t\thoverConnectedEdges: false,\n\t\t\t\tselectConnectedEdges: false,\n\t\t\t\tzoomView: true\n\t\t\t},\n\t\t\tphysics: this.props.visPhysicsOptions,\n\t\t\tlocales: {\n\t\t\t\t'gtfs': {\n\t\t\t\t\tedit: 'Edit',\n\t\t\t\t\tdel: 'Delete selected',\n\t\t\t\t\tback: 'Back',\n\t\t\t\t\taddNode: 'Add Location',\n\t\t\t\t\taddEdge: 'Add Pathway',\n\t\t\t\t\teditNode: 'Edit Location',\n\t\t\t\t\teditEdge: 'Edit Pathway',\n\t\t\t\t\taddDescription: 'Click in an empty space to place a new location.',\n\t\t\t\t\tedgeDescription: 'Click on a location and drag the pathway to another location to connect them.',\n\t\t\t\t\teditEdgeDescription: 'Click on the control points and drag them to a location to connect to it.',\n\t\t\t\t\tcreateEdgeError: 'Cannot link pathways to a cluster.',\n\t\t\t\t\tdeleteClusterError: 'Clusters cannot be deleted.',\n\t\t\t\t\teditClusterError: 'Clusters cannot be edited.'\n\t\t\t\t}\n\t\t\t},\n\t\t\tlocale: 'gtfs'\n\t\t};\n\n\t\tlet network = new vis.Network(container, { nodes, edges }, options);\n\t\tthis.network = network;\n\n\t\tnetwork.on(\"doubleClick\", (e: any) => {\n\t\t\tconst selection = network.getSelection();\n\t\t\tconst edgesDataSet = network.body.data.edges;\n\t\t\tconst nodesDataSet = network.body.data.nodes;\n\t\t\tif (e.event.srcEvent.ctrlKey) {\n\t\t\t\tconst position = e.pointer.canvas;\n\t\t\t\tthis.props.onFareZoneAdd(position, (nodes: VisNode[], edges: VisEdge[]) => {\n\t\t\t\t\tnodes.forEach((node) => {\n\t\t\t\t\t\tnodesDataSet.add(node);\n\t\t\t\t\t});\n\t\t\t\t\tedges.forEach((edge) => {\n\t\t\t\t\t\tedgesDataSet.add(edge);\n\t\t\t\t\t});\n\t\t\t\t});\n\t\t\t}\n\t\t\telse {\n\t\t\t\tif (selection.nodes.length === 1) {\n\t\t\t\t\tnetwork.editNode();\n\t\t\t\t}\n\t\t\t\telse if (selection.edges.length === 1) {\n\t\t\t\t\tconst edge: any = edgesDataSet.get(selection.edges[0]);\n\t\t\t\t\tthis.props.onPathwayEdit(edge, (edge?: VisEdge) => {\n\t\t\t\t\t\tif (edge) {\n\t\t\t\t\t\t\tedgesDataSet.update(edge);\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t\telse {\n\t\t\t\t\tconst position = e.pointer.canvas;\n\t\t\t\t\tconst newNode: any = {\n\t\t\t\t\t\tx: position.x,\n\t\t\t\t\t\ty: position.y\n\t\t\t\t\t};\n\t\t\t\t\tthis.props.onStopAdd(newNode, (node?: VisNode) => {\n\t\t\t\t\t\tif (node) {\n\t\t\t\t\t\t\tnodesDataSet.add(node);\n\t\t\t\t\t\t}\n\t\t\t\t\t})\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\n\t\tnetwork.on(\"oncontext\", (e: any) => {\n\t\t\te.event.preventDefault();\n\t\t\tlet selection = network.getSelection();\n\t\t\tif (selection.edges.length === 1) {\n\t\t\t\tnetwork.editEdgeMode();\n\t\t\t}\n\t\t});\n\n\t\tnetwork.on(\"dragEnd\", (e: any) => {\n\t\t\tif (e.nodes.length !== 0) {\n\t\t\t\tconst nodeId = e.nodes[0];\n\t\t\t\tconst position = e.pointer.canvas;\n\t\t\t\tthis.props.onStopDragEnd(nodeId, position);\n\t\t\t}\n\t\t});\n\n\t\tnetwork.on(\"stabilized\", (e: any) => {\n\t\t\tnetwork.storePositions();\n\t\t\tconst positions = network.getPositions();\n\t\t\tconst nodeIds = Object.keys(positions);\n\t\t\tnodeIds.forEach(nodeId => {\n\t\t\t\tthis.props.onStopDragEnd(nodeId, positions[nodeId], true);\n\t\t\t});\n\t\t\tthis.props.onNetworkStabilized();\n\t\t})\n\n\t\tdocument.addEventListener('keydown', this.handleDocumentKeydown);\n\t}\n\n\tpublic componentWillUnmount() {\n\t\tdocument.removeEventListener('keydown', this.handleDocumentKeydown);\n\t} \n\n\tprivate handleDocumentKeydown = (e: KeyboardEvent) => {\n\t\tif (!this.props.isDialogShown && e.keyCode === 8) {\n\t\t\tconst selection = this.network.getSelection();\n\t\t\tif ((selection.nodes.length === 1) || (selection.edges.length === 1)) {\n\t\t\t\tthis.props.onItemDelete(selection, (dataToDelete?: { nodes: string[], edges: string[] }) => {\n\t\t\t\t\tif (dataToDelete) {\n\t\t\t\t\t\tthis.network.deleteSelected();\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t}\n\t\t}\n\t}\n\n\trender() {\n\t\tif (this.network) {\n\t\t\tconst visOptions = this.network.getOptionsFromConfigurator();\n\t\t\tvisOptions.physics = this.props.visPhysicsOptions;\n\t\t\tthis.network.setOptions(visOptions);\n\t\t}\n\n\t\treturn (\n\t\t\t<div id=\"vis\"></div>\n\t\t);\n\t}\n}\n","import React, { Component, RefObject } from \"react\";\nimport \"./StopDialog.scss\";\nimport Stop, {\n\tLocationTypeMap,\n\tWheelchairBoardingMap,\n\tLocationTypeOnNodeLabelMap\n} from \"../interfaces/Stop\";\nimport Level from \"../interfaces/Level\";\nimport VehicleBoarding from \"../interfaces/VehicleBoarding\";\nimport Vehicle from \"../interfaces/Vehicle\";\nimport cloneDeep from 'lodash/cloneDeep';\n\nexport interface StopDialogProps {\n\tstop: Stop;\n\tstations: Stop[];\n\tplatforms: Stop[];\n\tlevels: Level[];\n\tvehicles: Vehicle[];\n\tvehicleBoardings: VehicleBoarding[];\n\tonCancel: () => void;\n\tonApply: (stop: Stop, vehicleBoardings: VehicleBoarding[]) => void;\n}\n\nexport interface StopDialogState {\n\tparentStation: string;\n\tstopName?: string;\n\tlocationType: number;\n\twheelchairBoarding: number;\n\tplatformCode?: string;\n\tsignpostedAs?: string;\n\tlevelId?: string;\n\tvehicleBoardings: VehicleBoarding[];\n}\n\nexport default class StopDialog extends Component<StopDialogProps, StopDialogState> {\n\tprivate vehicleSelectRef: RefObject<HTMLSelectElement> = React.createRef();\n\n\tconstructor(props: StopDialogProps) {\n\t\tsuper(props);\n\t\tthis.state = {\n\t\t\tparentStation: props.stop.parentStation || '-1',\n\t\t\tlevelId: props.stop.levelId || '-1',\n\t\t\tstopName: props.stop.stopName,\n\t\t\tlocationType: props.stop.locationType,\n\t\t\twheelchairBoarding: props.stop.wheelchairBoarding,\n\t\t\tplatformCode: props.stop.platformCode,\n\t\t\tsignpostedAs: props.stop.signpostedAs,\n\t\t\tvehicleBoardings: cloneDeep(props.vehicleBoardings)\n\t\t};\n\t}\n\n\tprivate handleCancel = () => {\n\t\tthis.props.onCancel();\n\t}\n\n\tprivate handleApply = () => {\n\t\t// Validate\n\t\tif ([0, 1, 2].includes(this.state.locationType) && !this.state.stopName) {\n\t\t\talert(\"Selected location type must have a name\");\n\t\t\treturn;\n\t\t}\n\n\t\tthis.props.onApply({\n\t\t\t...this.props.stop,\n\t\t\t...this.state\n\t\t}, this.state.vehicleBoardings);\n\t}\n\n\tprivate handleParentStationChange = (\n\t\tevent: React.ChangeEvent<HTMLSelectElement>\n\t) => {\n\t\tthis.setState({\n\t\t\tparentStation: event.target.value\n\t\t});\n\t}\n\n\tprivate handleLevelChange = (event: React.ChangeEvent<HTMLSelectElement>) => {\n\t\tthis.setState({\n\t\t\tlevelId: event.target.value\n\t\t});\n\t}\n\n\tprivate handleLocationTypeChange = (\n\t\tevent: React.ChangeEvent<HTMLSelectElement>\n\t) => {\n\t\tlet parentStation = '-1';\n\t\tif (Number(event.target.value) === 3) { // Station for Generic Node\n\t\t\tparentStation = this.props.stations[0].stopId.toString();\n\t\t}\n\t\telse if (Number(event.target.value) === 4) { // Platform for Boarding Area\n\t\t\tparentStation = this.props.platforms[0].stopId.toString();\n\t\t}\n\t\tthis.setState({\n\t\t\tlocationType: Number(event.target.value),\n\t\t\tparentStation\n\t\t});\n\t}\n\n\tprivate handleWheelchairBoardingChange = (\n\t\tevent: React.ChangeEvent<HTMLSelectElement>\n\t) => {\n\t\tthis.setState({\n\t\t\twheelchairBoarding: Number(event.target.value)\n\t\t});\n\t}\n\n\tprivate handleStopNameChange = (\n\t\tevent: React.ChangeEvent<HTMLInputElement>\n\t) => {\n\t\tthis.setState({\n\t\t\tstopName: event.target.value\n\t\t});\n\t}\n\n\tprivate handlePlatformCodeChange = (\n\t\tevent: React.ChangeEvent<HTMLInputElement>\n\t) => {\n\t\tthis.setState({\n\t\t\tplatformCode: event.target.value\n\t\t});\n\t}\n\n\tprivate handleSignpostedAsChange = (\n\t\tevent: React.ChangeEvent<HTMLInputElement>\n\t) => {\n\t\tthis.setState({\n\t\t\tsignpostedAs: event.target.value\n\t\t});\n\t}\n\n\tprivate handleKeyDown = (event: React.KeyboardEvent<HTMLDivElement>) => {\n\t\tif (event.keyCode === 13) {\n\t\t\tthis.handleApply();\n\t\t}\n\t}\n\n\tprivate handleVehicleDeleteClick = (vehicleKey: string) => {\n\t\tconst index = this.state.vehicleBoardings.findIndex(vehicleBoarding => {\n\t\t\tconst key = vehicleBoarding.boardingAreaId + \"+\" + \n\t\t\t\t\t\tvehicleBoarding.vehicleCategoryId + \"+\" + \n\t\t\t\t\t\tvehicleBoarding.childSequence + \"+\" + \n\t\t\t\t\t\tvehicleBoarding.doorId;\n\t\t\treturn key === vehicleKey;\n\t\t});\n\t\tif (index !== -1) {\n\t\t\tthis.state.vehicleBoardings.splice(index, 1);\n\t\t\tthis.forceUpdate();\n\t\t}\n\t}\n\n\tprivate handleVehicleAddClick = () => {\n\t\tif (this.vehicleSelectRef.current) {\n\t\t\tconst selectedVehicleKey = this.vehicleSelectRef.current.value;\n\n\t\t\tconst selectedVehicleProps = selectedVehicleKey.split(\"+\");\n\t\t\tconst boardingAreaId = selectedVehicleProps[0];\n\t\t\tconst childSequence = Number(selectedVehicleProps[1]);\n\t\t\tconst doorSequence = Number(selectedVehicleProps[2]);\n\t\t\tthis.props.vehicles\n\t\t\t\t.filter(vehicle => {\n\t\t\t\t\tif (vehicle.platformIds) {\n\t\t\t\t\t\tif (vehicle.platformIds.includes(this.state.parentStation)) {\n\t\t\t\t\t\t\treturn true;\n\t\t\t\t\t\t}\n\t\t\t\t\t\telse {\n\t\t\t\t\t\t\treturn false;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\telse {\n\t\t\t\t\t\treturn true;\n\t\t\t\t\t}\n\t\t\t\t}).forEach(vehicle => {\n\t\t\t\t\tconst child = vehicle.children.find(child => child.childSequence === childSequence);\n\t\t\t\t\tif (child) {\n\t\t\t\t\t\tconst door = child.doors.find(door => door.doorSequence === doorSequence);\n\t\t\t\t\t\tif (door) {\n\t\t\t\t\t\t\tconst curKey = boardingAreaId + \"+\" + childSequence + \"+\" + door.doorId;\n\t\t\t\t\t\t\tconst index = this.state.vehicleBoardings.findIndex(vehicleBoarding => {\n\t\t\t\t\t\t\t\tconst key = vehicleBoarding.boardingAreaId + \"+\" + \n\t\t\t\t\t\t\t\t\t\t\tvehicleBoarding.childSequence + \"+\" + \n\t\t\t\t\t\t\t\t\t\t\tvehicleBoarding.doorId;\n\t\t\t\t\t\t\t\treturn key === curKey;\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\tif (index === -1) {\n\t\t\t\t\t\t\t\tthis.state.vehicleBoardings.push({\n\t\t\t\t\t\t\t\t\tboardingAreaId,\n\t\t\t\t\t\t\t\t\tvehicleCategoryId: vehicle.vehicleCategoryId,\n\t\t\t\t\t\t\t\t\tchildSequence,\n\t\t\t\t\t\t\t\t\tdoorId: door.doorId\n\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\tthis.forceUpdate();\n\t\t}\n\t}\n\n\trender() {\n\t\tconst parentStationOptions: JSX.Element[] = [];\n\t\tthis.props.stations.forEach(station => {\n\t\t\tparentStationOptions.push(\n\t\t\t\t<option key={station.stopId} value={station.stopId}>\n\t\t\t\t\t{station.stopName} (platf. {this.props.platforms\n\t\t\t\t\t\t\t\t\t\t\t.filter(platform => platform.parentStation === station.stopId)\n\t\t\t\t\t\t\t\t\t\t\t.map(platform => \"#\" + platform.stopId)\n\t\t\t\t\t\t\t\t\t\t\t.join(\", \")})\n\t\t\t\t</option>\n\t\t\t);\n\t\t});\n\n\t\tconst parentPlatformOptions: JSX.Element[] = [];\n\t\tthis.props.platforms.forEach(platform => {\n\t\t\tparentPlatformOptions.push(\n\t\t\t\t<option key={platform.stopId} value={platform.stopId}>\n\t\t\t\t\t{platform.stopId}. {platform.stopName}\n\t\t\t\t</option>\n\t\t\t);\n\t\t});\n\n\t\tconst levelOptions: JSX.Element[] = [];\n\t\tlevelOptions.push(\n\t\t\t<option key={-1} value={-1}>\n\t\t\t\tNone\n\t\t\t</option>\n\t\t);\n\t\tthis.props.levels.forEach(level => {\n\t\t\tlevelOptions.push(\n\t\t\t\t<option key={level.levelId} value={level.levelId}>\n\t\t\t\t\t{level.levelIndex} {level.levelName}\n\t\t\t\t</option>\n\t\t\t);\n\t\t});\n\n\t\tconst locationTypeOptions: JSX.Element[] = [];\n\t\tfor (const locationType in LocationTypeMap) {\n\t\t\tif ([\"Platform\", \"Station\", \"Entrance/Exit\"].includes(locationType)) {\n\t\t\t\tcontinue;\n\t\t\t}\n\t\t\tlocationTypeOptions.push(\n\t\t\t\t<option key={locationType} value={LocationTypeMap[locationType]}>\n\t\t\t\t\t{locationType}\n\t\t\t\t</option>\n\t\t\t);\n\t\t}\n\n\t\tconst wheelchairBoardingOptions: JSX.Element[] = [];\n\t\tfor (const wheelchairBoardingKey in WheelchairBoardingMap) {\n\t\t\twheelchairBoardingOptions.push(\n\t\t\t\t<option\n\t\t\t\t\tkey={wheelchairBoardingKey}\n\t\t\t\t\tvalue={WheelchairBoardingMap[wheelchairBoardingKey]}>\n\t\t\t\t\t{wheelchairBoardingKey}\n\t\t\t\t</option>\n\t\t\t);\n\t\t}\n\n\t\tconst vehiclesToSelect = this.props.vehicles\n\t\t\t\t\t\t\t.filter(vehicle => {\n\t\t\t\t\t\t\t\tif (vehicle.platformIds) {\n\t\t\t\t\t\t\t\t\tif (vehicle.platformIds.includes(this.state.parentStation)) {\n\t\t\t\t\t\t\t\t\t\treturn true;\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\telse {\n\t\t\t\t\t\t\t\t\t\treturn false;\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\telse {\n\t\t\t\t\t\t\t\t\treturn true;\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t});\n\t\tconst vehicleToSelect: Vehicle | null = vehiclesToSelect ? vehiclesToSelect[0] : null;\n\n\t\treturn (\n\t\t\t<div className={\"stop-dialog\" + ((this.state.locationType === 4) && this.props.vehicles && (this.props.vehicles.length !== 0) ? \" extended\" : \"\")} onKeyDown={this.handleKeyDown}>\n\t\t\t\t<div className=\"header\">Location properties</div>\n\t\t\t\t<div className=\"content\">\n\t\t\t\t\t<div className=\"left\">\n\t\t\t\t\t\t<div>ID: {this.props.stop.stopId}</div>\n\t\t\t\t\t\t<div>\n\t\t\t\t\t\t\t{(this.state.locationType === 4) ? <div>\n\t\t\t\t\t\t\t\tParent platform:{\" \"}\n\t\t\t\t\t\t\t\t<select\n\t\t\t\t\t\t\t\t\tvalue={this.state.parentStation}\n\t\t\t\t\t\t\t\t\tonChange={this.handleParentStationChange}>\n\t\t\t\t\t\t\t\t\t{parentPlatformOptions}\n\t\t\t\t\t\t\t\t</select>\n\t\t\t\t\t\t\t</div> : <div>\n\t\t\t\t\t\t\t\tParent station:{\" \"}\n\t\t\t\t\t\t\t\t<select\n\t\t\t\t\t\t\t\t\tvalue={this.state.parentStation}\n\t\t\t\t\t\t\t\t\tonChange={this.handleParentStationChange}>\n\t\t\t\t\t\t\t\t\t{parentStationOptions}\n\t\t\t\t\t\t\t\t</select>\n\t\t\t\t\t\t\t</div>}\n\t\t\t\t\t\t\t<div>\n\t\t\t\t\t\t\t\tLevel:{\" \"}\n\t\t\t\t\t\t\t\t<select\n\t\t\t\t\t\t\t\t\tvalue={this.state.levelId}\n\t\t\t\t\t\t\t\t\tonChange={this.handleLevelChange}>\n\t\t\t\t\t\t\t\t\t{levelOptions}\n\t\t\t\t\t\t\t\t</select>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t{[0, 2].includes(this.state.locationType) && (\n\t\t\t\t\t\t\t\t<div>\n\t\t\t\t\t\t\t\t\tLocation type: {LocationTypeOnNodeLabelMap[this.state.locationType]}\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t{[3, 4].includes(this.state.locationType) && (\n\t\t\t\t\t\t\t\t<div>\n\t\t\t\t\t\t\t\t\tLocation type:{\" \"}\n\t\t\t\t\t\t\t\t\t<select\n\t\t\t\t\t\t\t\t\t\tvalue={this.state.locationType}\n\t\t\t\t\t\t\t\t\t\tonChange={this.handleLocationTypeChange}>\n\t\t\t\t\t\t\t\t\t\t{locationTypeOptions}\n\t\t\t\t\t\t\t\t\t</select>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t<div>\n\t\t\t\t\t\t\t\tName:{\" \"}\n\t\t\t\t\t\t\t\t<input\n\t\t\t\t\t\t\t\t\tdisabled={![3, 4].includes(this.state.locationType)}\n\t\t\t\t\t\t\t\t\ttype=\"text\"\n\t\t\t\t\t\t\t\t\tvalue={this.state.stopName || \"\"}\n\t\t\t\t\t\t\t\t\tonChange={this.handleStopNameChange}\n\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t{[0, 2].includes(this.state.locationType) && (\n\t\t\t\t\t\t\t\t<div>\n\t\t\t\t\t\t\t\t\tPlatform code:{\" \"}\n\t\t\t\t\t\t\t\t\t<input\n\t\t\t\t\t\t\t\t\t\ttype=\"text\"\n\t\t\t\t\t\t\t\t\t\tvalue={this.state.platformCode || \"\"}\n\t\t\t\t\t\t\t\t\t\tonChange={this.handlePlatformCodeChange}\n\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t{[0].includes(this.state.locationType) && (\n\t\t\t\t\t\t\t\t<div>\n\t\t\t\t\t\t\t\t\tSignposted as:{\" \"}\n\t\t\t\t\t\t\t\t\t<input\n\t\t\t\t\t\t\t\t\t\ttype=\"text\"\n\t\t\t\t\t\t\t\t\t\tvalue={this.state.signpostedAs || \"\"}\n\t\t\t\t\t\t\t\t\t\tonChange={this.handleSignpostedAsChange}\n\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t{[0, 2].includes(this.state.locationType) && (\n\t\t\t\t\t\t\t\t<div>\n\t\t\t\t\t\t\t\t\tWheelchair boarding:{\" \"}\n\t\t\t\t\t\t\t\t\t<select\n\t\t\t\t\t\t\t\t\t\tvalue={this.state.wheelchairBoarding}\n\t\t\t\t\t\t\t\t\t\tonChange={this.handleWheelchairBoardingChange}>\n\t\t\t\t\t\t\t\t\t\t{wheelchairBoardingOptions}\n\t\t\t\t\t\t\t\t\t</select>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t\t{(this.state.locationType === 4) && this.props.vehicles && (this.props.vehicles.length !== 0) && \n\t\t\t\t\t<div className=\"right\">\n\t\t\t\t\t\t<table cellPadding=\"0\" cellSpacing=\"0\">\n\t\t\t\t\t\t\t<tbody>\n\t\t\t\t\t\t\t<tr className=\"header\">\n\t\t\t\t\t\t\t\t<td>Vehicle</td>\n\t\t\t\t\t\t\t\t<td>Child</td>\n\t\t\t\t\t\t\t\t<td>Door</td>\n\t\t\t\t\t\t\t\t<td></td>\n\t\t\t\t\t\t\t</tr>\n\t\t\t\t\t\t\t{this.props.vehicles && (this.props.vehicles.length !== 0) && this.state.vehicleBoardings &&\n\t\t\t\t\t\t\t\tthis.state.vehicleBoardings\n\t\t\t\t\t\t\t\t.filter(vehicleBoarding => vehicleBoarding.boardingAreaId === this.props.stop.stopId)\n\t\t\t\t\t\t\t\t.map(vehicleBoarding => {\n\t\t\t\t\t\t\t\t\tconst key = vehicleBoarding.boardingAreaId + \"+\" + \n\t\t\t\t\t\t\t\t\t\t\t\tvehicleBoarding.vehicleCategoryId + \"+\" + \n\t\t\t\t\t\t\t\t\t\t\t\tvehicleBoarding.childSequence + \"+\" + \n\t\t\t\t\t\t\t\t\t\t\t\tvehicleBoarding.doorId;\n\t\t\t\t\t\t\t\t\tconst vehicle = this.props.vehicles.find(vehicle => {\n\t\t\t\t\t\t\t\t\t\treturn vehicle.vehicleCategoryId === vehicleBoarding.vehicleCategoryId;\n\t\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t\t\tif (vehicle) {\n\t\t\t\t\t\t\t\t\t\tconst child = vehicle.children.find(child => child.childSequence === vehicleBoarding.childSequence);\n\t\t\t\t\t\t\t\t\t\tif (child) {\n\t\t\t\t\t\t\t\t\t\t\tconst door = child.doors.find(door => vehicleBoarding.doorId === door.doorId);\n\t\t\t\t\t\t\t\t\t\t\tif (door) {\n\t\t\t\t\t\t\t\t\t\t\t\treturn (<tr key={key}>\n\t\t\t\t\t\t\t\t\t\t\t\t\t<td>{vehicle.vehicleCategoryName}</td>\n\t\t\t\t\t\t\t\t\t\t\t\t\t<td>{child.childSequence}</td>\n\t\t\t\t\t\t\t\t\t\t\t\t\t<td>{door.doorSequence}</td>\n\t\t\t\t\t\t\t\t\t\t\t\t\t<td>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t<button onClick={() => { this.handleVehicleDeleteClick(key); }}>Delete</button>\n\t\t\t\t\t\t\t\t\t\t\t\t\t</td>\n\t\t\t\t\t\t\t\t\t\t\t\t</tr>);\n\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\treturn null;\n\t\t\t\t\t\t\t\t})\n\t\t\t\t\t\t\t\t.filter(vehicleBoarding => vehicleBoarding !== null)\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t<tr>\n\t\t\t\t\t\t\t\t<td colSpan={3}>\n\t\t\t\t\t\t\t\t\t<select ref={this.vehicleSelectRef}>\n\t\t\t\t\t\t\t\t\t\t{vehicleToSelect && vehicleToSelect.children.map(child =>\n\t\t\t\t\t\t\t\t\t\t\tchild.doors.map(door => {\n\t\t\t\t\t\t\t\t\t\t\t\tconst key = this.props.stop.stopId + \"+\" + child.childSequence + \"+\" + door.doorSequence;\n\t\t\t\t\t\t\t\t\t\t\t\treturn (<option key={key} value={key}>\n\t\t\t\t\t\t\t\t\t\t\t\t\t{child.childSequence} - {door.doorSequence}\n\t\t\t\t\t\t\t\t\t\t\t\t</option>);\n\t\t\t\t\t\t\t\t\t\t\t})\n\t\t\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t\t\t</select>\n\t\t\t\t\t\t\t\t</td>\n\t\t\t\t\t\t\t\t<td>\n\t\t\t\t\t\t\t\t\t<button onClick={this.handleVehicleAddClick}>Add</button>\n\t\t\t\t\t\t\t\t</td>\n\t\t\t\t\t\t\t</tr>\n\t\t\t\t\t\t\t</tbody>\n\t\t\t\t\t\t</table>\n\t\t\t\t\t</div>}\n\t\t\t\t</div>\n\t\t\t\t<div className=\"footer\">\n\t\t\t\t\t<button onClick={this.handleCancel}>Cancel</button>\n\t\t\t\t\t<button onClick={this.handleApply}>Apply</button>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t);\n\t}\n}\n","import React, { Component } from 'react';\nimport './PathwayDialog.scss';\nimport Pathway, { PathwayModeMap } from '../interfaces/Pathway';\n\nexport interface PathwayDialogProps {\n\tpathway: Pathway,\n\tonCancel: () => void,\n\tonApply: (pathway: Pathway) => void\n}\n\nexport interface PathwayDialogState {\n\tpathwayMode: number;\n\tisBidirectional: boolean;\n\tlength?: string;\n\ttraversalTime?: number;\n\tstairCount?: number;\n\tmaxSlope?: string;\n\tminWidth?: string;\n\tsignpostedAs?: string;\n\treversedSignpostedAs?: string;\n}\n\nexport default class PathwayDialog extends Component<PathwayDialogProps, PathwayDialogState> {\n\tconstructor(props: PathwayDialogProps) {\n\t\tsuper(props);\n\t\tthis.state = {\n\t\t\tpathwayMode: props.pathway.pathwayMode,\n\t\t\tisBidirectional: props.pathway.isBidirectional,\n\t\t\tlength: props.pathway.length ? props.pathway.length.toString() : undefined,\n\t\t\ttraversalTime: props.pathway.traversalTime,\n\t\t\tstairCount: props.pathway.stairCount,\n\t\t\tmaxSlope: props.pathway.maxSlope ? props.pathway.maxSlope.toString() : undefined,\n\t\t\tminWidth: props.pathway.minWidth ? props.pathway.minWidth.toString() : undefined,\n\t\t\tsignpostedAs: props.pathway.signpostedAs,\n\t\t\treversedSignpostedAs: props.pathway.reversedSignpostedAs\n\t\t}\n\t}\n\n\tprivate handleCancel = () => {\n\t\tthis.props.onCancel();\n\t}\n\n\tprivate handleApply = () => {\n\t\tif (!this.state.traversalTime) {\n\t\t\talert(\"Traversal time is required\");\n\t\t\treturn;\n\t\t}\n\t\tconst length = parseFloat(this.state.length || \"\");\n\t\tconst maxSlope = parseFloat(this.state.maxSlope || \"\");\n\t\tconst minWidth = parseFloat(this.state.minWidth || \"\");\n\t\tthis.props.onApply({\n\t\t\t...this.props.pathway,\n\t\t\t...this.state,\n\t\t\t...{\n\t\t\t\tlength: !isNaN(length) ? length : undefined,\n\t\t\t\tmaxSlope: !isNaN(maxSlope) ? maxSlope : undefined,\n\t\t\t\tminWidth: !isNaN(minWidth) ? minWidth : undefined\n\t\t\t}\n\t\t});\n\t}\n\n\tprivate handlePathwayModeChange = (event: React.ChangeEvent<HTMLSelectElement>) => {\n\t\tconst state = {} as PathwayDialogState;\n\t\tif ([6, 7].includes(Number(event.target.value))) { // Entrance/Exit\n\t\t\tstate.isBidirectional = false;\n\t\t}\n\t\tstate.pathwayMode = Number(event.target.value);\n\t\tthis.setState(state);\n\t}\n\n\tprivate handleIsBidirectionalChange = (event: React.ChangeEvent<HTMLInputElement>) => {\n\t\tthis.setState({\n\t\t\tisBidirectional: event.target.checked\n\t\t});\n\t}\n\n\tprivate handleLengthChange = (event: React.ChangeEvent<HTMLInputElement>) => {\n\t\tthis.setState({\n\t\t\tlength: event.target.value.replace(\",\", \".\").replace(/[^\\d.]/i, \"\")\n\t\t});\n\t}\n\n\tprivate handleTraversalTimeChange = (event: React.ChangeEvent<HTMLInputElement>) => {\n\t\tthis.setState({\n\t\t\ttraversalTime: parseInt(event.target.value)\n\t\t});\n\t}\n\n\tprivate handleStairCountChange = (event: React.ChangeEvent<HTMLInputElement>) => {\n\t\tthis.setState({\n\t\t\tstairCount: parseInt(event.target.value)\n\t\t});\n\t}\n\n\tprivate handleMaxSlopeChange = (event: React.ChangeEvent<HTMLInputElement>) => {\n\t\tthis.setState({\n\t\t\tmaxSlope: event.target.value.replace(\",\", \".\").replace(/[^\\d.]/i, \"\")\n\t\t});\n\t}\n\n\tprivate handleMinWidthChange = (event: React.ChangeEvent<HTMLInputElement>) => {\n\t\tthis.setState({\n\t\t\tminWidth: event.target.value.replace(\",\", \".\").replace(/[^\\d.]/i, \"\")\n\t\t});\n\t}\n\n\tprivate handleSignpostedAsChange = (event: React.ChangeEvent<HTMLInputElement>) => {\n\t\tthis.setState({\n\t\t\tsignpostedAs: event.target.value\n\t\t});\n\t}\n\n\tprivate handleReversedSignpostedAsChange = (event: React.ChangeEvent<HTMLInputElement>) => {\n\t\tthis.setState({\n\t\t\treversedSignpostedAs: event.target.value\n\t\t});\n\t}\n\n\tprivate handleKeyDown = (event: React.KeyboardEvent<HTMLDivElement>) => {\n\t\tif (event.keyCode === 13) {\n\t\t\tthis.handleApply();\n\t\t}\n\t}\n\n\trender() {\n\t\tconst pathwayModeOptions: JSX.Element[] = [];\n\t\tfor (const pathwayModeKey in PathwayModeMap) {\n\t\t\tpathwayModeOptions.push(\n\t\t\t\t<option key={pathwayModeKey} value={PathwayModeMap[pathwayModeKey]}>{pathwayModeKey}</option>\n\t\t\t);\n\t\t}\n\n\t\treturn (\n\t\t\t<div className=\"pathway-dialog\" onKeyDown={this.handleKeyDown}>\n\t\t\t\t<div className=\"header\">Pathway properties</div>\n\t\t\t\t<div className=\"content\">\n\t\t\t\t\t<div>\n\t\t\t\t\t\tID: {this.props.pathway.pathwayId}\n\t\t\t\t\t</div>\n\t\t\t\t\t<div>\n\t\t\t\t\t\t<div>\n\t\t\t\t\t\t\tLocation type:\n              <select value={this.state.pathwayMode} onChange={this.handlePathwayModeChange}>\n\t\t\t\t\t\t\t\t{pathwayModeOptions}\n\t\t\t\t\t\t\t</select>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div>\n\t\t\t\t\t\t\t<label>\n\t\t\t\t\t\t\t\tIs bidirectional:\n                <input type=\"checkbox\" checked={this.state.isBidirectional} onChange={this.handleIsBidirectionalChange} />\n\t\t\t\t\t\t\t</label>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div>\n\t\t\t\t\t\t\tLength: <input type=\"text\" value={this.state.length || \"\"} onChange={this.handleLengthChange} /> meters\n            </div>\n\t\t\t\t\t\t<div>\n\t\t\t\t\t\t\tTraversal time: <input type=\"text\" value={this.state.traversalTime || \"\"} onChange={this.handleTraversalTimeChange} /> seconds\n            </div>\n\t\t\t\t\t\t<div>\n\t\t\t\t\t\t\tStair count: <input type=\"text\" value={this.state.stairCount || \"\"} onChange={this.handleStairCountChange} />\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div>\n\t\t\t\t\t\t\tMax slope: <input type=\"text\" value={this.state.maxSlope || \"\"} onChange={this.handleMaxSlopeChange} />\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div>\n\t\t\t\t\t\t\tMin width: <input type=\"text\" value={this.state.minWidth || \"\"} onChange={this.handleMinWidthChange} /> meters\n            </div>\n\t\t\t\t\t\t<div>\n\t\t\t\t\t\t\tSignposted as: <input type=\"text\" value={this.state.signpostedAs || \"\"} onChange={this.handleSignpostedAsChange} />\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div>\n\t\t\t\t\t\t\tReversed signposted as: <input type=\"text\" value={this.state.reversedSignpostedAs || \"\"} onChange={this.handleReversedSignpostedAsChange} />\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t\t<div className=\"footer\">\n\t\t\t\t\t<button onClick={this.handleCancel}>Cancel</button>\n\t\t\t\t\t<button onClick={this.handleApply}>Apply</button>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t);\n\t}\n}\n","import Stop from \"../interfaces/Stop\";\nimport Pathway from \"../interfaces/Pathway\";\nimport Level from \"../interfaces/Level\";\nimport VehicleBoarding from \"../interfaces/VehicleBoarding\";\nimport VehicleCategory from \"../interfaces/VehicleCategory\";\nimport VehicleCoupling from \"../interfaces/VehicleCoupling\";\nimport VehicleDoor from \"../interfaces/VehicleDoor\";\n\n/* GTFS to objects conversion and vise versa */\nexport default class DataService {\n    static fromGTFS<T>(data: string, recordFromGTFS: (record: {[key: string]: string}) => T): T[] {\n        const rows: string[] = data.split(\"\\n\");\n        let records: T[] = [];\n        let header: string[] = [];\n        rows.forEach((row: string) => {\n\t\t\tif (row) {\n\t\t\t\tconst cells = this.csvToArray(row);\n\t\t\t\t// header\n\t\t\t\tif (header.length === 0) {\n\t\t\t\t\tcells.forEach((cell: string, cellIndex: number) => {\n\t\t\t\t\t\theader[cellIndex] = cell;\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t\t// data\n\t\t\t\telse {\n\t\t\t\t\tlet recordGTFS: {[key: string]: string} = {};\n\t\t\t\t\tcells.forEach((cell: string, cellIndex: number) => {\n\t\t\t\t\t\tif (cell !== '') {\n\t\t\t\t\t\t\tconst fieldName = header[cellIndex];\n\t\t\t\t\t\t\trecordGTFS[fieldName] = cell;\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\n\t\t\t\t\trecords.push(recordFromGTFS(recordGTFS));\n\t\t\t\t}\n\t\t\t}\n        });\n        return records;\n    }\n\n    static stopFromGTFS(stop: {[key: string]: string}): Stop {\n        return {\n\t\t\tstopId: stop['stop_id'],\n\t\t\tstopLat: stop['stop_lat'] ? Number(stop['stop_lat']) : -1,\n\t\t\tstopLon: stop['stop_lon'] ? Number(stop['stop_lon']) : -1,\n\t\t\tparentStation: stop['parent_station'] || undefined,\n            stopName: stop['stop_name'],\n            locationType: Number(stop['location_type']),\n            wheelchairBoarding: stop['wheelchair_boarding'] !== '' ? Number(stop['wheelchair_boarding']) : 0,\n            levelId: stop['level_id'] || undefined,\n            platformCode: stop['platform_code'],\n            signpostedAs: stop['signposted_as']\n        };\n    }\n\n\tstatic getStopGTFSHeader(): string {\n\t\treturn\t'stop_id,' +\n\t\t\t\t'stop_lat,' + \n\t\t\t\t'stop_lon,' + \n\t\t\t\t'stop_name,' +\n\t\t\t\t'location_type,' +\n\t\t\t\t'parent_station,' +\n\t\t\t\t'wheelchair_boarding,' +\n\t\t\t\t'level_id,' +\n\t\t\t\t'platform_code,' +\n\t\t\t\t'signposted_as';\n\t}\n\n    static stopToGTFS(stop: Stop): string {\n\t\treturn  stop.stopId + ',' +\n\t\t\t\tstop.stopLat.toString() + ',' +\n\t\t\t\tstop.stopLon.toString() + ',' +\n\t\t\t\tthis.escapeText(stop.stopName || '') + ',' +\n\t\t\t\tstop.locationType.toString() + ',' +\n\t\t\t\tstop.parentStation + ',' +\n                stop.wheelchairBoarding.toString() + ',' +\n                stop.levelId + ',' +\n                this.escapeText(stop.platformCode || '') + ',' +\n                this.escapeText(stop.signpostedAs || '');\n    }\n\n    static pathwayFromGTFS(pathway: {[key: string]: string}): Pathway {\n        return {\n            pathwayId: pathway['pathway_id'],\n            fromStopId: pathway['from_stop_id'],\n            toStopId: pathway['to_stop_id'],\n            pathwayMode: Number(pathway['pathway_mode']),\n            isBidirectional: Number(pathway['is_bidirectional']) === 1,\n            length: pathway['length'] ? Number(pathway['length']) : undefined,\n            traversalTime: pathway['traversal_time'] ? Number(pathway['traversal_time']) : undefined,\n            stairCount: pathway['stair_count'] ? Number(pathway['stair_count']) : undefined,\n            maxSlope: pathway['max_slope'] ? Number(pathway['max_slope']) : undefined,\n            minWidth: pathway['min_width'] ? Number(pathway['min_width']) : undefined,\n            signpostedAs: pathway['signposted_as'],\n            reversedSignpostedAs: pathway['reversed_signposted_as']\n        };\n    }\n\n\tstatic getPathwayGTFSHeader(): string {\n\t\treturn\t'pathway_id,' +\n\t\t\t\t'from_stop_id,' +\n\t\t\t\t'to_stop_id,' +\n\t\t\t\t'pathway_mode,' +\n\t\t\t\t'is_bidirectional,' +\n\t\t\t\t'length,' +\n\t\t\t\t'traversal_time,' +\n\t\t\t\t'stair_count,' +\n\t\t\t\t'max_slope,' +\n\t\t\t\t'min_width,' +\n\t\t\t\t'signposted_as,' +\n\t\t\t\t'reversed_signposted_as';\n\t}\n\n    static pathwayToGTFS(pathway: Pathway): string {\n        return  pathway.pathwayId + ',' +\n                pathway.fromStopId + ',' +\n                pathway.toStopId + ',' +\n                pathway.pathwayMode.toString() + ',' +\n                (pathway.isBidirectional ? '1' : '0') + ',' +\n                (pathway.length || '') + ',' +\n                (pathway.traversalTime || '') + ',' +\n                (pathway.stairCount || '') + ',' +\n                (pathway.maxSlope || '') + ',' +\n                (pathway.minWidth || '') + ',' +\n                this.escapeText(pathway.signpostedAs || '') + ',' +\n                this.escapeText(pathway.reversedSignpostedAs || '');\n    }\n\n    static levelFromGTFS(level: {[key: string]: string}): Level {\n        return {\n            levelId: level['level_id'],\n            levelName: level['level_name'],\n            levelIndex: Number(level['level_index'])\n        };\n    }\n\n\tstatic getLevelGTFSHeader(): string {\n\t\treturn\t'level_id,' +\n\t\t\t\t'level_name,' +\n\t\t\t\t'level_index';\n\t}\n\n    static levelToGTFS(level: Level): string {\n        return  level.levelId + ',' +\n\t\t\t\tthis.escapeText(level.levelName || '') + ',' +\n                level.levelIndex.toString();\n\t}\n\n\tstatic vehicleBoardingFromGTFS(vehicleBoarding: {[key: string]: string}): VehicleBoarding {\n        return {\n\t\t\tvehicleCategoryId: vehicleBoarding['vehicle_category_id'],\n\t\t\tchildSequence: Number(vehicleBoarding['child_sequence']),\n\t\t\tboardingAreaId: vehicleBoarding['boarding_area_id'],\n\t\t\tdoorId: vehicleBoarding['door_id']\n        };\n\t}\n\t\n\tstatic getVehicleBoardingGTFSHeader(): string {\n\t\treturn\t'vehicle_category_id,' +\n\t\t\t\t'child_sequence,' +\n\t\t\t\t'boarding_area_id,' +\n\t\t\t\t'door_id';\n\t}\n\n    static vehicleBoardingToGTFS(vehicleBoarding: VehicleBoarding): string {\n        return  vehicleBoarding.vehicleCategoryId + ',' +\n\t\t\t\tvehicleBoarding.childSequence.toString() + ',' +\n                vehicleBoarding.boardingAreaId + ',' +\n                vehicleBoarding.doorId;\n\t}\n\n\t// --------------------------\n\n\tstatic vehicleCategoryFromGTFS(vehicleCategory: {[key: string]: string}): VehicleCategory {\n        return {\n\t\t\tvehicleCategoryId: vehicleCategory['vehicle_category_id'],\n\t\t\tvehicleCategoryName: vehicleCategory['vehicle_category_name']\n        };\n\t}\n\n\tstatic vehicleCouplingFromGTFS(vehicleCoupling: {[key: string]: string}): VehicleCoupling {\n        return {\n\t\t\tparentId: vehicleCoupling['parent_id'],\n\t\t\tchildId: vehicleCoupling['child_id'],\n\t\t\tchildSequence: Number(vehicleCoupling['child_sequence'])\n        };\n\t}\n\n\tstatic vehicleDoorFromGTFS(vehicleDoor: {[key: string]: string}): VehicleDoor {\n        return {\n\t\t\tdoorId: vehicleDoor['door_id'],\n\t\t\tvehicleCategoryId: vehicleDoor['vehicle_category_id'],\n\t\t\tdoorSequence: Number(vehicleDoor['door_sequence'])\n        };\n\t}\n\n\t// --------------------------\n\n\tstatic getVehicleBoardingId(vehicleBoarding: VehicleBoarding): string {\n\t\treturn vehicleBoarding.vehicleCategoryId + \"+\" + vehicleBoarding.childSequence + \"+\" +\n\t\t\tvehicleBoarding.boardingAreaId + \"+\" + vehicleBoarding.doorId;\n\t}\n\n\t// TODO\n\tstatic escapeText(text: string): string {\n\t\treturn text;\n\t}\n\n\t// Return array of string values\n\t// Source: https://stackoverflow.com/questions/8493195/how-can-i-parse-a-csv-string-with-javascript-which-contains-comma-in-data\n\tstatic csvToArray(text: string) {\n\t\tvar re_value = /(?!\\s*$)\\s*(?:\"([^\"\\\\]*(?:\\\\[\\S\\s][^\"\\\\]*)*)\"|([^,\\s\\\\]*(?:\\s+[^,\\s\\\\]+)*))\\s*(?:,|$)/g;\n\t\tvar a = [];                     // Initialize array to receive values.\n\t\ttext.replace(re_value, // \"Walk\" the string using replace with callback.\n\t\t\tfunction(m0, m1, m2, m3) {\n\t\t\t\t// Remove backslash from \\' in single quoted values.\n\t\t\t\tif      (m1 !== undefined) a.push(m1.replace(/\\\\'/g, \"'\"));\n\t\t\t\t// Remove backslash from \\\" in double quoted values.\n\t\t\t\telse if (m2 !== undefined) a.push(m2.replace(/\\\\\"/g, '\"'));\n\t\t\t\telse if (m3 !== undefined) a.push(m3);\n\t\t\t\treturn ''; // Return empty string.\n\t\t\t});\n\t\t// Handle special case of empty last value.\n\t\tif (/,\\s*$/.test(text)) a.push('');\n\t\treturn a;\n\t};\n}\n","import React, { Component } from 'react';\nimport './StationBuilder.scss';\nimport Vis from './Vis';\nimport StopDialog from './StopDialog';\nimport Stop from '../interfaces/Stop';\nimport VisNode from '../interfaces/VisNode';\nimport VisService from '../services/VisService';\nimport Communication from '../interfaces/Communication';\nimport Pathway, { PathwayModeMap } from '../interfaces/Pathway';\nimport VisEdge from '../interfaces/VisEdge';\nimport PathwayDialog from './PathwayDialog';\nimport cloneDeep from 'lodash/cloneDeep';\nimport Level from '../interfaces/Level';\nimport circleRedImage from '../images/circle-red.png';\nimport circleBlueImage from '../images/circle-blue.png';\nimport VehicleBoarding from '../interfaces/VehicleBoarding';\nimport DataService from '../services/DataService';\n\ndeclare const google: any;\n\nexport interface StationBuilderProps {\n\tdata: Communication,\n\tonSave: (data: Communication, deletedStopsIds: string[], deletedPathwaysIds: string[], deletedVehicleBoardingsIds: string[]) => void,\n\tonCancel: () => void,\n\tmapDiv?: HTMLDivElement,\n\tmap?: google.maps.Map\n}\n\nexport interface StationBuilderState {\n\tdata: Communication,\n\tselectedStop: {\n\t\tstop: Stop,\n\t\tnode: VisNode,\n\t\tcallback: (node?: VisNode) => void\n\t} | null,\n\tselectedPathway: {\n\t\tpathway: Pathway,\n\t\tedge: VisEdge,\n\t\tcallback: (edge?: VisEdge) => void\n\t} | null,\n\tmapMarkers: google.maps.Marker[],\n\tstations: Stop[],\n\tplatforms: Stop[],\n\tlevels: Level[],\n\tlatK: number,\n\tlatX: number,\n\tlonK: number,\n\tlonX: number,\n\tdeletedStopsIds: string[],\n\tdeletedPathwaysIds: string[],\n\tvisPhysicsOptions: any,\n\tisLoading: boolean\n}\n\nexport default class StationBuilder extends Component<StationBuilderProps, StationBuilderState> {\n\tprivate mapRef: React.RefObject<HTMLDivElement> = React.createRef();\n\n\tconstructor(props: StationBuilderProps) {\n\t\tsuper(props);\n\t\tlet stations: Stop[] = [];\n\t\tlet platforms: Stop[] = [];\n\t\tprops.data.stops.forEach((stop: Stop) => {\n\t\t\tif (stop.locationType === 0) {\n\t\t\t\tplatforms.push(stop);\n\t\t\t}\n\t\t\tif (stop.locationType === 1) {\n\t\t\t\tstations.push(stop);\n\t\t\t}\n\t\t});\n\t\tif (stations.length === 0) {\n\t\t\tthrow new Error(\"No station provided in input data\");\n\t\t}\n\t\tif (platforms.length === 0) {\n\t\t\tthrow new Error(\"No platforms provided in input data\");\n\t\t}\n\n\t\tlet minLat = 0;\n\t\tlet minLon = 0;\n\t\tlet maxLat = 0;\n\t\tlet maxLon = 0;\n\t\tprops.data.stops.forEach((stop: Stop) => {\n\t\t\tif (!minLat || (stop.stopLat < minLat)) {\n\t\t\t\tminLat = stop.stopLat;\n\t\t\t}\n\t\t\tif (!minLon || (stop.stopLon < minLon)) {\n\t\t\t\tminLon = stop.stopLon;\n\t\t\t}\n\t\t\tif (!maxLat || (stop.stopLat > maxLat)) {\n\t\t\t\tmaxLat = stop.stopLat;\n\t\t\t}\n\t\t\tif (!maxLon || (stop.stopLon > maxLon)) {\n\t\t\t\tmaxLon = stop.stopLon;\n\t\t\t}\n\t\t\tthis.attachVehiclesInfoToStop(stop, this.props.data.vehicleBoardings);\n\t\t});\n\t\tlet latGap = maxLat - minLat;\n\t\tlet lonGap = maxLon - minLon;\n\t\tconst lonK = 1000.0 / lonGap;\n\t\tconst lonX = -minLon * 1000.0 / lonGap;\n\t\tconst latK = -1000.0 / latGap;\n\t\tconst latX = maxLat * 1000.0 / latGap;\n\n\t\t// Init VisService state\n\t\tVisService.edgeRoundness = {};\n\n\t\tthis.state = {\n\t\t\tdata: cloneDeep(props.data),\n\t\t\tselectedStop: null,\n\t\t\tselectedPathway: null,\n\t\t\tmapMarkers: [],\n\t\t\tstations,\n\t\t\tplatforms,\n\t\t\tlevels: props.data.levels,\n\t\t\tlatK,\n\t\t\tlatX,\n\t\t\tlonK,\n\t\t\tlonX,\n\t\t\tdeletedStopsIds: [],\n\t\t\tdeletedPathwaysIds: [],\n\t\t\tvisPhysicsOptions: false,\n\t\t\tisLoading: false\n\t\t};\n\t}\n\n\tpublic componentDidMount() {\n\t\tconst bounds = new google.maps.LatLngBounds();\n\t\tthis.props.data.stops.forEach((stop: Stop) => {\n\t\t\tbounds.extend({\n\t\t\t\tlat: stop.stopLat,\n\t\t\t\tlng: stop.stopLon\n\t\t\t});\n\t\t});\n\n\t\tlet map: google.maps.Map;\n\n\t\tif (this.mapRef.current) {\n\t\t\tif (this.props.mapDiv && this.props.map) {\n\t\t\t\tthis.mapRef.current.appendChild(this.props.mapDiv);\n\t\t\t\tthis.props.map.fitBounds(bounds);\n\t\t\t\tmap = this.props.map;\n\t\t\t}\n\t\t\telse {\n\t\t\t\tconsole.log(\"Google map initialized\");\n\t\t\t\tmap = new google.maps.Map(this.mapRef.current);\n\t\t\t\tmap.fitBounds(bounds);\n\t\t\t}\n\t\t}\n\n\t\tthis.props.data.stops.filter((stop: Stop) => {\n\t\t\treturn [0, 2].includes(stop.locationType);\n\t\t}).forEach((stop: Stop) => {\n\t\t\tthis.state.mapMarkers.push(new google.maps.Marker({\n\t\t\t\tmap: map,\n\t\t\t\tposition: {\n\t\t\t\t\tlat: stop.stopLat,\n\t\t\t\t\tlng: stop.stopLon\n\t\t\t\t},\n\t\t\t\ticon: stop.locationType === 0 ? circleBlueImage : circleRedImage\n\t\t\t}));\n\t\t});\n\n\t\tdocument.addEventListener('keydown', this.handleDocumentKeydown);\n\t}\n\n\tprivate handleDocumentKeydown = (e: KeyboardEvent) => {\n\t\tif (e.keyCode === 27) {\n\t\t\tthis.handleDialogCancel();\n\t\t}\n\t}\n\n\tpublic componentWillUnmount() {\n\t\tthis.state.mapMarkers.forEach((marker) => {\n\t\t\tmarker.setMap(null);\n\t\t});\n\t\tdocument.removeEventListener('keydown', this.handleDocumentKeydown);\n\t}\n\n\tprivate handleStopAddMode = (node: VisNode, callback: (node?: VisNode) => void) => {\n\t\tnode = VisService.prepareNewNode(node, this.state.stations, {\n\t\t\tlatK: this.state.latK,\n\t\t\tlatX: this.state.latX,\n\t\t\tlonK: this.state.lonK,\n\t\t\tlonX: this.state.lonX\n\t\t});\n\t\tthis.setState({\n\t\t\tselectedStop: {\n\t\t\t\tstop: node.stop,\n\t\t\t\tnode: node,\n\t\t\t\tcallback: callback\n\t\t\t}\n\t\t});\n\t}\n\n\tprivate handleStopEditMode = (node: VisNode, callback: (node?: VisNode) => void) => {\n\t\tthis.setState({\n\t\t\tselectedStop: {\n\t\t\t\tstop: node.stop,\n\t\t\t\tnode: node,\n\t\t\t\tcallback: callback\n\t\t\t}\n\t\t});\n\t}\n\n\tprivate handlePathwayAddMode = (edge: VisEdge, callback: (edge?: VisEdge) => void) => {\n\t\tedge = VisService.prepareNewEdge(edge);\n\t\tthis.setState({\n\t\t\tselectedPathway: {\n\t\t\t\tpathway: edge.pathway,\n\t\t\t\tedge: edge,\n\t\t\t\tcallback: callback\n\t\t\t}\n\t\t});\n\t}\n\n\tprivate handlePathwayEditMode = (edge: VisEdge, callback: (edge?: VisEdge) => void) => {\n\t\tthis.setState({\n\t\t\tselectedPathway: {\n\t\t\t\tpathway: edge.pathway,\n\t\t\t\tedge: edge,\n\t\t\t\tcallback: callback\n\t\t\t}\n\t\t});\n\t}\n\n\tprivate attachVehiclesInfoToStop(stop: Stop, vehicleBoardings: VehicleBoarding[]): Stop {\n\t\tconst vehiclesInfo = vehicleBoardings\n\t\t\t.filter(vehicleBoarding => vehicleBoarding.boardingAreaId === stop.stopId)\n\t\t\t.map((vehicleBoarding): string => {\n\t\t\t\tconst vehicle = this.props.data.vehicles.find(vehicle => vehicle.vehicleCategoryId === vehicleBoarding.vehicleCategoryId);\n\t\t\t\tif (vehicle) {\n\t\t\t\t\tconst child = vehicle.children.find(child => child.childSequence === vehicleBoarding.childSequence);\n\t\t\t\t\tif (child) {\n\t\t\t\t\t\tconst door = child.doors.find(door => vehicleBoarding.doorId === door.doorId);\n\t\t\t\t\t\tif (door) {\n\t\t\t\t\t\t\treturn child.childSequence + \" - \" + door.doorSequence;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\treturn \"\";\n\t\t\t})\n\t\t\t.filter(vehicleBoarding => vehicleBoarding !== \"\");\n\t\tstop.vehiclesInfo = vehiclesInfo ? vehiclesInfo[0] : \"\";\n\t\treturn stop;\n\t}\n\n\tprivate handleStopDialogApply = (stop: Stop, newVehicleBoardings: VehicleBoarding[]) => {\n\t\tif (this.state.selectedStop) {\n\t\t\tthis.attachVehiclesInfoToStop(stop, newVehicleBoardings);\n\n\t\t\tconst data = this.state.data;\n\t\t\tconst stopIndex = data.stops.findIndex(curStop => curStop.stopId === stop.stopId);\n\t\t\tif (stopIndex === -1) {\n\t\t\t\tdata.stops.push(stop);\n\t\t\t}\n\t\t\telse {\n\t\t\t\tdata.stops[stopIndex] = stop;\n\t\t\t}\n\t\t\tconst node = VisService.attachStopToNode(stop, this.state.selectedStop.node);\n\t\t\tthis.state.selectedStop.callback(node);\n\t\t\tdata.vehicleBoardings = newVehicleBoardings;\n\t\t\tthis.setState({\n\t\t\t\tselectedStop: null,\n\t\t\t\tdata\n\t\t\t});\n\t\t}\n\t}\n\n\tprivate handlePathwayDialogApply = (pathway: Pathway) => {\n\t\tif (this.state.selectedPathway) {\n\t\t\tconst data = this.state.data;\n\t\t\tconst pathwayIndex = data.pathways.findIndex(curPathway => curPathway.pathwayId === pathway.pathwayId);\n\t\t\tif (pathwayIndex === -1) {\n\t\t\t\tdata.pathways.push(pathway);\n\t\t\t}\n\t\t\telse {\n\t\t\t\tdata.pathways[pathwayIndex] = pathway;\n\t\t\t}\n\t\t\tconst edge = VisService.attachPathwayToEdge(pathway, this.state.selectedPathway.edge);\n\t\t\tthis.state.selectedPathway.callback(edge);\n\t\t\tthis.setState({\n\t\t\t\tselectedPathway: null,\n\t\t\t\tdata\n\t\t\t});\n\t\t}\n\t}\n\n\tprivate handleItemDelete = (\n\t\tdataToDelete: { nodes: string[], edges: string[] },\n\t\tcallback: (dataToDelete?: { nodes: string[], edges: string[] }) => void\n\t) => {\n\t\tconst hasError = dataToDelete.nodes.some((nodeId: string) => {\n\t\t\tconst stop: Stop | undefined = this.state.data.stops.find(stop => stop.stopId === nodeId);\n\t\t\tif (stop && ![3, 4].includes(stop.locationType)) {\n\t\t\t\talert(\"You can't delete this location type\");\n\t\t\t\treturn true;\n\t\t\t}\n\t\t\tconst stopIndex = this.state.data.stops.findIndex(stop => stop.stopId === nodeId);\n\t\t\tif (stopIndex !== -1) {\n\t\t\t\tthis.state.data.stops.splice(stopIndex, 1);\n\t\t\t\tthis.state.deletedStopsIds.push(nodeId);\n\t\t\t}\n\t\t\treturn false;\n\t\t});\n\t\tif (hasError) {\n\t\t\tcallback();\n\t\t\treturn;\n\t\t}\n\t\tdataToDelete.edges.forEach((pathwayId: string) => {\n\t\t\tconst pathwayIndex = this.state.data.pathways.findIndex(pathway => pathway.pathwayId === pathwayId);\n\t\t\tif (pathwayIndex !== -1) {\n\t\t\t\tthis.state.data.pathways.splice(pathwayIndex, 1);\n\t\t\t\tthis.state.deletedPathwaysIds.push(pathwayId);\n\t\t\t}\n\t\t});\n\t\tcallback(dataToDelete);\n\t}\n\n\tprivate handleDialogCancel = () => {\n\t\tif (this.state.selectedStop) {\n\t\t\tthis.state.selectedStop.callback();\n\t\t\tthis.setState({\n\t\t\t\tselectedStop: null\n\t\t\t});\n\t\t}\n\t\tif (this.state.selectedPathway) {\n\t\t\tthis.state.selectedPathway.callback();\n\t\t\tthis.setState({\n\t\t\t\tselectedPathway: null\n\t\t\t});\n\t\t}\n\t}\n\n\tprivate handleSaveClick = () => {\n\t\t// Get deleted vehicleBoardings\n\t\tconst oldVehicleBoardings = this.props.data.vehicleBoardings;\n\t\tconst newVehicleBoardings = this.state.data.vehicleBoardings;\n\t\tlet deletedVehicleBoardingsIds: string[] = oldVehicleBoardings.filter(oldVehicleBoarding => {\n\t\t\tconst oldId = DataService.getVehicleBoardingId(oldVehicleBoarding);\n\t\t\tconst index = newVehicleBoardings.findIndex(newVehicleBoarding => {\n\t\t\t\treturn DataService.getVehicleBoardingId(newVehicleBoarding) === oldId;\n\t\t\t});\n\t\t\treturn (index === -1);\n\t\t}).map(vehicleBoarding => DataService.getVehicleBoardingId(vehicleBoarding));\n\n\t\tthis.props.onSave(this.state.data,\n\t\t\tthis.state.deletedStopsIds,\n\t\t\tthis.state.deletedPathwaysIds,\n\t\t\tdeletedVehicleBoardingsIds);\n\t}\n\n\tprivate handleGravityClick = () => {\n\t\tif (window.confirm(\"This operation can take some time and will change original positions of all locations\")) {\n\t\t\tthis.setState({\n\t\t\t\tvisPhysicsOptions: {\n\t\t\t\t\tbarnesHut: {\n\t\t\t\t\t\tgravitationalConstant: -500000,\n\t\t\t\t\t\tavoidOverlap: 1,\n\t\t\t\t\t\tcentralGravity: 10\n\t\t\t\t\t},\n\t\t\t\t\tminVelocity: 10,\n\t\t\t\t\tmaxVelocity: 70,\n\t\t\t\t\tstabilization: true\n\t\t\t\t},\n\t\t\t\tisLoading: true\n\t\t\t});\n\t\t}\n\t}\n\n\tprivate handleNetworkStabilized = () => {\n\t\tthis.setState({\n\t\t\tvisPhysicsOptions: false,\n\t\t\tisLoading: false\n\t\t});\n\t}\n\n\tprivate handleCancelClick = () => {\n\t\tthis.props.onCancel();\n\t}\n\n\tprivate handleStopDragEnd = (nodeId: string, position: {x: number, y: number}, handleAllNodes?: boolean) => {\n\t\tconst stop: Stop | undefined = this.state.data.stops.find((stop: Stop) => {\n\t\t\treturn stop.stopId === nodeId;\n\t\t});\n\n\t\t// Update position for generic nodes and boarding areas\n\t\tif (stop && ([3, 4].includes(stop.locationType) || handleAllNodes)) {\n\t\t\tstop.stopLat = ((position.y || 0) - this.state.latX) / this.state.latK;\n\t\t\tstop.stopLon = ((position.x || 0) - this.state.lonX) / this.state.lonK;\n\t\t}\n\t}\n\n\tprivate handleFareZoneAdd = (position: {x: number, y: number}, callback: (nodes: VisNode[], edges: VisEdge[]) => void) => {\n\t\tconst node1: VisNode = VisService.prepareNewNode({\n\t\t\tx: position.x,\n\t\t\ty: position.y\n\t\t} as VisNode, this.state.stations, {\n\t\t\tlatK: this.state.latK,\n\t\t\tlatX: this.state.latX,\n\t\t\tlonK: this.state.lonK,\n\t\t\tlonX: this.state.lonX\n\t\t});\n\t\tthis.state.data.stops.push(node1.stop);\n\n\t\tconst node2: VisNode = VisService.prepareNewNode({\n\t\t\tx: position.x - 100,\n\t\t\ty: position.y\n\t\t} as VisNode, this.state.stations, {\n\t\t\tlatK: this.state.latK,\n\t\t\tlatX: this.state.latX,\n\t\t\tlonK: this.state.lonK,\n\t\t\tlonX: this.state.lonX\n\t\t});\n\t\tthis.state.data.stops.push(node2.stop);\n\n\t\tlet edge1: VisEdge = VisService.prepareNewEdge({\n\t\t\tfrom: node1.id,\n\t\t\tto: node2.id\n\t\t} as VisEdge);\n\t\tedge1.pathway.pathwayMode = PathwayModeMap['FareGate'];\n\t\tedge1.pathway.isBidirectional = false;\n\t\tedge1.pathway.traversalTime = 10;\n\t\tedge1 = VisService.attachPathwayToEdge(edge1.pathway, edge1);\n\t\tthis.state.data.pathways.push(edge1.pathway);\n\n\t\tlet edge2: VisEdge = VisService.prepareNewEdge({\n\t\t\tfrom: node2.id,\n\t\t\tto: node1.id\n\t\t} as VisEdge);\n\t\tedge2.pathway.pathwayMode = PathwayModeMap['ExitGate'];\n\t\tedge2.pathway.isBidirectional = false;\n\t\tedge2.pathway.traversalTime = 10;\n\t\tedge2 = VisService.attachPathwayToEdge(edge2.pathway, edge2);\n\t\tthis.state.data.pathways.push(edge2.pathway);\n\n\t\tcallback([node1, node2], [edge1, edge2]);\n\t}\n\n\trender() {\n\t\treturn (\n\t\t\t<div className=\"station-builder\">\n\t\t\t\t{this.state.isLoading && <div className=\"loader\"></div>}\n\t\t\t\t<div className=\"panel\">\n\t\t\t\t\t<button className=\"save\" onClick={this.handleSaveClick}>Save</button>\n\t\t\t\t\t<button className=\"cancel\" onClick={this.handleCancelClick}>Cancel</button>\n\t\t\t\t\t<button className=\"gravity\" onClick={this.handleGravityClick}>Beautify</button>\n\t\t\t\t</div>\n\t\t\t\t<div className=\"main\">\n\t\t\t\t\t<div className=\"graph\">\n\t\t\t\t\t\t<Vis\n\t\t\t\t\t\t\tdata={this.state.data}\n\t\t\t\t\t\t\tvisPhysicsOptions={this.state.visPhysicsOptions}\n\t\t\t\t\t\t\tonStopAdd={this.handleStopAddMode}\n\t\t\t\t\t\t\tonStopEdit={this.handleStopEditMode}\n\t\t\t\t\t\t\tonItemDelete={this.handleItemDelete}\n\t\t\t\t\t\t\tonStopDragEnd={this.handleStopDragEnd}\n\t\t\t\t\t\t\tonPathwayAdd={this.handlePathwayAddMode}\n\t\t\t\t\t\t\tonPathwayEdit={this.handlePathwayEditMode}\n\t\t\t\t\t\t\tonFareZoneAdd={this.handleFareZoneAdd}\n\t\t\t\t\t\t\tonNetworkStabilized={this.handleNetworkStabilized}\n\t\t\t\t\t\t\tlatK={this.state.latK}\n\t\t\t\t\t\t\tlatX={this.state.latX}\n\t\t\t\t\t\t\tlonK={this.state.lonK}\n\t\t\t\t\t\t\tlonX={this.state.lonX}\n\t\t\t\t\t\t\tisDialogShown={!!(this.state.selectedStop || this.state.selectedPathway)}></Vis>\n\n\t\t\t\t\t\t{this.state.selectedStop && <StopDialog\n\t\t\t\t\t\t\tstop={this.state.selectedStop.stop}\n\t\t\t\t\t\t\tstations={this.state.stations}\n\t\t\t\t\t\t\tplatforms={this.state.platforms}\n\t\t\t\t\t\t\tlevels={this.state.levels}\n\t\t\t\t\t\t\tvehicles={this.state.data.vehicles}\n\t\t\t\t\t\t\tvehicleBoardings={this.state.data.vehicleBoardings}\n\t\t\t\t\t\t\tonCancel={this.handleDialogCancel}\n\t\t\t\t\t\t\tonApply={this.handleStopDialogApply}></StopDialog>}\n\n\t\t\t\t\t\t{this.state.selectedPathway && <PathwayDialog\n\t\t\t\t\t\t\tpathway={this.state.selectedPathway.pathway}\n\t\t\t\t\t\t\tonCancel={this.handleDialogCancel}\n\t\t\t\t\t\t\tonApply={this.handlePathwayDialogApply}></PathwayDialog>}\n\t\t\t\t\t</div>\n\t\t\t\t\t<div className=\"map\" ref={this.mapRef}></div>\n\t\t\t\t</div>\n\t\t\t\t{(this.state.selectedStop || this.state.selectedPathway) && <div className=\"dialog-bg\" onClick={this.handleDialogCancel}></div>}\n\t\t\t</div>\n\t\t);\n\t}\n}\n","export default class FileService {\n\tpublic static readUploadedFileAsText = async (inputFile: File): Promise<string> => {\n\t\tconst temporaryFileReader = new FileReader();\n\n\t\treturn new Promise((resolve, reject) => {\n\t\t\ttemporaryFileReader.onerror = () => {\n\t\t\t\ttemporaryFileReader.abort();\n\t\t\t\treject(new DOMException(\"Error while parsing input file.\"));\n\t\t\t};\n\n\t\t\ttemporaryFileReader.onload = () => {\n\t\t\t\tresolve((temporaryFileReader.result || \"\") as string);\n\t\t\t};\n\t\t\ttemporaryFileReader.readAsText(inputFile);\n\t\t});\n\t};\n}\n","declare const google: any;\n\nclass TxtOverlay extends google.maps.OverlayView {\n\tprivate pos_: google.maps.LatLng;\n\tprivate text_: string;\n\tprivate class_: string;\n\tprivate map_: google.maps.Map;\n\tprivate div_: HTMLElement | null;\n\n\tpublic constructor(pos: google.maps.LatLng, text: string, className: string, map: google.maps.Map) {\n\t\tsuper();\n\t\tthis.pos_ = pos;\n\t\tthis.text_ = text;\n\t\tthis.class_ = className;\n\t\tthis.map_ = map;\n\t\tthis.div_ = null;\n\t\tthis.setMap(map);\n\t}\n\n\tpublic onAdd = () => {\n\t\tvar div = document.createElement('DIV');\n\t\tdiv.className = this.class_;\n\t\tdiv.innerHTML = this.text_;\n\t\tthis.div_ = div;\n\t\tvar overlayProjection = this.getProjection();\n\t\tvar position = overlayProjection.fromLatLngToDivPixel(this.pos_);\n\t\tdiv.style.left = position.x + 'px';\n\t\tdiv.style.top = position.y + 'px';\n\t\tvar panes = this.getPanes();\n\t\tpanes.floatPane.appendChild(div);\n\t}\n\t\n\tpublic draw = () =>  {\n\t\tvar overlayProjection = this.getProjection();\n\t\tvar position = overlayProjection.fromLatLngToDivPixel(this.pos_);\n\t\tvar div = this.div_;\n\t\tif (div) {\n\t\t\tdiv.style.left = position.x + 'px';\n\t\t\tdiv.style.top = position.y + 'px';\n\t\t}\n\t}\n\t\n\tpublic onRemove = () => {\n\t\tif (this.div_ && this.div_.parentNode) {\n\t\t\tthis.div_.parentNode.removeChild(this.div_);\n\t\t\tthis.div_ = null;\n\t\t}\n\t}\n\t\n\tpublic hide = () => {\n\t\tif (this.div_) {\n\t\t\tthis.div_.style.visibility = \"hidden\";\n\t\t}\n\t}\n\t\n\t\n\tpublic show = () => {\n\t\tif (this.div_) {\n\t\t\tthis.div_.style.visibility = \"visible\";\n\t\t}\n\t}\n\t\n\tpublic toggle = () => {\n\t\tif (this.div_) {\n\t\t\tif (this.div_.style.visibility === \"hidden\") {\n\t\t\t\tthis.show();\n\t\t\t} else {\n\t\t\t\tthis.hide();\n\t\t\t}\n\t\t}\n\t}\n\t\n\tpublic toggleDOM = () => {\n\t\tif (this.getMap()) {\n\t\t\tthis.setMap(null);\n\t\t} else {\n\t\t\tthis.setMap(this.map_);\n\t\t}\n\t}\n}\n\nexport default TxtOverlay;","import React, { Component } from \"react\";\nimport \"./App.scss\";\nimport StationBuilder from \"./components/StationBuilder\";\nimport Communication from \"./interfaces/Communication\";\nimport DataService from \"./services/DataService\";\nimport JSZip, { JSZipObject } from 'jszip';\nimport FileService from \"./services/FileService\";\nimport Stop from \"./interfaces/Stop\";\nimport circleBlackImage from './images/circle-black.png';\nimport ewayLogo from './images/eway-logo.png';\nimport TxtOverlay from \"./map/TxtOverlay\";\nimport Pathway from \"./interfaces/Pathway\";\nimport Level from \"./interfaces/Level\";\nimport { saveAs } from 'file-saver';\nimport VisService from \"./services/VisService\";\nimport VehicleBoarding from \"./interfaces/VehicleBoarding\";\nimport Vehicle from \"./interfaces/Vehicle\";\nimport VehicleCategory from \"./interfaces/VehicleCategory\";\nimport VehicleCoupling from \"./interfaces/VehicleCoupling\";\nimport VehicleDoor from \"./interfaces/VehicleDoor\";\n\nexport interface AppProps {}\n\ntype AppMode = \"FILE_UPLADING\" | \"STATION_SELECTION\" | \"STATION_BUILDER\";\n\ndeclare const google: any;\n\nexport interface AppState {\n\tisLoading: boolean;\n\tmode: AppMode;\n\tstations: Communication | null;\n\tselectedStation: Communication | null;\n\tuntouchedFiles: {[key: string]: string};\n\tmap?: google.maps.Map;\n\tmapObjects: (google.maps.Marker | TxtOverlay)[];\n}\n\nexport default class App extends Component<AppProps, AppState> {\n\tprivate mapRef: React.RefObject<HTMLDivElement> = React.createRef();\n\tprivate requiredFileNames = [\"stops.txt\", \"pathways.txt\"];\n\n\tpublic constructor(props: AppProps) {\n\t\tsuper(props);\n\t\tthis.state = {\n\t\t\tisLoading: false,\n\t\t\tmode: \"FILE_UPLADING\",\n\t\t\tstations: null,\n\t\t\tselectedStation: null,\n\t\t\tuntouchedFiles: {},\n\t\t\tmapObjects: []\n\t\t};\n\t}\n\n\tprivate handleFileChange = (event: React.ChangeEvent<HTMLInputElement>) => {\n\t\tif (event.target.files) {\n\t\t\tthis.setState({\n\t\t\t\tisLoading: true\n\t\t\t});\n\t\t\t// Zip\n\t\t\tif (event.target.files.length === 1) {\n\t\t\t\tconst zipFile = event.target.files[0];\n\t\t\t\tthis.handleZip(zipFile);\n\t\t\t}\n\t\t\t// Separate files\n\t\t\telse {\n\t\t\t\tconst files = Array.from(event.target.files);\n\t\t\t\tthis.handleFiles(files);\n\t\t\t}\n\t\t}\n\t}\n\n\tprivate handleFiles(files: File[]) {\n\t\tconst fileNames: string[] = [];\n\t\tconst filePromises = Promise.all(files\n\t\t\t.filter((file: File) => file.name.indexOf(\".txt\") !== -1)\n\t\t\t.map((file: File) => {\n\t\t\t\tfileNames.push(file.name);\n\t\t\t\treturn FileService.readUploadedFileAsText(file);\n\t\t\t}));\n\t\t\n\t\tif (!this.checkRequiredFiles(fileNames)) {\n\t\t\tthis.setState({\n\t\t\t\tisLoading: false\n\t\t\t});\n\t\t\treturn;\n\t\t}\n\n\t\tthis.handleFilePromises(filePromises, fileNames);\n\t}\n\n\tprivate handleZip(zipFile: Blob | File) {\n\t\tJSZip.loadAsync(zipFile).then((zip) => {\n\t\t\tconst files: JSZipObject[] = [];\n\t\t\tzip.forEach((relativePath, file) => {\n\t\t\t\tfiles.push(file);\n\t\t\t});\n\t\t\t\n\t\t\tconst fileNames: string[] = [];\n\t\t\tconst filePromises = Promise.all(files\n\t\t\t\t.filter((file: JSZipObject) => file.name.indexOf(\".txt\") !== -1)\n\t\t\t\t.map((file: JSZipObject) => {\n\t\t\t\t\tfileNames.push(file.name);\n\t\t\t\t\treturn file.async(\"text\");\n\t\t\t\t}));\n\t\t\t\n\t\t\tif (!this.checkRequiredFiles(fileNames)) {\n\t\t\t\tthis.setState({\n\t\t\t\t\tisLoading: false\n\t\t\t\t});\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tthis.handleFilePromises(filePromises, fileNames);\n\t\t}, function (e) {\n\t\t\talert(e.message);\n\t\t});\n\t}\n\n\tprivate handleFilePromises(\n\t\tfilePromises: Promise<string[]>,\n\t\tfileNames: string[]\n\t) {\n\t\tlet communicationPacket: Communication = {\n\t\t\tstops: [],\n\t\t\tpathways: [],\n\t\t\tvehicleBoardings: [],\n\t\t\tlevels: [],\n\t\t\tvehicles: []\n\t\t};\n\n\t\tfilePromises.then((fileContents: string[]) => {\n\t\t\tconst untouchedFiles: {[key: string]: string} = {};\n\t\t\tfileContents.forEach((fileContent: string, fileIndex: number) => {\n\t\t\t\tconst fileExtracted = this.extractData(fileNames[fileIndex], fileContent, communicationPacket);\n\t\t\t\tif (!fileExtracted) {\n\t\t\t\t\tuntouchedFiles[fileNames[fileIndex]] = fileContent;\n\t\t\t\t}\n\t\t\t});\n\n\t\t\t// Set id's initial values for new stops and pathways\n\t\t\tlet minStopId = 0;\n\t\t\tcommunicationPacket.stops.forEach(stop => {\n\t\t\t\tif (Number(stop.stopId) < minStopId) {\n\t\t\t\t\tminStopId = Number(stop.stopId);\n\t\t\t\t}\n\t\t\t});\n\t\t\tlet minPathwayId = 0;\n\t\t\tcommunicationPacket.pathways.forEach(pathway => {\n\t\t\t\tif (Number(pathway.pathwayId) < minPathwayId) {\n\t\t\t\t\tminPathwayId = Number(pathway.pathwayId);\n\t\t\t\t}\n\t\t\t});\n\t\t\tVisService.newStopId = minStopId - 1;\n\t\t\tVisService.newPathwayId = minPathwayId - 1;\n\n\t\t\t// Attach coordinates to nodes without lat:lng\n\t\t\tcommunicationPacket.stops = communicationPacket.stops.map(stop => {\n\t\t\t\tif (stop.stopLat === -1 && stop.stopLon === -1) {\n\t\t\t\t\tconst station = communicationPacket.stops.find(curStop => curStop.stopId === stop.parentStation);\n\t\t\t\t\tif (station) {\n\t\t\t\t\t\tstop.stopLat = station.stopLat;\n\t\t\t\t\t\tstop.stopLon = station.stopLon;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\treturn stop;\n\t\t\t});\n\n\t\t\t// Extract vehicles from untouched files\n\t\t\tif (untouchedFiles[\"vehicle_categories.txt\"]\n\t\t\t\t&& untouchedFiles[\"vehicle_couplings.txt\"]\n\t\t\t\t&& untouchedFiles[\"vehicle_doors.txt\"]) {\n\t\t\t\tcommunicationPacket.vehicles = this.extractVehicles(\n\t\t\t\t\tuntouchedFiles[\"vehicle_categories.txt\"],\n\t\t\t\t\tuntouchedFiles[\"vehicle_couplings.txt\"],\n\t\t\t\t\tuntouchedFiles[\"vehicle_doors.txt\"]);\n\t\t\t}\n\n\t\t\tconsole.log(communicationPacket);\n\t\t\tthis.setState({\n\t\t\t\tisLoading: false,\n\t\t\t\tstations: communicationPacket,\n\t\t\t\tmode: \"STATION_SELECTION\",\n\t\t\t\tuntouchedFiles\n\t\t\t}, () => {\n\t\t\t\tthis.showStationsOnMap(communicationPacket.stops);\n\t\t\t});\n\t\t});\n\t}\n\n\tprivate extractVehicles(vehicleCategoriesTxt: string,\n\t\tvehicleCouplingsTxt: string,\n\t\tvehicleDoorsTxt: string): Vehicle[] {\n\t\t\n\t\tconst vehicles: {[key: string]: Vehicle} = {};\n\t\tconst categories: VehicleCategory[] = DataService.fromGTFS(vehicleCategoriesTxt, DataService.vehicleCategoryFromGTFS);\n\t\tconst couplings: VehicleCoupling[] = DataService.fromGTFS(vehicleCouplingsTxt, DataService.vehicleCouplingFromGTFS);\n\t\tconst doors: VehicleDoor[] = DataService.fromGTFS(vehicleDoorsTxt, DataService.vehicleDoorFromGTFS);\n\n\t\tconst categoriesHash: {[key: string]: VehicleCategory} = {};\n\t\tcategories.forEach(category => {\n\t\t\tcategoriesHash[category.vehicleCategoryId] = category;\n\t\t});\n\t\tconst doorsHash: {[key: string]: VehicleDoor[]} = {};\n\t\tdoors.forEach(door => {\n\t\t\tif (!doorsHash[door.vehicleCategoryId]) {\n\t\t\t\tdoorsHash[door.vehicleCategoryId] = [];\n\t\t\t}\n\t\t\tdoorsHash[door.vehicleCategoryId].push(door);\n\t\t});\n\n\t\tcouplings.forEach(coupling => {\n\t\t\tif (!vehicles[coupling.parentId]) {\n\t\t\t\tvehicles[coupling.parentId] = {\n\t\t\t\t\t...categoriesHash[coupling.parentId],\n\t\t\t\t\tchildren: []\n\t\t\t\t};\n\t\t\t}\n\t\t\tvehicles[coupling.parentId].children.push({\n\t\t\t\tvehicleCategoryId: coupling.childId,\n\t\t\t\tchildSequence: coupling.childSequence,\n\t\t\t\tdoors: doorsHash[coupling.childId]\n\t\t\t});\n\t\t});\n\n\t\treturn Object.values(vehicles);\n\t}\n\n\tprivate showStationsOnMap(stops: Stop[]) {\n\t\tlet map: google.maps.Map;\n\t\tif (!this.state.map) {\n\t\t\tmap = new google.maps.Map(this.mapRef.current);\n\t\t\tconsole.log(\"Google map initialized\");\n\t\t\tthis.setState({\n\t\t\t\tmap\n\t\t\t});\n\t\t}\n\t\telse {\n\t\t\tmap = this.state.map;\n\t\t}\n\n\t\tif (this.state.mapObjects.length === 0) {\n\t\t\tconst bounds = new google.maps.LatLngBounds();\n\t\t\tstops.filter(stop => stop.locationType === 1).forEach(stop => {\n\t\t\t\tconst position = {\n\t\t\t\t\tlat: stop.stopLat,\n\t\t\t\t\tlng: stop.stopLon\n\t\t\t\t};\n\t\t\t\tbounds.extend(position);\n\t\t\t\tconst marker = new google.maps.Marker({\n\t\t\t\t\tmap,\n\t\t\t\t\tposition,\n\t\t\t\t\ticon: circleBlackImage\n\t\t\t\t});\n\t\t\t\tconst label = new TxtOverlay(\n\t\t\t\t\tnew google.maps.LatLng(stop.stopLat, stop.stopLon),\n\t\t\t\t\tstop.stopName || \"\",\n\t\t\t\t\t\"station-name\",\n\t\t\t\t\tmap\n\t\t\t\t);\n\t\t\t\tgoogle.maps.event.addListener(marker, 'click', () => {\n\t\t\t\t\tthis.handleStationSelect(stop.stopId);\n\t\t\t\t});\n\t\t\t\tthis.state.mapObjects.push(marker);\n\t\t\t\tthis.state.mapObjects.push(label);\n\t\t\t});\n\t\t\tmap.fitBounds(bounds, 50);\n\t\t}\n\t}\n\n\tprivate checkRequiredFiles(fileNames: string[]): boolean {\n\t\tconst requiredFileMissing = this.requiredFileNames.some((requiredFileName: string) => {\n\t\t\treturn fileNames.findIndex(fileName => fileName === requiredFileName) === -1;\n\t\t});\n\t\tif (requiredFileMissing) {\n\t\t\talert(\"You missed some of the required files: [\" + this.requiredFileNames.join(\", \") + \"]\");\n\t\t\treturn false;\n\t\t}\n\t\telse {\n\t\t\treturn true;\n\t\t}\n\t}\n\n\tprivate extractData(fileName: string, data: string, communicationPacket: Communication): boolean {\n\t\tswitch (fileName) {\n\t\t\tcase \"stops.txt\":\n\t\t\t\tcommunicationPacket.stops = DataService.fromGTFS(\n\t\t\t\t\tdata,\n\t\t\t\t\tDataService.stopFromGTFS\n\t\t\t\t);\n\t\t\t\treturn true;\n\t\t\tcase \"pathways.txt\":\n\t\t\t\tcommunicationPacket.pathways = DataService.fromGTFS(\n\t\t\t\t\tdata,\n\t\t\t\t\tDataService.pathwayFromGTFS\n\t\t\t\t);\n\t\t\t\treturn true;\n\t\t\tcase \"levels.txt\":\n\t\t\t\tcommunicationPacket.levels = DataService.fromGTFS(\n\t\t\t\t\tdata,\n\t\t\t\t\tDataService.levelFromGTFS\n\t\t\t\t);\n\t\t\t\treturn true;\n\t\t\tcase \"vehicle_boardings.txt\":\n\t\t\t\tcommunicationPacket.vehicleBoardings = DataService.fromGTFS(\n\t\t\t\t\tdata,\n\t\t\t\t\tDataService.vehicleBoardingFromGTFS\n\t\t\t\t);\n\t\t\t\treturn true;\n\t\t\tdefault:\n\t\t\t\treturn false;\n\t\t}\n\t}\n\n\tprivate handleStationSave = (dataNew: Communication, deletedStopsIds: string[], deletedPathwaysIds: string[], deletedVehicleBoardingsIds: string[]) => {\n\t\tconst dataActual = this.state.stations;\n\t\tif (dataActual) {\n\t\t\tdataNew.stops.forEach(stop => {\n\t\t\t\tconst stopIndex = dataActual.stops.findIndex(curStop => curStop.stopId === stop.stopId);\n\t\t\t\tif (stopIndex !== -1) {\n\t\t\t\t\tdataActual.stops[stopIndex] = stop;\n\t\t\t\t}\n\t\t\t\telse {\n\t\t\t\t\tdataActual.stops.push(stop);\n\t\t\t\t}\n\t\t\t});\n\t\t\tdeletedStopsIds.forEach(stopId => {\n\t\t\t\tconst stopIndex = dataActual.stops.findIndex(curStop => curStop.stopId === stopId);\n\t\t\t\tif (stopIndex !== -1) {\n\t\t\t\t\tdataActual.stops.splice(stopIndex, 1);\n\t\t\t\t}\n\t\t\t});\n\n\t\t\tdataNew.pathways.forEach(pathway => {\n\t\t\t\tconst pathwayIndex = dataActual.pathways.findIndex(curPathway => curPathway.pathwayId === pathway.pathwayId);\n\t\t\t\tif (pathwayIndex !== -1) {\n\t\t\t\t\tdataActual.pathways[pathwayIndex] = pathway;\n\t\t\t\t}\n\t\t\t\telse {\n\t\t\t\t\tdataActual.pathways.push(pathway);\n\t\t\t\t}\n\t\t\t});\n\t\t\tdeletedPathwaysIds.forEach(pathwayId => {\n\t\t\t\tconst pathwayIndex = dataActual.pathways.findIndex(curPathway => curPathway.pathwayId === pathwayId);\n\t\t\t\tif (pathwayIndex !== -1) {\n\t\t\t\t\tdataActual.pathways.splice(pathwayIndex, 1);\n\t\t\t\t}\n\t\t\t});\n\n\t\t\tdataNew.vehicleBoardings.forEach(vehicleBoardingNew => {\n\t\t\t\tconst vehicleBoardingNewId = DataService.getVehicleBoardingId(vehicleBoardingNew);\n\t\t\t\tconst vehicleBoardingIndex = dataActual.vehicleBoardings.findIndex(\n\t\t\t\t\tcurVehicleBoarding => DataService.getVehicleBoardingId(curVehicleBoarding) === vehicleBoardingNewId\n\t\t\t\t);\n\t\t\t\tif (vehicleBoardingIndex === -1) {\n\t\t\t\t\tdataActual.vehicleBoardings.push(vehicleBoardingNew);\n\t\t\t\t}\n\t\t\t});\n\t\t\tdeletedVehicleBoardingsIds.forEach(vehicleBoardingId => {\n\t\t\t\tconst vehicleBoardingIndex = dataActual.vehicleBoardings.findIndex(\n\t\t\t\t\tcurVehicleBoarding => DataService.getVehicleBoardingId(curVehicleBoarding) === vehicleBoardingId\n\t\t\t\t);\n\t\t\t\tif (vehicleBoardingIndex !== -1) {\n\t\t\t\t\tdataActual.vehicleBoardings.splice(vehicleBoardingIndex, 1);\n\t\t\t\t}\n\t\t\t});\n\n\t\t\tthis.setState({\n\t\t\t\tmode: \"STATION_SELECTION\"\n\t\t\t});\n\t\t}\n\t}\n\n\tprivate handleStationCancel = () => {\n\t\tthis.setState({\n\t\t\tmode: \"STATION_SELECTION\"\n\t\t});\n\t}\n\n\tprivate loadSampleDataMsk = () => {\n\t\tthis.setState({\n\t\t\tisLoading: true\n\t\t});\n\t\tconst sampleZip = fetch(\"https://kostjerry.github.io/gtfs-station-builder/sample/gtfs-translations-pathways-vehicles-sample.zip\");\n\t\tsampleZip.then(response => {\n\t\t\tif (response.ok) {\n\t\t\t\tresponse.blob().then(sampleZipBlob => {\n\t\t\t\t\tthis.handleZip(sampleZipBlob);\n\t\t\t\t});\n\t\t\t}\n\t\t});\n\t}\n\n\tprivate loadSampleDataParis = () => {\n\t\tthis.setState({\n\t\t\tisLoading: true\n\t\t});\n\t\tconst sampleZip = fetch(\"https://kostjerry.github.io/gtfs-station-builder/sample/go-deeper-paris.zip\");\n\t\tsampleZip.then(response => {\n\t\t\tif (response.ok) {\n\t\t\t\tresponse.blob().then(sampleZipBlob => {\n\t\t\t\t\tthis.handleZip(sampleZipBlob);\n\t\t\t\t});\n\t\t\t}\n\t\t});\n\t}\n\n\tprivate handleStationSelect = (stationId: string) => {\n\t\tif (this.state.stations) {\n\t\t\tconst station = this.state.stations.stops.find(stop => stop.stopId === stationId);\n\t\t\tif (station) {\n\n\t\t\t\t// Filter selected station and its neighbors\n\t\t\t\tconst stationIds = this.state.stations.stops.filter(stop => {\n\t\t\t\t\treturn ((Math.abs(stop.stopLat - station.stopLat) < 0.005)\n\t\t\t\t\t\t&& (Math.abs(stop.stopLon - station.stopLon) < 0.005)\n\t\t\t\t\t\t&& (stop.locationType === 1));\n\t\t\t\t}).map(station => station.stopId);\n\t\t\t\tlet platformIds: string[] = [];\n\t\t\t\tthis.state.stations.stops.forEach(stop => {\n\t\t\t\t\tif (stationIds.includes(stop.parentStation || '-1') && (stop.locationType === 0)) {\n\t\t\t\t\t\tplatformIds.push(stop.stopId);\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t\tconst stops = this.state.stations.stops.filter(stop => {\n\t\t\t\t\treturn (stationIds.includes(stop.parentStation || '-1')\n\t\t\t\t\t\t|| stationIds.includes(stop.stopId)\n\t\t\t\t\t\t|| platformIds.includes(stop.parentStation || '-1'));\n\t\t\t\t});\n\n\t\t\t\tconst stopIds = stops.map(stop => stop.stopId);\n\t\t\t\tconst pathways = this.state.stations.pathways.filter(pathway => {\n\t\t\t\t\treturn stopIds.includes(pathway.fromStopId) ||\n\t\t\t\t\t\tstopIds.includes(pathway.toStopId);\n\t\t\t\t});\n\n\t\t\t\tconst vehicleBoardings = this.state.stations.vehicleBoardings.filter(vehicleBoarding => {\n\t\t\t\t\treturn stopIds.includes(vehicleBoarding.boardingAreaId);\n\t\t\t\t});\n\n\t\t\t\tthis.setState({\n\t\t\t\t\tselectedStation: {\n\t\t\t\t\t\tstops,\n\t\t\t\t\t\tpathways,\n\t\t\t\t\t\tvehicleBoardings,\n\t\t\t\t\t\tlevels: this.state.stations.levels,\n\t\t\t\t\t\tvehicles: this.state.stations.vehicles\n\t\t\t\t\t},\n\t\t\t\t\tmode: \"STATION_BUILDER\"\n\t\t\t\t});\n\t\t\t}\n\t\t}\n\t}\n\n\tprivate handleLoadFeedClick = () => {\n\t\tthis.state.mapObjects.forEach(mapObject => {\n\t\t\tmapObject.setMap(null);\n\t\t});\n\t\tthis.setState({\n\t\t\tmode: \"FILE_UPLADING\",\n\t\t\tstations: null,\n\t\t\tselectedStation: null,\n\t\t\tuntouchedFiles: {},\n\t\t\tmapObjects: []\n\t\t});\n\t}\n\n\tprivate handleDownloadClick = () => {\n\t\tif (this.state.stations) {\n\t\t\tthis.setState({\n\t\t\t\tisLoading: true\n\t\t\t});\n\n\t\t\tlet stopsTxt = DataService.getStopGTFSHeader() + \"\\n\";\n\t\t\tthis.state.stations.stops.forEach((stop: Stop) => {\n\t\t\t\tstopsTxt += DataService.stopToGTFS(stop) + \"\\n\";\n\t\t\t});\n\n\t\t\tlet pathwaysTxt = DataService.getPathwayGTFSHeader() + \"\\n\";\n\t\t\tthis.state.stations.pathways.forEach((pathway: Pathway) => {\n\t\t\t\tpathwaysTxt += DataService.pathwayToGTFS(pathway) + \"\\n\";\n\t\t\t});\n\n\t\t\tlet levelsTxt = DataService.getLevelGTFSHeader() + \"\\n\";\n\t\t\tthis.state.stations.levels.forEach((level: Level) => {\n\t\t\t\tlevelsTxt += DataService.levelToGTFS(level) + \"\\n\";\n\t\t\t});\n\n\t\t\tlet vehicleBoardingsTxt = DataService.getVehicleBoardingGTFSHeader() + \"\\n\";\n\t\t\tthis.state.stations.vehicleBoardings.forEach((vehicleBoarding: VehicleBoarding) => {\n\t\t\t\tvehicleBoardingsTxt += DataService.vehicleBoardingToGTFS(vehicleBoarding) + \"\\n\";\n\t\t\t});\n\n\t\t\tconst zip = new JSZip();\n\t\t\tzip.file('stops.txt', stopsTxt);\n\t\t\tzip.file('pathways.txt', pathwaysTxt);\n\t\t\tzip.file('levels.txt', levelsTxt);\n\t\t\tzip.file('vehicle_boardings.txt', vehicleBoardingsTxt);\n\t\t\tfor (const fileName in this.state.untouchedFiles) {\n\t\t\t\tzip.file(fileName, this.state.untouchedFiles[fileName]);\n\t\t\t}\n\t\t\t\n\t\t\tzip.generateAsync({\n\t\t\t\ttype: \"blob\",\n\t\t\t\tplatform: \"UNIX\",\n\t\t\t\tcompression: \"DEFLATE\",\n\t\t\t\tcompressionOptions: {\n\t\t\t\t\tlevel: 5\n\t\t\t\t}\n\t\t\t}).then((blob) => {\n\t\t\t\tthis.setState({\n\t\t\t\t\tisLoading: false\n\t\t\t\t});\n\t\t\t\tsaveAs(blob, \"gtfs.zip\");\n\t\t\t});\n\t\t}\n\t}\n\n\trender() {\n\t\treturn (\n\t\t\t<div className=\"gtfs-stations-builder-container\">\n\t\t\t\t{this.state.isLoading && <div className=\"loader\"></div>}\n\n\t\t\t\t{this.state.mode === \"FILE_UPLADING\" && (\n\t\t\t\t\t<div className=\"controls\">\n\t\t\t\t\t\t<img src={ewayLogo} alt=\"\" />\n\t\t\t\t\t\t<h2>GTFS station builder</h2>\n\t\t\t\t\t\t<div>\n\t\t\t\t\t\t\tSelect stops.txt, pathways.txt and levels.txt (you can also select a .zip containing those files):\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<input\n\t\t\t\t\t\t\ttype=\"file\"\n\t\t\t\t\t\t\tmultiple={true}\n\t\t\t\t\t\t\tonChange={this.handleFileChange}\n\t\t\t\t\t\t/>\n\t\t\t\t\t\t<br />\n\t\t\t\t\t\t<div>OR</div>\n\t\t\t\t\t\t<br />\n\t\t\t\t\t\t<button onClick={this.loadSampleDataMsk}>LOAD SAMPLE DATA [Moscow pathways and vehicles]</button>\n\t\t\t\t\t\t<br />\n\t\t\t\t\t\t<button onClick={this.loadSampleDataParis}>LOAD SAMPLE DATA [Go deeper Paris pathways]</button>\n\t\t\t\t\t</div>\n\t\t\t\t)}\n\n\t\t\t\t{this.state.mode === \"STATION_SELECTION\" && this.state.stations && <div>\n\t\t\t\t\t<div className=\"panel\">\n\t\t\t\t\t\t<button className=\"download\" onClick={this.handleDownloadClick}>Download</button>\n\t\t\t\t\t\t<button className=\"load\" onClick={this.handleLoadFeedClick}>Load another feed</button>\n\t\t\t\t\t</div>\n\t\t\t\t</div>}\n\t\t\t\t<div className={\"map\" + (this.state.mode !== \"STATION_SELECTION\" ? \" hidden\" : \"\")} ref={this.mapRef}></div>\n\n\t\t\t\t{this.state.mode === \"STATION_BUILDER\" && this.state.selectedStation && (\n\t\t\t\t\t<StationBuilder\n\t\t\t\t\t\tdata={this.state.selectedStation}\n\t\t\t\t\t\tonSave={this.handleStationSave}\n\t\t\t\t\t\tonCancel={this.handleStationCancel}></StationBuilder>\n\t\t\t\t)}\n\t\t\t</div>\n\t\t);\n\t}\n}\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport StationBuilder from './components/StationBuilder';\nimport App from './App';\n\nwindow.GtfsStationBuilder = {\n    mount: (props, container) => {\n        ReactDOM.render(<StationBuilder {...props} />, container);\n    },\n    unmount: (container) => {\n        ReactDOM.unmountComponentAtNode(container);\n    }\n}\n\nconst ref = document.getElementById(\"gtfs-station-builder-root\");\nif (ref) {\n\tReactDOM.render(<App />, ref);\n}\n","module.exports = \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABgAAAAYCAYAAADgdz34AAAABmJLR0QA/wD/AP+gvaeTAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAB3RJTUUH4wgODi84vCtShwAAAMVJREFUSMftlbENwjAUREPKdLAFtEyRiFBSwgaho6Uge8Ak3oIVMgAiBdWjOYkPMorskAIpJ30pts/35G9LSZJRfyEgBxpVPgSg4aUmZG8awZsMcYLCnKAY6h4ACN2XdoSWgPOBYmCf4bUNwqM+4StlPICqT4u+AZzy9r7WGF2BLAZwU8CsAwBw/gnA41kArXzb3i0yawfgpO+dfC0wDwGU9pKBqarSHMBS3ovGx+hn6lFtfBmwiX1Na7XrrnJAOf5fRr3pCeqXbYu/ZJnBAAAAAElFTkSuQmCC\"","module.exports = \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABgAAAAYCAYAAADgdz34AAAABmJLR0QA/wD/AP+gvaeTAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAB3RJTUUH4wgODwAgvJmYiwAAAOZJREFUSMftlDEOgjAUhltGNr2Frp4CIquj3gA3Vwe5h56kt/AKHMDI4PS5PGJDGmlpWYx/0oTS9nt//sJT6q+BAOy5nguutdZKKZV5HiyAVkbhCw9x1vJR64L3Gq5lE5LQyZxbkNIyWfo4D77kHtK79HWejUArwLjyThFLY8NwKOZ73grjBdSuArE/jBHO0XWhlu5APqXAQwDLkQIA1+gCrmiANdDJ6/3kiIZw4ARc5PkgSx2wCilQOaJYALVcPMBG9t5kfg7ujF/UWPtyYBcDN8BThgGqyY0rWfOatTP69KJU8N/QG1gTxBTCzhI8AAAAAElFTkSuQmCC\"","module.exports = \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAcNJREFUeNp8kr8vQ1EUx799rVYbXiVIlPrNRFKJ+BFCYhRCSNjEwG4xmIjdYvAHGCwNq5UQkUgk2Egs0kgsLJRWOb7nvVulWif5vPfOved77n33fr34P8IGjfdCBZ4ioklDI/GTZ3JJ4uTgvxX7yCGRIrySLVJVSNxLbrWwhMygVDZRJnHYfNsyDb8Eco12ScVPsSZHOtkCr+wgLNLcLdI/KjI4LjIwJhKNyTYbtcPKNllTodc0mCVLXAEbsDHX1w8EQ0Ca5/aecQnbiNXVI3T/gGNk8AZpYvm+xYcyoV1GEcB8JAp8Mkml+f7MobnXwoJdjRH4tFwbDKvYNgl6dKIm4q5YKFLcUVMjupyLcaLVZ67JGSnXzXAVZD5+CwP+X6md+wxpgxdzz7jDhyv2eP6IviOZRML5RyceLdPgQrMTmi19Qb8ESooa5en6BmeuKfU/Ly0zrg5LnXJiBUkgcV9YnUhgnfNHboNzcpyd8hmHOXe8iKDcolIk0iHSMSRS2ynXzHXc1LyR6fz+1WQv26SBhlL3LVA0RVdGcwZS8bK5/j+hB7yatXQeuu/T/JU9Rc6qXU1C2khQT5tcGbs//iz8EmAAjZWhjml2ZOkAAAAASUVORK5CYII=\""],"sourceRoot":""}