{"version":3,"sources":["images/circle-blue.png","images/circle-black.png","images/eway-logo.png","interfaces/Stop.tsx","interfaces/Pathway.tsx","services/VisService.tsx","components/Vis.tsx","components/StopDialog.tsx","components/PathwayDialog.tsx","services/DataService.tsx","components/StationBuilder.tsx","services/FileService.tsx","map/TxtOverlay.tsx","App.tsx","index.js","images/wheelchair-accessible.png","images/wheelchair-not-possible.png","images/circle-red.png"],"names":["module","exports","LocationTypeMap","Platform","Station","Entrance/Exit","GenericNode","BoardingArea","LocationTypeOnNodeLabelMap","WheelchairBoardingMap","NoInfo","Accessible","NotPossible","LocationTypeColors","PathwayModeMap","Walkway","Stairs","MovingSidewalk","Escalator","Lift","FareGate","ExitGate","PathwayModeOnEdgeLabelMap","PathwayModeColors","VisService","from","to","hash","hashReversedDir","undefined","this","edgeRoundness","type","roundness","stop","label","stopName","locationType","stopId","platformCode","signpostedAs","parentStation","vehiclesInfo","pathway","pathwayMode","traversalTime","id","getNodeLabel","color","x","y","image","wheelchairBoarding","wheelchairAccessibleImage","wheelchairNotPossibleImage","shape","size","node","includes","stations","coefs","newStopId","toString","stopLat","latX","latK","stopLon","lonX","lonK","pathwayId","fromStopId","toStopId","highlight","arrows","isBidirectional","smooth","getEdgeSmoothVariant","getEdgeLabel","edge","newPathwayId","reversedSignpostedAs","Vis","network","handleDocumentKeydown","e","_this","props","isDialogShown","keyCode","selection","getSelection","nodes","length","edges","onItemDelete","dataToDelete","deleteSelected","_this2","container","document","getElementById","data","stops","filter","map","convertStopToNode","pathways","convertPathwayToEdge","options","borderWidth","width","selectionWidth","font","align","manipulation","enabled","initiallyActive","addNode","onStopAdd","editNode","onStopEdit","deleteNode","callback","getConnectedEdges","addEdge","onPathwayAdd","editEdge","movedEdge","body","get","updatePathwayInEdge","deleteEdge","interaction","dragView","hoverConnectedEdges","selectConnectedEdges","zoomView","physics","locales","gtfs","edit","del","back","addDescription","edgeDescription","editEdgeDescription","createEdgeError","deleteClusterError","editClusterError","locale","vis","Network","on","edgesDataSet","nodesDataSet","event","srcEvent","ctrlKey","position","pointer","canvas","onFareZoneAdd","forEach","add","onPathwayEdit","update","newNode","preventDefault","editEdgeMode","nodeId","onStopDragEnd","addEventListener","removeEventListener","react_default","a","createElement","Component","StopDialog","Object","classCallCheck","possibleConstructorReturn","getPrototypeOf","call","vehicleSelectRef","React","createRef","handleCancel","onCancel","handleApply","state","onApply","objectSpread","vehicleBoardings","alert","handleParentStationChange","setState","target","value","handleLevelChange","levelId","handleLocationTypeChange","Number","platforms","handleWheelchairBoardingChange","handleStopNameChange","handlePlatformCodeChange","handleSignpostedAsChange","handleKeyDown","handleVehicleDeleteClick","vehicleKey","index","findIndex","vehicleBoarding","boardingAreaId","vehicleCategoryId","childSequence","doorId","splice","forceUpdate","handleVehicleAddClick","current","selectedVehicleProps","split","doorSequence","vehicles","vehicle","platformIds","child","children","find","door","doors","curKey","push","cloneDeep","parentStationOptions","station","key","platform","join","parentPlatformOptions","levelOptions","levels","level","levelIndex","levelName","locationTypeOptions","wheelchairBoardingOptions","wheelchairBoardingKey","vehiclesToSelect","vehicleToSelect","className","onKeyDown","onChange","disabled","cellPadding","cellSpacing","vehicleCategoryName","onClick","colSpan","ref","PathwayDialog","parseFloat","maxSlope","minWidth","isNaN","handlePathwayModeChange","handleIsBidirectionalChange","checked","handleLengthChange","replace","handleTraversalTimeChange","parseInt","handleStairCountChange","stairCount","handleMaxSlopeChange","handleMinWidthChange","handleReversedSignpostedAsChange","pathwayModeOptions","pathwayModeKey","DataService","recordFromGTFS","rows","records","header","row","cells","csvToArray","cell","cellIndex","recordGTFS","fieldName","escapeText","vehicleCategory","vehicleCoupling","parentId","childId","vehicleDoor","text","m0","m1","m2","m3","test","StationBuilder","mapRef","handleDialogCancel","handleStopAddMode","prepareNewNode","selectedStop","handleStopEditMode","handlePathwayAddMode","prepareNewEdge","selectedPathway","handlePathwayEditMode","handleStopDialogApply","newVehicleBoardings","attachVehiclesInfoToStop","stopIndex","curStop","attachStopToNode","handlePathwayDialogApply","pathwayIndex","curPathway","attachPathwayToEdge","handleItemDelete","some","deletedStopsIds","deletedPathwaysIds","handleSaveClick","oldVehicleBoardings","deletedVehicleBoardingsIds","oldVehicleBoarding","oldId","getVehicleBoardingId","newVehicleBoarding","onSave","handleCancelClick","handleStopDragEnd","handleFareZoneAdd","node1","node2","edge1","edge2","Error","minLat","minLon","maxLat","maxLon","latGap","lonGap","mapMarkers","bounds","google","maps","LatLngBounds","extend","lat","lng","mapDiv","appendChild","fitBounds","console","log","Map","Marker","icon","circleBlueImage","circleRedImage","marker","setMap","_this3","Vis_Vis","StopDialog_StopDialog","PathwayDialog_PathwayDialog","FileService","readUploadedFileAsText","_callee","inputFile","temporaryFileReader","regenerator_default","wrap","_context","prev","next","FileReader","abrupt","Promise","resolve","reject","onerror","abort","DOMException","onload","result","readAsText","TxtOverlay","pos","pos_","text_","class_","map_","div_","onAdd","div","innerHTML","getProjection","fromLatLngToDivPixel","style","left","top","getPanes","floatPane","draw","onRemove","parentNode","removeChild","hide","visibility","show","toggle","toggleDOM","getMap","OverlayView","App","requiredFileNames","handleFileChange","files","isLoading","zipFile","handleZip","Array","handleFiles","handleStationSave","dataNew","dataActual","vehicleBoardingNew","vehicleBoardingNewId","curVehicleBoarding","vehicleBoardingId","vehicleBoardingIndex","mode","handleStationCancel","loadSampleDataMsk","fetch","then","response","ok","blob","sampleZipBlob","loadSampleDataParis","handleStationSelect","stationId","stationIds","Math","abs","stopIds","selectedStation","handleLoadFeedClick","mapObjects","mapObject","untouchedFiles","handleDownloadClick","stopsTxt","getStopGTFSHeader","stopToGTFS","pathwaysTxt","getPathwayGTFSHeader","pathwayToGTFS","levelsTxt","getLevelGTFSHeader","levelToGTFS","vehicleBoardingsTxt","getVehicleBoardingGTFSHeader","vehicleBoardingToGTFS","zip","JSZip","fileName","file","generateAsync","compression","compressionOptions","saveAs","fileNames","filePromises","all","name","indexOf","checkRequiredFiles","handleFilePromises","loadAsync","relativePath","async","message","communicationPacket","fileContents","fileContent","fileIndex","extractData","minStopId","minPathwayId","extractVehicles","showStationsOnMap","vehicleCategoriesTxt","vehicleCouplingsTxt","vehicleDoorsTxt","categories","fromGTFS","vehicleCategoryFromGTFS","couplings","vehicleCouplingFromGTFS","vehicleDoorFromGTFS","categoriesHash","category","doorsHash","coupling","values","_this4","circleBlackImage","LatLng","addListener","requiredFileName","stopFromGTFS","pathwayFromGTFS","levelFromGTFS","vehicleBoardingFromGTFS","src","ewayLogo","alt","multiple","StationBuilder_StationBuilder","window","GtfsStationBuilder","mount","ReactDOM","render","unmount","unmountComponentAtNode","App_App"],"mappings":"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","file":"static/js/main.b93cd77f.chunk.js","sourcesContent":["module.exports = \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAe5JREFUeNqEk89LVFEUx7++Z+/hNI0TjaXFMKmN7QZi1CI0IQJ3Gi7cmhi0DMRFi9BahP4DbVq0DQQ3LXIlRpo/iCKlRQsTxvGpDCXDTNn8al7f87xPQ9/Ygc/jnvvu95x77zlXx8lWqxArei2oqiDqVUSIQX6SFTJJZk/KeJ28JXYFfpPnJOS1g3byijRBOwW09AAXbwKn6ynbARJzwPo08Ccva6fIfZJ2AwTJa9KJYCPQMYaGGwM47wd0namZO5kGvi+9BBbGKVsTzRPyVFcB+slD6CZwewKxO4Pw8eQFCotloERq+etC8zWkchxY7zmZu0zNG40foccJ09SNs61DzmHzFJXtQ8TXuF8z/gAId8lqCXBLxAHlMEUc9axB0fa+4QKDRM7Jupg71VytymQ4rnkGOrOUjgQwtSORjIA78kmAX6rOQCbpiKu8RMr2CvxkLdfd1VSAz45rLeDrRhaGVrlREkmWdPuDDEvSXO5S6bA8tpaB+cewMt7iTZYSS884mBf3I5lzy7gpV0PaJMjejw2kjKsoGiFUM0WKB0ysfUFu5hH3+gJOMmCYfPo3QZ3qsP22DYRtRO/aiN2z0dJrw3/JbeccGVHlP2ZyvaPkm8c7kNe4SPr+9xrFotIk5Aqpkdsmq+SdGh/YXwEGAGUQly2iFN0tAAAAAElFTkSuQmCC\"","module.exports = \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAABmJLR0QA/wD/AP+gvaeTAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAB3RJTUUH4wwCCwsSL+WhZAAAANpJREFUOMud0kEuBGEUBOBvfoywGENYkzBXYCduIHEAG1ew5hQuIZyB2LDEXtygV8QkI2mb19Fp3Z3xV1LJv/ir6uW9WtCPtSDM2j4MOkTHwW0M8YEXXOOuL/EA9yg7+IUrbLaJ9/GGcqnDYPn3fYNxXTzGQ09yGy/rBqeNhF6uSyXeMYEUI5UZPEsYYUcedlOcaZhpsJrwGXfOQVEZPGeIv6Nc4AjTfy7wCRuVwWI0bF7xFCfNkbZwO6f4PM7/ByNcVJVucIbHZvKgY0ETHGIPKyjwGnUv6h9/ALhFdZUDpz63AAAAAElFTkSuQmCC\"","module.exports = \"data:image/png;base64,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\"","export default interface Stop {\n\tstopId: string;\n\tstopLat: number,\n\tstopLon: number,\n\tparentStation?: string,\n    stopName?: string;\n    locationType: number;\n    wheelchairBoarding: number;\n    levelId?: string;\n    platformCode?: string;\n\tsignpostedAs?: string;\n\n\tvehiclesInfo?: string;\n}\n\nexport const LocationTypeMap: { [key: string]: number } = {\n    \"Platform\": 0,\n    \"Station\": 1,\n    \"Entrance/Exit\": 2,\n    \"GenericNode\": 3,\n    \"BoardingArea\": 4\n}\n\nexport const LocationTypeOnNodeLabelMap = [\n    \"Platform\",\n    \"Station\",\n    \"E/E\",\n    \"GN\",\n    \"BA\"\n]\n\nexport const WheelchairBoardingMap: { [key: string]: number } = {\n    \"NoInfo\": 0,\n    \"Accessible\": 1,\n    \"NotPossible\": 2\n}\n\nexport const LocationTypeColors = [\n    \"#6898ee\",\n    \"#333333\",\n    \"#f2565c\",\n    \"#999999\",\n    \"#7ecb7d\"\n]\n","export default interface Pathway {\n    pathwayId: string;\n    fromStopId: string;\n    toStopId: string;\n    pathwayMode: number;\n    isBidirectional: boolean;\n    length?: number;\n    traversalTime?: number;\n    stairCount?: number;\n    maxSlope?: number;\n    minWidth?: number;\n    signpostedAs?: string;\n    reversedSignpostedAs?: string;\n}\n\nexport const PathwayModeMap: { [key: string]: number } = {\n    \"Walkway\": 1,\n    \"Stairs\": 2,\n    \"MovingSidewalk\": 3,\n    \"Escalator\": 4,\n    \"Lift\": 5,\n    \"FareGate\": 6,\n    \"ExitGate\": 7\n}\n\nexport const PathwayModeOnEdgeLabelMap = [\n    \"\",\n    \"Walkway\", // pathway modes begin from 1\n    \"Stairs\",\n    \"MovingSidewalk\",\n    \"Escalator\",\n    \"Lift\",\n    \"FareGate\",\n    \"ExitGate\"\n]\n\nexport const PathwayModeColors = [\n    \"\",\n    \"#000000\", // pathway modes begin from 1\n    \"#6898ee\",\n    \"#888888\",\n    \"#7ecb7d\",\n    \"#f38e1a\",\n    \"#9772c4\",\n    \"#f2565c\"\n]\n","import Stop, { LocationTypeOnNodeLabelMap, LocationTypeColors, WheelchairBoardingMap, LocationTypeMap } from \"../interfaces/Stop\";\nimport Pathway, { PathwayModeOnEdgeLabelMap, PathwayModeColors, PathwayModeMap } from \"../interfaces/Pathway\";\nimport VisNode from \"../interfaces/VisNode\";\nimport VisEdge from \"../interfaces/VisEdge\";\nimport wheelchairAccessibleImage from '../images/wheelchair-accessible.png';\nimport wheelchairNotPossibleImage from '../images/wheelchair-not-possible.png';\n\n// This service defines how to draw things\n//   and take care of stop-node and pathway-edge convertion\nexport default class VisService {\n\tpublic static newStopId = -1;\n\tpublic static newPathwayId = -1;\n\tstatic edgeRoundness: {\n\t\t[key: string]: number\n\t} = {};\n\n\tstatic getEdgeSmoothVariant(from: string, to: string): { type: string, roundness: number } {\n\t\tlet hash = from + \":\" + to + \":\" + 1;\n\t\tlet hashReversedDir = from + \":\" + to + \":\" + 2;\n\t\tif (from > to) {\n\t\t\thash = to + \":\" + from + \":\" + 2;\n\t\t\thashReversedDir = to + \":\" + from + \":\" + 1;\n\t\t}\n\t\tif (this.edgeRoundness[hash] === undefined) {\n\t\t\tthis.edgeRoundness[hash] = 0.2;\n\t\t\tthis.edgeRoundness[hashReversedDir] = 0.0;\n\t\t}\n\t\telse {\n\t\t\tthis.edgeRoundness[hash] += 0.2;\n\t\t}\n\t\treturn {\n\t\t\ttype: \"curvedCW\",\n\t\t\troundness: this.edgeRoundness[hash]\n\t\t}\n\t}\n\n    static getNodeLabel(stop: Stop): string {\n        // let prefix = LocationTypeOnNodeLabelMap[stop.locationType];\n        let prefix = \"\";\n        let label =  stop.stopName ? prefix + stop.stopName + '\\n' : prefix;\n        if (stop.locationType === 0) { // Platform\n\t\t\tlabel = prefix + ' #' + stop.stopId;\n\t\t\tif (stop.platformCode) {\n                label += '\\nCode: \"' + stop.platformCode + '\"';\n            }\n            if (stop.signpostedAs) {\n                label += '\\nSignposted: \"' + stop.signpostedAs + '\"';\n            }\n\t\t}\n\t\telse if (stop.locationType === 2) { // Entrance/Exit\n\t\t\tif (stop.platformCode) {\n                label += 'Number: \"' + stop.platformCode + '\"';\n            }\n\t\t}\n\t\telse if (stop.locationType === 4) { // Boarding Area\n\t\t\tlabel += 'for #' + stop.parentStation;\n\t\t\tif (stop.vehiclesInfo) {\n\t\t\t\tlabel += '\\n' + stop.vehiclesInfo;\n\t\t\t}\n\t\t}\n        return label;\n    }\n\n    static getEdgeLabel(pathway: Pathway): string {\n        let prefix = PathwayModeOnEdgeLabelMap[pathway.pathwayMode];\n        let label = prefix;\n        if (pathway.traversalTime) {\n            label += '\\n' + pathway.traversalTime + ' s'\n        }\n        return label;\n\t}\n\n\tstatic convertStopToNode(stop: Stop): VisNode {\n        return {\n            id: stop.stopId,\n            label: VisService.getNodeLabel(stop),\n            color: LocationTypeColors[stop.locationType],\n            x: 0,\n            y: 0,\n            image: stop.wheelchairBoarding === 1 ? wheelchairAccessibleImage : stop.wheelchairBoarding === 2 ? wheelchairNotPossibleImage : \"\",\n            shape: 'circularImage',\n            size: 12,\n            stop: stop\n        }\n    }\n\n    static attachStopToNode(stop: Stop, node: VisNode): VisNode {\n        if ([3, 4].includes(stop.locationType)) {\n            stop.wheelchairBoarding = WheelchairBoardingMap.NoInfo;\n        }\n        node.label = VisService.getNodeLabel(stop);\n        node.color = LocationTypeColors[stop.locationType];\n        node.shape = 'circularImage';\n        node.size = 12;\n        node.image = stop.wheelchairBoarding === 1 ? wheelchairAccessibleImage : stop.wheelchairBoarding === 2 ? wheelchairNotPossibleImage : \"\";\n        node.stop = stop;\n        return node;\n    }\n\n    static prepareNewNode(node: VisNode, stations: Stop[], coefs:{[key: string]: number}): VisNode {\n\t\tnode.id = this.newStopId.toString();\n        node.label = \"\";\n        node.color = LocationTypeColors[LocationTypeMap.GenericNode];\n        node.shape = 'circularImage';\n\t\tnode.size = 12;\n\t\tnode.image = \"\";\n        node.stop = {\n\t\t\tstopId: this.newStopId.toString(),\n\t\t\tstopLat: ((node.y || 0) - coefs.latX) / coefs.latK,\n\t\t\tstopLon: ((node.x || 0) - coefs.lonX) / coefs.lonK,\n\t\t\tparentStation: stations[0].stopId,\n            stopName: \"\",\n            locationType: LocationTypeMap.GenericNode,\n            wheelchairBoarding: WheelchairBoardingMap.NoInfo,\n            platformCode: \"\",\n            signpostedAs: \"\"\n\t\t};\n\t\tthis.newStopId--;\n        return node;\n    }\n\n    static convertPathwayToEdge(pathway: Pathway): VisEdge {\n        return {\n            id: pathway.pathwayId,\n            from: pathway.fromStopId,\n            to: pathway.toStopId,\n            color: {\n                color: PathwayModeColors[pathway.pathwayMode],\n                highlight: PathwayModeColors[pathway.pathwayMode]\n            },\n            arrows: {\n                from: pathway.isBidirectional,\n                to: true\n\t\t\t},\n\t\t\tsmooth: this.getEdgeSmoothVariant(pathway.fromStopId, pathway.toStopId),\n            label: VisService.getEdgeLabel(pathway),\n            pathway: pathway\n\t\t};\n    }\n\n    static attachPathwayToEdge(pathway: Pathway, edge: VisEdge): VisEdge {\n        edge.color.color = PathwayModeColors[pathway.pathwayMode];\n        edge.color.highlight = PathwayModeColors[pathway.pathwayMode];\n        edge.arrows.from = pathway.isBidirectional;\n        edge.label = VisService.getEdgeLabel(pathway);\n\t\tedge.pathway = pathway;\n        return edge;\n\t}\n\t\n\tstatic updatePathwayInEdge(edge: VisEdge): VisEdge {\n\t\tedge.pathway.fromStopId = edge.from;\n\t\tedge.pathway.toStopId = edge.to;\n        return edge;\n    }\n\n    static prepareNewEdge(edge: VisEdge): VisEdge {\n\t\tedge.id = this.newPathwayId.toString();\n        edge.color = {\n            color: PathwayModeColors[PathwayModeMap.Stairs],\n            highlight: PathwayModeColors[PathwayModeMap.Stairs]\n        }\n        edge.arrows = {\n            from: true,\n            to: true\n        };\n        edge.label = '';\n        edge.pathway = {\n\t\t\tpathwayId: this.newPathwayId.toString(),\n\t\t\ttraversalTime: 10,\n            fromStopId: edge.from,\n            toStopId: edge.to,\n            pathwayMode: PathwayModeMap.Stairs,\n            isBidirectional: true,\n            signpostedAs: \"\",\n            reversedSignpostedAs: \"\"\n\t\t}\n\t\tedge.smooth = this.getEdgeSmoothVariant(edge.from, edge.to);\n\t\tthis.newPathwayId--;\n        return edge;\n    }\n}\n","import React, { Component } from 'react';\nimport vis from 'vis';\nimport 'vis/dist/vis-network.min.css';\nimport './Vis.scss';\nimport Stop from '../interfaces/Stop';\nimport VisNode from '../interfaces/VisNode';\nimport VisService from '../services/VisService';\nimport VisEdge from '../interfaces/VisEdge';\nimport Communication from '../interfaces/Communication';\nimport Pathway from '../interfaces/Pathway';\n\nexport interface VisState {\n\n}\n\nexport interface VisProps {\n\tdata: Communication,\n\tonStopAdd: (node: VisNode, callback: (node?: VisNode) => void) => void,\n\tonStopEdit: (node: VisNode, callback: (node?: VisNode) => void) => void,\n\tonItemDelete: (dataToDelete: { nodes: string[], edges: string[] }, callback: (dataToDelete?: { nodes: string[], edges: string[] }) => void) => void,\n\tonStopDragEnd: (nodeId: string, position: {x: number, y: number}) => void,\n\tonPathwayAdd: (edge: VisEdge, callback: (edge?: VisEdge) => void) => void,\n\tonPathwayEdit: (edge: VisEdge, callback: (edge?: VisEdge) => void) => void,\n\tonFareZoneAdd: (position: {x: number, y: number}, callback: (nodes: VisNode[], edges: VisEdge[]) => void) => void,\n\tlatK: number,\n\tlatX: number,\n\tlonK: number,\n\tlonX: number,\n\tisDialogShown: boolean\n}\n\nexport default class Vis extends Component<VisProps, VisState> {\n\tprivate network: any;\n\n\tpublic componentDidMount() {\n\t\tvar container = document.getElementById('vis');\n\t\tif (!container) {\n\t\t\treturn;\n\t\t}\n\n\t\t// get nodes from stops\n\t\tconst nodes: VisNode[] = this.props.data.stops.filter((stop: Stop) => {\n\t\t\treturn stop.locationType !== 1;\n\t\t}).map((stop: Stop): VisNode => {\n\t\t\tconst node = VisService.convertStopToNode(stop);\n\t\t\t// Transform stop coordinates into Vis x:y\n\t\t\tnode.x = this.props.lonK * stop.stopLon + this.props.lonX;\n\t\t\tnode.y = this.props.latK * stop.stopLat + this.props.latX;\n\t\t\treturn node;\n\t\t});\n\n\t\t// get edges from pathways\n\t\tconst edges: VisEdge[] = this.props.data.pathways.map((pathway: Pathway): VisEdge => {\n\t\t\tconst edge = VisService.convertPathwayToEdge(pathway);\n\t\t\treturn edge;\n\t\t});\n\n\t\t// configure vis\n\t\tvar options = {\n\t\t\tnodes: {\n\t\t\t\tborderWidth: 2\n\t\t\t},\n\t\t\tedges: {\n\t\t\t\twidth: 1,\n\t\t\t\tselectionWidth: 2,\n\t\t\t\tsmooth: true,\n\t\t\t\tfont: {\n\t\t\t\t\talign: 'middle',\n\t\t\t\t\tsize: 10\n\t\t\t\t}\n\t\t\t},\n\t\t\tmanipulation: {\n\t\t\t\tenabled: true,\n\t\t\t\tinitiallyActive: true,\n\t\t\t\taddNode: this.props.onStopAdd,\n\t\t\t\teditNode: this.props.onStopEdit,\n\t\t\t\tdeleteNode: (dataToDelete: { nodes: string[], edges: string[] }, callback: (dataToDelete?: { nodes: string[], edges: string[] }) => void): void => {\n\t\t\t\t\tdataToDelete.edges = network.getConnectedEdges(dataToDelete.nodes[0]);\n\t\t\t\t\tthis.props.onItemDelete(dataToDelete, callback);\n\t\t\t\t},\n\t\t\t\taddEdge: this.props.onPathwayAdd,\n\t\t\t\teditEdge: (movedEdge: VisEdge, callback: (edge: VisEdge) => {}) => {\n\t\t\t\t\tlet edgesDataSet = network.body.data.edges;\n\t\t\t\t\tlet edge = edgesDataSet.get(movedEdge.id);\n\t\t\t\t\tedge.from = movedEdge.from;\n\t\t\t\t\tedge.to = movedEdge.to;\n\t\t\t\t\tedge = VisService.updatePathwayInEdge(edge);\n\t\t\t\t\tcallback(edge);\n\t\t\t\t},\n\t\t\t\tdeleteEdge: this.props.onItemDelete\n\t\t\t},\n\t\t\tinteraction: {\n\t\t\t\tdragView: true,\n\t\t\t\thoverConnectedEdges: false,\n\t\t\t\tselectConnectedEdges: false,\n\t\t\t\tzoomView: true\n\t\t\t},\n\t\t\tphysics: false,\n\t\t\tlocales: {\n\t\t\t\t'gtfs': {\n\t\t\t\t\tedit: 'Edit',\n\t\t\t\t\tdel: 'Delete selected',\n\t\t\t\t\tback: 'Back',\n\t\t\t\t\taddNode: 'Add Location',\n\t\t\t\t\taddEdge: 'Add Pathway',\n\t\t\t\t\teditNode: 'Edit Location',\n\t\t\t\t\teditEdge: 'Edit Pathway',\n\t\t\t\t\taddDescription: 'Click in an empty space to place a new location.',\n\t\t\t\t\tedgeDescription: 'Click on a location and drag the pathway to another location to connect them.',\n\t\t\t\t\teditEdgeDescription: 'Click on the control points and drag them to a location to connect to it.',\n\t\t\t\t\tcreateEdgeError: 'Cannot link pathways to a cluster.',\n\t\t\t\t\tdeleteClusterError: 'Clusters cannot be deleted.',\n\t\t\t\t\teditClusterError: 'Clusters cannot be edited.'\n\t\t\t\t}\n\t\t\t},\n\t\t\tlocale: 'gtfs'\n\t\t};\n\n\t\tlet network = new vis.Network(container, { nodes, edges }, options);\n\t\tthis.network = network;\n\n\t\tnetwork.on(\"doubleClick\", (e: any) => {\n\t\t\tconst selection = network.getSelection();\n\t\t\tconst edgesDataSet = network.body.data.edges;\n\t\t\tconst nodesDataSet = network.body.data.nodes;\n\t\t\tif (e.event.srcEvent.ctrlKey) {\n\t\t\t\tconst position = e.pointer.canvas;\n\t\t\t\tthis.props.onFareZoneAdd(position, (nodes: VisNode[], edges: VisEdge[]) => {\n\t\t\t\t\tnodes.forEach((node) => {\n\t\t\t\t\t\tnodesDataSet.add(node);\n\t\t\t\t\t});\n\t\t\t\t\tedges.forEach((edge) => {\n\t\t\t\t\t\tedgesDataSet.add(edge);\n\t\t\t\t\t});\n\t\t\t\t});\n\t\t\t}\n\t\t\telse {\n\t\t\t\tif (selection.nodes.length === 1) {\n\t\t\t\t\tnetwork.editNode();\n\t\t\t\t}\n\t\t\t\telse if (selection.edges.length === 1) {\n\t\t\t\t\tconst edge: any = edgesDataSet.get(selection.edges[0]);\n\t\t\t\t\tthis.props.onPathwayEdit(edge, (edge?: VisEdge) => {\n\t\t\t\t\t\tif (edge) {\n\t\t\t\t\t\t\tedgesDataSet.update(edge);\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t\telse {\n\t\t\t\t\tconst position = e.pointer.canvas;\n\t\t\t\t\tconst newNode: any = {\n\t\t\t\t\t\tx: position.x,\n\t\t\t\t\t\ty: position.y\n\t\t\t\t\t};\n\t\t\t\t\tthis.props.onStopAdd(newNode, (node?: VisNode) => {\n\t\t\t\t\t\tif (node) {\n\t\t\t\t\t\t\tnodesDataSet.add(node);\n\t\t\t\t\t\t}\n\t\t\t\t\t})\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\n\t\tnetwork.on(\"oncontext\", (e: any) => {\n\t\t\te.event.preventDefault();\n\t\t\tlet selection = network.getSelection();\n\t\t\tif (selection.edges.length === 1) {\n\t\t\t\tnetwork.editEdgeMode();\n\t\t\t}\n\t\t});\n\n\t\tnetwork.on(\"dragEnd\", (e: any) => {\n\t\t\tif (e.nodes.length !== 0) {\n\t\t\t\tconst nodeId = e.nodes[0];\n\t\t\t\tconst position = e.pointer.canvas;\n\t\t\t\tthis.props.onStopDragEnd(nodeId, position);\n\t\t\t}\n\t\t});\n\n\t\tdocument.addEventListener('keydown', this.handleDocumentKeydown);\n\t}\n\n\tpublic componentWillUnmount() {\n\t\tdocument.removeEventListener('keydown', this.handleDocumentKeydown);\n\t} \n\n\tprivate handleDocumentKeydown = (e: KeyboardEvent) => {\n\t\tif (!this.props.isDialogShown && e.keyCode === 8) {\n\t\t\tconst selection = this.network.getSelection();\n\t\t\tif ((selection.nodes.length === 1) || (selection.edges.length === 1)) {\n\t\t\t\tthis.props.onItemDelete(selection, (dataToDelete?: { nodes: string[], edges: string[] }) => {\n\t\t\t\t\tif (dataToDelete) {\n\t\t\t\t\t\tthis.network.deleteSelected();\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t}\n\t\t}\n\t}\n\n\trender() {\n\t\treturn (\n\t\t\t<div id=\"vis\"></div>\n\t\t);\n\t}\n}\n","import React, { Component, RefObject } from \"react\";\nimport \"./StopDialog.scss\";\nimport Stop, {\n\tLocationTypeMap,\n\tWheelchairBoardingMap,\n\tLocationTypeOnNodeLabelMap\n} from \"../interfaces/Stop\";\nimport Level from \"../interfaces/Level\";\nimport VehicleBoarding from \"../interfaces/VehicleBoarding\";\nimport Vehicle from \"../interfaces/Vehicle\";\nimport cloneDeep from 'lodash/cloneDeep';\n\nexport interface StopDialogProps {\n\tstop: Stop;\n\tstations: Stop[];\n\tplatforms: Stop[];\n\tlevels: Level[];\n\tvehicles: Vehicle[];\n\tvehicleBoardings: VehicleBoarding[];\n\tonCancel: () => void;\n\tonApply: (stop: Stop, vehicleBoardings: VehicleBoarding[]) => void;\n}\n\nexport interface StopDialogState {\n\tparentStation: string;\n\tstopName?: string;\n\tlocationType: number;\n\twheelchairBoarding: number;\n\tplatformCode?: string;\n\tsignpostedAs?: string;\n\tlevelId?: string;\n\tvehicleBoardings: VehicleBoarding[];\n}\n\nexport default class StopDialog extends Component<StopDialogProps, StopDialogState> {\n\tprivate vehicleSelectRef: RefObject<HTMLSelectElement> = React.createRef();\n\n\tconstructor(props: StopDialogProps) {\n\t\tsuper(props);\n\t\tthis.state = {\n\t\t\tparentStation: props.stop.parentStation || '-1',\n\t\t\tlevelId: props.stop.levelId || '-1',\n\t\t\tstopName: props.stop.stopName,\n\t\t\tlocationType: props.stop.locationType,\n\t\t\twheelchairBoarding: props.stop.wheelchairBoarding,\n\t\t\tplatformCode: props.stop.platformCode,\n\t\t\tsignpostedAs: props.stop.signpostedAs,\n\t\t\tvehicleBoardings: cloneDeep(props.vehicleBoardings)\n\t\t};\n\t}\n\n\tprivate handleCancel = () => {\n\t\tthis.props.onCancel();\n\t}\n\n\tprivate handleApply = () => {\n\t\t// Validate\n\t\tif ([0, 1, 2].includes(this.state.locationType) && !this.state.stopName) {\n\t\t\talert(\"Selected location type must have a name\");\n\t\t\treturn;\n\t\t}\n\n\t\tthis.props.onApply({\n\t\t\t...this.props.stop,\n\t\t\t...this.state\n\t\t}, this.state.vehicleBoardings);\n\t}\n\n\tprivate handleParentStationChange = (\n\t\tevent: React.ChangeEvent<HTMLSelectElement>\n\t) => {\n\t\tthis.setState({\n\t\t\tparentStation: event.target.value\n\t\t});\n\t}\n\n\tprivate handleLevelChange = (event: React.ChangeEvent<HTMLSelectElement>) => {\n\t\tthis.setState({\n\t\t\tlevelId: event.target.value\n\t\t});\n\t}\n\n\tprivate handleLocationTypeChange = (\n\t\tevent: React.ChangeEvent<HTMLSelectElement>\n\t) => {\n\t\tlet parentStation = '-1';\n\t\tif (Number(event.target.value) === 3) { // Station for Generic Node\n\t\t\tparentStation = this.props.stations[0].stopId.toString();\n\t\t}\n\t\telse if (Number(event.target.value) === 4) { // Platform for Boarding Area\n\t\t\tparentStation = this.props.platforms[0].stopId.toString();\n\t\t}\n\t\tthis.setState({\n\t\t\tlocationType: Number(event.target.value),\n\t\t\tparentStation\n\t\t});\n\t}\n\n\tprivate handleWheelchairBoardingChange = (\n\t\tevent: React.ChangeEvent<HTMLSelectElement>\n\t) => {\n\t\tthis.setState({\n\t\t\twheelchairBoarding: Number(event.target.value)\n\t\t});\n\t}\n\n\tprivate handleStopNameChange = (\n\t\tevent: React.ChangeEvent<HTMLInputElement>\n\t) => {\n\t\tthis.setState({\n\t\t\tstopName: event.target.value\n\t\t});\n\t}\n\n\tprivate handlePlatformCodeChange = (\n\t\tevent: React.ChangeEvent<HTMLInputElement>\n\t) => {\n\t\tthis.setState({\n\t\t\tplatformCode: event.target.value\n\t\t});\n\t}\n\n\tprivate handleSignpostedAsChange = (\n\t\tevent: React.ChangeEvent<HTMLInputElement>\n\t) => {\n\t\tthis.setState({\n\t\t\tsignpostedAs: event.target.value\n\t\t});\n\t}\n\n\tprivate handleKeyDown = (event: React.KeyboardEvent<HTMLDivElement>) => {\n\t\tif (event.keyCode === 13) {\n\t\t\tthis.handleApply();\n\t\t}\n\t}\n\n\tprivate handleVehicleDeleteClick = (vehicleKey: string) => {\n\t\tconst index = this.state.vehicleBoardings.findIndex(vehicleBoarding => {\n\t\t\tconst key = vehicleBoarding.boardingAreaId + \"+\" + \n\t\t\t\t\t\tvehicleBoarding.vehicleCategoryId + \"+\" + \n\t\t\t\t\t\tvehicleBoarding.childSequence + \"+\" + \n\t\t\t\t\t\tvehicleBoarding.doorId;\n\t\t\treturn key === vehicleKey;\n\t\t});\n\t\tif (index !== -1) {\n\t\t\tthis.state.vehicleBoardings.splice(index, 1);\n\t\t\tthis.forceUpdate();\n\t\t}\n\t}\n\n\tprivate handleVehicleAddClick = () => {\n\t\tif (this.vehicleSelectRef.current) {\n\t\t\tconst selectedVehicleKey = this.vehicleSelectRef.current.value;\n\n\t\t\tconst selectedVehicleProps = selectedVehicleKey.split(\"+\");\n\t\t\tconst boardingAreaId = selectedVehicleProps[0];\n\t\t\tconst childSequence = Number(selectedVehicleProps[1]);\n\t\t\tconst doorSequence = Number(selectedVehicleProps[2]);\n\t\t\tthis.props.vehicles\n\t\t\t\t.filter(vehicle => {\n\t\t\t\t\tif (vehicle.platformIds) {\n\t\t\t\t\t\tif (vehicle.platformIds.includes(this.state.parentStation)) {\n\t\t\t\t\t\t\treturn true;\n\t\t\t\t\t\t}\n\t\t\t\t\t\telse {\n\t\t\t\t\t\t\treturn false;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\telse {\n\t\t\t\t\t\treturn true;\n\t\t\t\t\t}\n\t\t\t\t}).forEach(vehicle => {\n\t\t\t\t\tconst child = vehicle.children.find(child => child.childSequence === childSequence);\n\t\t\t\t\tif (child) {\n\t\t\t\t\t\tconst door = child.doors.find(door => door.doorSequence === doorSequence);\n\t\t\t\t\t\tif (door) {\n\t\t\t\t\t\t\tconst curKey = boardingAreaId + \"+\" + childSequence + \"+\" + door.doorId;\n\t\t\t\t\t\t\tconst index = this.state.vehicleBoardings.findIndex(vehicleBoarding => {\n\t\t\t\t\t\t\t\tconst key = vehicleBoarding.boardingAreaId + \"+\" + \n\t\t\t\t\t\t\t\t\t\t\tvehicleBoarding.childSequence + \"+\" + \n\t\t\t\t\t\t\t\t\t\t\tvehicleBoarding.doorId;\n\t\t\t\t\t\t\t\treturn key === curKey;\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\tif (index === -1) {\n\t\t\t\t\t\t\t\tthis.state.vehicleBoardings.push({\n\t\t\t\t\t\t\t\t\tboardingAreaId,\n\t\t\t\t\t\t\t\t\tvehicleCategoryId: vehicle.vehicleCategoryId,\n\t\t\t\t\t\t\t\t\tchildSequence,\n\t\t\t\t\t\t\t\t\tdoorId: door.doorId\n\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\tthis.forceUpdate();\n\t\t}\n\t}\n\n\trender() {\n\t\tconst parentStationOptions: JSX.Element[] = [];\n\t\tthis.props.stations.forEach(station => {\n\t\t\tparentStationOptions.push(\n\t\t\t\t<option key={station.stopId} value={station.stopId}>\n\t\t\t\t\t{station.stopName} (platf. {this.props.platforms\n\t\t\t\t\t\t\t\t\t\t\t.filter(platform => platform.parentStation === station.stopId)\n\t\t\t\t\t\t\t\t\t\t\t.map(platform => \"#\" + platform.stopId)\n\t\t\t\t\t\t\t\t\t\t\t.join(\", \")})\n\t\t\t\t</option>\n\t\t\t);\n\t\t});\n\n\t\tconst parentPlatformOptions: JSX.Element[] = [];\n\t\tthis.props.platforms.forEach(platform => {\n\t\t\tparentPlatformOptions.push(\n\t\t\t\t<option key={platform.stopId} value={platform.stopId}>\n\t\t\t\t\t{platform.stopId}. {platform.stopName}\n\t\t\t\t</option>\n\t\t\t);\n\t\t});\n\n\t\tconst levelOptions: JSX.Element[] = [];\n\t\tlevelOptions.push(\n\t\t\t<option key={-1} value={-1}>\n\t\t\t\tNone\n\t\t\t</option>\n\t\t);\n\t\tthis.props.levels.forEach(level => {\n\t\t\tlevelOptions.push(\n\t\t\t\t<option key={level.levelId} value={level.levelId}>\n\t\t\t\t\t{level.levelIndex} {level.levelName}\n\t\t\t\t</option>\n\t\t\t);\n\t\t});\n\n\t\tconst locationTypeOptions: JSX.Element[] = [];\n\t\tfor (const locationType in LocationTypeMap) {\n\t\t\tif ([\"Platform\", \"Station\", \"Entrance/Exit\"].includes(locationType)) {\n\t\t\t\tcontinue;\n\t\t\t}\n\t\t\tlocationTypeOptions.push(\n\t\t\t\t<option key={locationType} value={LocationTypeMap[locationType]}>\n\t\t\t\t\t{locationType}\n\t\t\t\t</option>\n\t\t\t);\n\t\t}\n\n\t\tconst wheelchairBoardingOptions: JSX.Element[] = [];\n\t\tfor (const wheelchairBoardingKey in WheelchairBoardingMap) {\n\t\t\twheelchairBoardingOptions.push(\n\t\t\t\t<option\n\t\t\t\t\tkey={wheelchairBoardingKey}\n\t\t\t\t\tvalue={WheelchairBoardingMap[wheelchairBoardingKey]}>\n\t\t\t\t\t{wheelchairBoardingKey}\n\t\t\t\t</option>\n\t\t\t);\n\t\t}\n\n\t\tconst vehiclesToSelect = this.props.vehicles\n\t\t\t\t\t\t\t.filter(vehicle => {\n\t\t\t\t\t\t\t\tif (vehicle.platformIds) {\n\t\t\t\t\t\t\t\t\tif (vehicle.platformIds.includes(this.state.parentStation)) {\n\t\t\t\t\t\t\t\t\t\treturn true;\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\telse {\n\t\t\t\t\t\t\t\t\t\treturn false;\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\telse {\n\t\t\t\t\t\t\t\t\treturn true;\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t});\n\t\tconst vehicleToSelect: Vehicle | null = vehiclesToSelect ? vehiclesToSelect[0] : null;\n\n\t\treturn (\n\t\t\t<div className={\"stop-dialog\" + ((this.state.locationType === 4) && this.props.vehicles && (this.props.vehicles.length !== 0) ? \" extended\" : \"\")} onKeyDown={this.handleKeyDown}>\n\t\t\t\t<div className=\"header\">Location properties</div>\n\t\t\t\t<div className=\"content\">\n\t\t\t\t\t<div className=\"left\">\n\t\t\t\t\t\t<div>ID: {this.props.stop.stopId}</div>\n\t\t\t\t\t\t<div>\n\t\t\t\t\t\t\t{(this.state.locationType === 4) ? <div>\n\t\t\t\t\t\t\t\tParent platform:{\" \"}\n\t\t\t\t\t\t\t\t<select\n\t\t\t\t\t\t\t\t\tvalue={this.state.parentStation}\n\t\t\t\t\t\t\t\t\tonChange={this.handleParentStationChange}>\n\t\t\t\t\t\t\t\t\t{parentPlatformOptions}\n\t\t\t\t\t\t\t\t</select>\n\t\t\t\t\t\t\t</div> : <div>\n\t\t\t\t\t\t\t\tParent station:{\" \"}\n\t\t\t\t\t\t\t\t<select\n\t\t\t\t\t\t\t\t\tvalue={this.state.parentStation}\n\t\t\t\t\t\t\t\t\tonChange={this.handleParentStationChange}>\n\t\t\t\t\t\t\t\t\t{parentStationOptions}\n\t\t\t\t\t\t\t\t</select>\n\t\t\t\t\t\t\t</div>}\n\t\t\t\t\t\t\t<div>\n\t\t\t\t\t\t\t\tLevel:{\" \"}\n\t\t\t\t\t\t\t\t<select\n\t\t\t\t\t\t\t\t\tvalue={this.state.levelId}\n\t\t\t\t\t\t\t\t\tonChange={this.handleLevelChange}>\n\t\t\t\t\t\t\t\t\t{levelOptions}\n\t\t\t\t\t\t\t\t</select>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t{[0, 2].includes(this.state.locationType) && (\n\t\t\t\t\t\t\t\t<div>\n\t\t\t\t\t\t\t\t\tLocation type: {LocationTypeOnNodeLabelMap[this.state.locationType]}\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t{[3, 4].includes(this.state.locationType) && (\n\t\t\t\t\t\t\t\t<div>\n\t\t\t\t\t\t\t\t\tLocation type:{\" \"}\n\t\t\t\t\t\t\t\t\t<select\n\t\t\t\t\t\t\t\t\t\tvalue={this.state.locationType}\n\t\t\t\t\t\t\t\t\t\tonChange={this.handleLocationTypeChange}>\n\t\t\t\t\t\t\t\t\t\t{locationTypeOptions}\n\t\t\t\t\t\t\t\t\t</select>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t<div>\n\t\t\t\t\t\t\t\tName:{\" \"}\n\t\t\t\t\t\t\t\t<input\n\t\t\t\t\t\t\t\t\tdisabled={![3, 4].includes(this.state.locationType)}\n\t\t\t\t\t\t\t\t\ttype=\"text\"\n\t\t\t\t\t\t\t\t\tvalue={this.state.stopName || \"\"}\n\t\t\t\t\t\t\t\t\tonChange={this.handleStopNameChange}\n\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t{[0, 2].includes(this.state.locationType) && (\n\t\t\t\t\t\t\t\t<div>\n\t\t\t\t\t\t\t\t\tPlatform code:{\" \"}\n\t\t\t\t\t\t\t\t\t<input\n\t\t\t\t\t\t\t\t\t\ttype=\"text\"\n\t\t\t\t\t\t\t\t\t\tvalue={this.state.platformCode || \"\"}\n\t\t\t\t\t\t\t\t\t\tonChange={this.handlePlatformCodeChange}\n\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t{[0].includes(this.state.locationType) && (\n\t\t\t\t\t\t\t\t<div>\n\t\t\t\t\t\t\t\t\tSignposted as:{\" \"}\n\t\t\t\t\t\t\t\t\t<input\n\t\t\t\t\t\t\t\t\t\ttype=\"text\"\n\t\t\t\t\t\t\t\t\t\tvalue={this.state.signpostedAs || \"\"}\n\t\t\t\t\t\t\t\t\t\tonChange={this.handleSignpostedAsChange}\n\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t{[0, 2].includes(this.state.locationType) && (\n\t\t\t\t\t\t\t\t<div>\n\t\t\t\t\t\t\t\t\tWheelchair boarding:{\" \"}\n\t\t\t\t\t\t\t\t\t<select\n\t\t\t\t\t\t\t\t\t\tvalue={this.state.wheelchairBoarding}\n\t\t\t\t\t\t\t\t\t\tonChange={this.handleWheelchairBoardingChange}>\n\t\t\t\t\t\t\t\t\t\t{wheelchairBoardingOptions}\n\t\t\t\t\t\t\t\t\t</select>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t\t{(this.state.locationType === 4) && this.props.vehicles && (this.props.vehicles.length !== 0) && \n\t\t\t\t\t<div className=\"right\">\n\t\t\t\t\t\t<table cellPadding=\"0\" cellSpacing=\"0\">\n\t\t\t\t\t\t\t<tbody>\n\t\t\t\t\t\t\t<tr className=\"header\">\n\t\t\t\t\t\t\t\t<td>Vehicle</td>\n\t\t\t\t\t\t\t\t<td>Child</td>\n\t\t\t\t\t\t\t\t<td>Door</td>\n\t\t\t\t\t\t\t\t<td></td>\n\t\t\t\t\t\t\t</tr>\n\t\t\t\t\t\t\t{this.props.vehicles && (this.props.vehicles.length !== 0) && this.state.vehicleBoardings &&\n\t\t\t\t\t\t\t\tthis.state.vehicleBoardings\n\t\t\t\t\t\t\t\t.filter(vehicleBoarding => vehicleBoarding.boardingAreaId === this.props.stop.stopId)\n\t\t\t\t\t\t\t\t.map(vehicleBoarding => {\n\t\t\t\t\t\t\t\t\tconst key = vehicleBoarding.boardingAreaId + \"+\" + \n\t\t\t\t\t\t\t\t\t\t\t\tvehicleBoarding.vehicleCategoryId + \"+\" + \n\t\t\t\t\t\t\t\t\t\t\t\tvehicleBoarding.childSequence + \"+\" + \n\t\t\t\t\t\t\t\t\t\t\t\tvehicleBoarding.doorId;\n\t\t\t\t\t\t\t\t\tconst vehicle = this.props.vehicles.find(vehicle => {\n\t\t\t\t\t\t\t\t\t\treturn vehicle.vehicleCategoryId === vehicleBoarding.vehicleCategoryId;\n\t\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t\t\tif (vehicle) {\n\t\t\t\t\t\t\t\t\t\tconst child = vehicle.children.find(child => child.childSequence === vehicleBoarding.childSequence);\n\t\t\t\t\t\t\t\t\t\tif (child) {\n\t\t\t\t\t\t\t\t\t\t\tconst door = child.doors.find(door => vehicleBoarding.doorId === door.doorId);\n\t\t\t\t\t\t\t\t\t\t\tif (door) {\n\t\t\t\t\t\t\t\t\t\t\t\treturn (<tr key={key}>\n\t\t\t\t\t\t\t\t\t\t\t\t\t<td>{vehicle.vehicleCategoryName}</td>\n\t\t\t\t\t\t\t\t\t\t\t\t\t<td>{child.childSequence}</td>\n\t\t\t\t\t\t\t\t\t\t\t\t\t<td>{door.doorSequence}</td>\n\t\t\t\t\t\t\t\t\t\t\t\t\t<td>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t<button onClick={() => { this.handleVehicleDeleteClick(key); }}>Delete</button>\n\t\t\t\t\t\t\t\t\t\t\t\t\t</td>\n\t\t\t\t\t\t\t\t\t\t\t\t</tr>);\n\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\treturn null;\n\t\t\t\t\t\t\t\t})\n\t\t\t\t\t\t\t\t.filter(vehicleBoarding => vehicleBoarding !== null)\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t<tr>\n\t\t\t\t\t\t\t\t<td colSpan={3}>\n\t\t\t\t\t\t\t\t\t<select ref={this.vehicleSelectRef}>\n\t\t\t\t\t\t\t\t\t\t{vehicleToSelect && vehicleToSelect.children.map(child =>\n\t\t\t\t\t\t\t\t\t\t\tchild.doors.map(door => {\n\t\t\t\t\t\t\t\t\t\t\t\tconst key = this.props.stop.stopId + \"+\" + child.childSequence + \"+\" + door.doorSequence;\n\t\t\t\t\t\t\t\t\t\t\t\treturn (<option key={key} value={key}>\n\t\t\t\t\t\t\t\t\t\t\t\t\t{child.childSequence} - {door.doorSequence}\n\t\t\t\t\t\t\t\t\t\t\t\t</option>);\n\t\t\t\t\t\t\t\t\t\t\t})\n\t\t\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t\t\t</select>\n\t\t\t\t\t\t\t\t</td>\n\t\t\t\t\t\t\t\t<td>\n\t\t\t\t\t\t\t\t\t<button onClick={this.handleVehicleAddClick}>Add</button>\n\t\t\t\t\t\t\t\t</td>\n\t\t\t\t\t\t\t</tr>\n\t\t\t\t\t\t\t</tbody>\n\t\t\t\t\t\t</table>\n\t\t\t\t\t</div>}\n\t\t\t\t</div>\n\t\t\t\t<div className=\"footer\">\n\t\t\t\t\t<button onClick={this.handleCancel}>Cancel</button>\n\t\t\t\t\t<button onClick={this.handleApply}>Apply</button>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t);\n\t}\n}\n","import React, { Component } from 'react';\nimport './PathwayDialog.scss';\nimport Pathway, { PathwayModeMap } from '../interfaces/Pathway';\n\nexport interface PathwayDialogProps {\n\tpathway: Pathway,\n\tonCancel: () => void,\n\tonApply: (pathway: Pathway) => void\n}\n\nexport interface PathwayDialogState {\n\tpathwayMode: number;\n\tisBidirectional: boolean;\n\tlength?: string;\n\ttraversalTime?: number;\n\tstairCount?: number;\n\tmaxSlope?: string;\n\tminWidth?: string;\n\tsignpostedAs?: string;\n\treversedSignpostedAs?: string;\n}\n\nexport default class PathwayDialog extends Component<PathwayDialogProps, PathwayDialogState> {\n\tconstructor(props: PathwayDialogProps) {\n\t\tsuper(props);\n\t\tthis.state = {\n\t\t\tpathwayMode: props.pathway.pathwayMode,\n\t\t\tisBidirectional: props.pathway.isBidirectional,\n\t\t\tlength: props.pathway.length ? props.pathway.length.toString() : undefined,\n\t\t\ttraversalTime: props.pathway.traversalTime,\n\t\t\tstairCount: props.pathway.stairCount,\n\t\t\tmaxSlope: props.pathway.maxSlope ? props.pathway.maxSlope.toString() : undefined,\n\t\t\tminWidth: props.pathway.minWidth ? props.pathway.minWidth.toString() : undefined,\n\t\t\tsignpostedAs: props.pathway.signpostedAs,\n\t\t\treversedSignpostedAs: props.pathway.reversedSignpostedAs\n\t\t}\n\t}\n\n\tprivate handleCancel = () => {\n\t\tthis.props.onCancel();\n\t}\n\n\tprivate handleApply = () => {\n\t\tif (!this.state.traversalTime) {\n\t\t\talert(\"Traversal time is required\");\n\t\t\treturn;\n\t\t}\n\t\tconst length = parseFloat(this.state.length || \"\");\n\t\tconst maxSlope = parseFloat(this.state.maxSlope || \"\");\n\t\tconst minWidth = parseFloat(this.state.minWidth || \"\");\n\t\tthis.props.onApply({\n\t\t\t...this.props.pathway,\n\t\t\t...this.state,\n\t\t\t...{\n\t\t\t\tlength: !isNaN(length) ? length : undefined,\n\t\t\t\tmaxSlope: !isNaN(maxSlope) ? maxSlope : undefined,\n\t\t\t\tminWidth: !isNaN(minWidth) ? minWidth : undefined\n\t\t\t}\n\t\t});\n\t}\n\n\tprivate handlePathwayModeChange = (event: React.ChangeEvent<HTMLSelectElement>) => {\n\t\tconst state = {} as PathwayDialogState;\n\t\tif ([6, 7].includes(Number(event.target.value))) { // Entrance/Exit\n\t\t\tstate.isBidirectional = false;\n\t\t}\n\t\tstate.pathwayMode = Number(event.target.value);\n\t\tthis.setState(state);\n\t}\n\n\tprivate handleIsBidirectionalChange = (event: React.ChangeEvent<HTMLInputElement>) => {\n\t\tthis.setState({\n\t\t\tisBidirectional: event.target.checked\n\t\t});\n\t}\n\n\tprivate handleLengthChange = (event: React.ChangeEvent<HTMLInputElement>) => {\n\t\tthis.setState({\n\t\t\tlength: event.target.value.replace(\",\", \".\").replace(/[^\\d.]/i, \"\")\n\t\t});\n\t}\n\n\tprivate handleTraversalTimeChange = (event: React.ChangeEvent<HTMLInputElement>) => {\n\t\tthis.setState({\n\t\t\ttraversalTime: parseInt(event.target.value)\n\t\t});\n\t}\n\n\tprivate handleStairCountChange = (event: React.ChangeEvent<HTMLInputElement>) => {\n\t\tthis.setState({\n\t\t\tstairCount: parseInt(event.target.value)\n\t\t});\n\t}\n\n\tprivate handleMaxSlopeChange = (event: React.ChangeEvent<HTMLInputElement>) => {\n\t\tthis.setState({\n\t\t\tmaxSlope: event.target.value.replace(\",\", \".\").replace(/[^\\d.]/i, \"\")\n\t\t});\n\t}\n\n\tprivate handleMinWidthChange = (event: React.ChangeEvent<HTMLInputElement>) => {\n\t\tthis.setState({\n\t\t\tminWidth: event.target.value.replace(\",\", \".\").replace(/[^\\d.]/i, \"\")\n\t\t});\n\t}\n\n\tprivate handleSignpostedAsChange = (event: React.ChangeEvent<HTMLInputElement>) => {\n\t\tthis.setState({\n\t\t\tsignpostedAs: event.target.value\n\t\t});\n\t}\n\n\tprivate handleReversedSignpostedAsChange = (event: React.ChangeEvent<HTMLInputElement>) => {\n\t\tthis.setState({\n\t\t\treversedSignpostedAs: event.target.value\n\t\t});\n\t}\n\n\tprivate handleKeyDown = (event: React.KeyboardEvent<HTMLDivElement>) => {\n\t\tif (event.keyCode === 13) {\n\t\t\tthis.handleApply();\n\t\t}\n\t}\n\n\trender() {\n\t\tconst pathwayModeOptions: JSX.Element[] = [];\n\t\tfor (const pathwayModeKey in PathwayModeMap) {\n\t\t\tpathwayModeOptions.push(\n\t\t\t\t<option key={pathwayModeKey} value={PathwayModeMap[pathwayModeKey]}>{pathwayModeKey}</option>\n\t\t\t);\n\t\t}\n\n\t\treturn (\n\t\t\t<div className=\"pathway-dialog\" onKeyDown={this.handleKeyDown}>\n\t\t\t\t<div className=\"header\">Pathway properties</div>\n\t\t\t\t<div className=\"content\">\n\t\t\t\t\t<div>\n\t\t\t\t\t\tID: {this.props.pathway.pathwayId}\n\t\t\t\t\t</div>\n\t\t\t\t\t<div>\n\t\t\t\t\t\t<div>\n\t\t\t\t\t\t\tLocation type:\n              <select value={this.state.pathwayMode} onChange={this.handlePathwayModeChange}>\n\t\t\t\t\t\t\t\t{pathwayModeOptions}\n\t\t\t\t\t\t\t</select>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div>\n\t\t\t\t\t\t\t<label>\n\t\t\t\t\t\t\t\tIs bidirectional:\n                <input type=\"checkbox\" checked={this.state.isBidirectional} onChange={this.handleIsBidirectionalChange} />\n\t\t\t\t\t\t\t</label>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div>\n\t\t\t\t\t\t\tLength: <input type=\"text\" value={this.state.length || \"\"} onChange={this.handleLengthChange} /> meters\n            </div>\n\t\t\t\t\t\t<div>\n\t\t\t\t\t\t\tTraversal time: <input type=\"text\" value={this.state.traversalTime || \"\"} onChange={this.handleTraversalTimeChange} /> seconds\n            </div>\n\t\t\t\t\t\t<div>\n\t\t\t\t\t\t\tStair count: <input type=\"text\" value={this.state.stairCount || \"\"} onChange={this.handleStairCountChange} />\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div>\n\t\t\t\t\t\t\tMax slope: <input type=\"text\" value={this.state.maxSlope || \"\"} onChange={this.handleMaxSlopeChange} />\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div>\n\t\t\t\t\t\t\tMin width: <input type=\"text\" value={this.state.minWidth || \"\"} onChange={this.handleMinWidthChange} /> meters\n            </div>\n\t\t\t\t\t\t<div>\n\t\t\t\t\t\t\tSignposted as: <input type=\"text\" value={this.state.signpostedAs || \"\"} onChange={this.handleSignpostedAsChange} />\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div>\n\t\t\t\t\t\t\tReversed signposted as: <input type=\"text\" value={this.state.reversedSignpostedAs || \"\"} onChange={this.handleReversedSignpostedAsChange} />\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t\t<div className=\"footer\">\n\t\t\t\t\t<button onClick={this.handleCancel}>Cancel</button>\n\t\t\t\t\t<button onClick={this.handleApply}>Apply</button>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t);\n\t}\n}\n","import Stop from \"../interfaces/Stop\";\nimport Pathway from \"../interfaces/Pathway\";\nimport Level from \"../interfaces/Level\";\nimport VehicleBoarding from \"../interfaces/VehicleBoarding\";\nimport VehicleCategory from \"../interfaces/VehicleCategory\";\nimport VehicleCoupling from \"../interfaces/VehicleCoupling\";\nimport VehicleDoor from \"../interfaces/VehicleDoor\";\n\n/* GTFS to objects conversion and vise versa */\nexport default class DataService {\n    static fromGTFS<T>(data: string, recordFromGTFS: (record: {[key: string]: string}) => T): T[] {\n        const rows: string[] = data.split(\"\\n\");\n        let records: T[] = [];\n        let header: string[] = [];\n        rows.forEach((row: string) => {\n\t\t\tif (row) {\n\t\t\t\tconst cells = this.csvToArray(row);\n\t\t\t\t// header\n\t\t\t\tif (header.length === 0) {\n\t\t\t\t\tcells.forEach((cell: string, cellIndex: number) => {\n\t\t\t\t\t\theader[cellIndex] = cell;\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t\t// data\n\t\t\t\telse {\n\t\t\t\t\tlet recordGTFS: {[key: string]: string} = {};\n\t\t\t\t\tcells.forEach((cell: string, cellIndex: number) => {\n\t\t\t\t\t\tif (cell !== '') {\n\t\t\t\t\t\t\tconst fieldName = header[cellIndex];\n\t\t\t\t\t\t\trecordGTFS[fieldName] = cell;\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\n\t\t\t\t\trecords.push(recordFromGTFS(recordGTFS));\n\t\t\t\t}\n\t\t\t}\n        });\n        return records;\n    }\n\n    static stopFromGTFS(stop: {[key: string]: string}): Stop {\n        return {\n\t\t\tstopId: stop['stop_id'],\n\t\t\tstopLat: stop['stop_lat'] ? Number(stop['stop_lat']) : -1,\n\t\t\tstopLon: stop['stop_lon'] ? Number(stop['stop_lon']) : -1,\n\t\t\tparentStation: stop['parent_station'] || undefined,\n            stopName: stop['stop_name'],\n            locationType: Number(stop['location_type']),\n            wheelchairBoarding: stop['wheelchair_boarding'] !== '' ? Number(stop['wheelchair_boarding']) : 0,\n            levelId: stop['level_id'] || undefined,\n            platformCode: stop['platform_code'],\n            signpostedAs: stop['signposted_as']\n        };\n    }\n\n\tstatic getStopGTFSHeader(): string {\n\t\treturn\t'stop_id,' +\n\t\t\t\t'stop_lat,' + \n\t\t\t\t'stop_lon,' + \n\t\t\t\t'stop_name,' +\n\t\t\t\t'location_type,' +\n\t\t\t\t'parent_station,' +\n\t\t\t\t'wheelchair_boarding,' +\n\t\t\t\t'level_id,' +\n\t\t\t\t'platform_code,' +\n\t\t\t\t'signposted_as';\n\t}\n\n    static stopToGTFS(stop: Stop): string {\n\t\treturn  stop.stopId + ',' +\n\t\t\t\tstop.stopLat.toString() + ',' +\n\t\t\t\tstop.stopLon.toString() + ',' +\n\t\t\t\tthis.escapeText(stop.stopName || '') + ',' +\n\t\t\t\tstop.locationType.toString() + ',' +\n\t\t\t\tstop.parentStation + ',' +\n                stop.wheelchairBoarding.toString() + ',' +\n                stop.levelId + ',' +\n                this.escapeText(stop.platformCode || '') + ',' +\n                this.escapeText(stop.signpostedAs || '');\n    }\n\n    static pathwayFromGTFS(pathway: {[key: string]: string}): Pathway {\n        return {\n            pathwayId: pathway['pathway_id'],\n            fromStopId: pathway['from_stop_id'],\n            toStopId: pathway['to_stop_id'],\n            pathwayMode: Number(pathway['pathway_mode']),\n            isBidirectional: Number(pathway['is_bidirectional']) === 1,\n            length: pathway['length'] ? Number(pathway['length']) : undefined,\n            traversalTime: pathway['traversal_time'] ? Number(pathway['traversal_time']) : undefined,\n            stairCount: pathway['stair_count'] ? Number(pathway['stair_count']) : undefined,\n            maxSlope: pathway['max_slope'] ? Number(pathway['max_slope']) : undefined,\n            minWidth: pathway['min_width'] ? Number(pathway['min_width']) : undefined,\n            signpostedAs: pathway['signposted_as'],\n            reversedSignpostedAs: pathway['reversed_signposted_as']\n        };\n    }\n\n\tstatic getPathwayGTFSHeader(): string {\n\t\treturn\t'pathway_id,' +\n\t\t\t\t'from_stop_id,' +\n\t\t\t\t'to_stop_id,' +\n\t\t\t\t'pathway_mode,' +\n\t\t\t\t'is_bidirectional,' +\n\t\t\t\t'length,' +\n\t\t\t\t'traversal_time,' +\n\t\t\t\t'stair_count,' +\n\t\t\t\t'max_slope,' +\n\t\t\t\t'min_width,' +\n\t\t\t\t'signposted_as,' +\n\t\t\t\t'reversed_signposted_as';\n\t}\n\n    static pathwayToGTFS(pathway: Pathway): string {\n        return  pathway.pathwayId + ',' +\n                pathway.fromStopId + ',' +\n                pathway.toStopId + ',' +\n                pathway.pathwayMode.toString() + ',' +\n                (pathway.isBidirectional ? '1' : '0') + ',' +\n                (pathway.length || '') + ',' +\n                (pathway.traversalTime || '') + ',' +\n                (pathway.stairCount || '') + ',' +\n                (pathway.maxSlope || '') + ',' +\n                (pathway.minWidth || '') + ',' +\n                this.escapeText(pathway.signpostedAs || '') + ',' +\n                this.escapeText(pathway.reversedSignpostedAs || '');\n    }\n\n    static levelFromGTFS(level: {[key: string]: string}): Level {\n        return {\n            levelId: level['level_id'],\n            levelName: level['level_name'],\n            levelIndex: Number(level['level_index'])\n        };\n    }\n\n\tstatic getLevelGTFSHeader(): string {\n\t\treturn\t'level_id,' +\n\t\t\t\t'level_name,' +\n\t\t\t\t'level_index';\n\t}\n\n    static levelToGTFS(level: Level): string {\n        return  level.levelId + ',' +\n\t\t\t\tthis.escapeText(level.levelName || '') + ',' +\n                level.levelIndex.toString();\n\t}\n\n\tstatic vehicleBoardingFromGTFS(vehicleBoarding: {[key: string]: string}): VehicleBoarding {\n        return {\n\t\t\tvehicleCategoryId: vehicleBoarding['vehicle_category_id'],\n\t\t\tchildSequence: Number(vehicleBoarding['child_sequence']),\n\t\t\tboardingAreaId: vehicleBoarding['boarding_area_id'],\n\t\t\tdoorId: vehicleBoarding['door_id']\n        };\n\t}\n\t\n\tstatic getVehicleBoardingGTFSHeader(): string {\n\t\treturn\t'vehicle_category_id,' +\n\t\t\t\t'child_sequence,' +\n\t\t\t\t'boarding_area_id,' +\n\t\t\t\t'door_id';\n\t}\n\n    static vehicleBoardingToGTFS(vehicleBoarding: VehicleBoarding): string {\n        return  vehicleBoarding.vehicleCategoryId + ',' +\n\t\t\t\tvehicleBoarding.childSequence.toString() + ',' +\n                vehicleBoarding.boardingAreaId + ',' +\n                vehicleBoarding.doorId;\n\t}\n\n\t// --------------------------\n\n\tstatic vehicleCategoryFromGTFS(vehicleCategory: {[key: string]: string}): VehicleCategory {\n        return {\n\t\t\tvehicleCategoryId: vehicleCategory['vehicle_category_id'],\n\t\t\tvehicleCategoryName: vehicleCategory['vehicle_category_name']\n        };\n\t}\n\n\tstatic vehicleCouplingFromGTFS(vehicleCoupling: {[key: string]: string}): VehicleCoupling {\n        return {\n\t\t\tparentId: vehicleCoupling['parent_id'],\n\t\t\tchildId: vehicleCoupling['child_id'],\n\t\t\tchildSequence: Number(vehicleCoupling['child_sequence'])\n        };\n\t}\n\n\tstatic vehicleDoorFromGTFS(vehicleDoor: {[key: string]: string}): VehicleDoor {\n        return {\n\t\t\tdoorId: vehicleDoor['door_id'],\n\t\t\tvehicleCategoryId: vehicleDoor['vehicle_category_id'],\n\t\t\tdoorSequence: Number(vehicleDoor['door_sequence'])\n        };\n\t}\n\n\t// --------------------------\n\n\tstatic getVehicleBoardingId(vehicleBoarding: VehicleBoarding): string {\n\t\treturn vehicleBoarding.vehicleCategoryId + \"+\" + vehicleBoarding.childSequence + \"+\" +\n\t\t\tvehicleBoarding.boardingAreaId + \"+\" + vehicleBoarding.doorId;\n\t}\n\n\t// TODO\n\tstatic escapeText(text: string): string {\n\t\treturn text;\n\t}\n\n\t// Return array of string values\n\t// Source: https://stackoverflow.com/questions/8493195/how-can-i-parse-a-csv-string-with-javascript-which-contains-comma-in-data\n\tstatic csvToArray(text: string) {\n\t\tvar re_value = /(?!\\s*$)\\s*(?:\"([^\"\\\\]*(?:\\\\[\\S\\s][^\"\\\\]*)*)\"|([^,\\s\\\\]*(?:\\s+[^,\\s\\\\]+)*))\\s*(?:,|$)/g;\n\t\tvar a = [];                     // Initialize array to receive values.\n\t\ttext.replace(re_value, // \"Walk\" the string using replace with callback.\n\t\t\tfunction(m0, m1, m2, m3) {\n\t\t\t\t// Remove backslash from \\' in single quoted values.\n\t\t\t\tif      (m1 !== undefined) a.push(m1.replace(/\\\\'/g, \"'\"));\n\t\t\t\t// Remove backslash from \\\" in double quoted values.\n\t\t\t\telse if (m2 !== undefined) a.push(m2.replace(/\\\\\"/g, '\"'));\n\t\t\t\telse if (m3 !== undefined) a.push(m3);\n\t\t\t\treturn ''; // Return empty string.\n\t\t\t});\n\t\t// Handle special case of empty last value.\n\t\tif (/,\\s*$/.test(text)) a.push('');\n\t\treturn a;\n\t};\n}\n","import React, { Component } from 'react';\nimport './StationBuilder.scss';\nimport Vis from './Vis';\nimport StopDialog from './StopDialog';\nimport Stop from '../interfaces/Stop';\nimport VisNode from '../interfaces/VisNode';\nimport VisService from '../services/VisService';\nimport Communication from '../interfaces/Communication';\nimport Pathway, { PathwayModeMap } from '../interfaces/Pathway';\nimport VisEdge from '../interfaces/VisEdge';\nimport PathwayDialog from './PathwayDialog';\nimport cloneDeep from 'lodash/cloneDeep';\nimport Level from '../interfaces/Level';\nimport circleRedImage from '../images/circle-red.png';\nimport circleBlueImage from '../images/circle-blue.png';\nimport VehicleBoarding from '../interfaces/VehicleBoarding';\nimport DataService from '../services/DataService';\n\ndeclare const google: any;\n\nexport interface StationBuilderProps {\n\tdata: Communication,\n\tonSave: (data: Communication, deletedStopsIds: string[], deletedPathwaysIds: string[], deletedVehicleBoardingsIds: string[]) => void,\n\tonCancel: () => void,\n\tmapDiv?: HTMLDivElement,\n\tmap?: google.maps.Map\n}\n\nexport interface StationBuilderState {\n\tdata: Communication,\n\tselectedStop: {\n\t\tstop: Stop,\n\t\tnode: VisNode,\n\t\tcallback: (node?: VisNode) => void\n\t} | null,\n\tselectedPathway: {\n\t\tpathway: Pathway,\n\t\tedge: VisEdge,\n\t\tcallback: (edge?: VisEdge) => void\n\t} | null,\n\tmapMarkers: google.maps.Marker[],\n\tstations: Stop[],\n\tplatforms: Stop[],\n\tlevels: Level[],\n\tlatK: number,\n\tlatX: number,\n\tlonK: number,\n\tlonX: number,\n\tdeletedStopsIds: string[],\n\tdeletedPathwaysIds: string[]\n}\n\nexport default class StationBuilder extends Component<StationBuilderProps, StationBuilderState> {\n\tprivate mapRef: React.RefObject<HTMLDivElement> = React.createRef();\n\n\tconstructor(props: StationBuilderProps) {\n\t\tsuper(props);\n\t\tlet stations: Stop[] = [];\n\t\tlet platforms: Stop[] = [];\n\t\tprops.data.stops.forEach((stop: Stop) => {\n\t\t\tif (stop.locationType === 0) {\n\t\t\t\tplatforms.push(stop);\n\t\t\t}\n\t\t\tif (stop.locationType === 1) {\n\t\t\t\tstations.push(stop);\n\t\t\t}\n\t\t});\n\t\tif (stations.length === 0) {\n\t\t\tthrow new Error(\"No station provided in input data\");\n\t\t}\n\t\tif (platforms.length === 0) {\n\t\t\tthrow new Error(\"No platforms provided in input data\");\n\t\t}\n\n\t\tlet minLat = 0;\n\t\tlet minLon = 0;\n\t\tlet maxLat = 0;\n\t\tlet maxLon = 0;\n\t\tprops.data.stops.forEach((stop: Stop) => {\n\t\t\tif (!minLat || (stop.stopLat < minLat)) {\n\t\t\t\tminLat = stop.stopLat;\n\t\t\t}\n\t\t\tif (!minLon || (stop.stopLon < minLon)) {\n\t\t\t\tminLon = stop.stopLon;\n\t\t\t}\n\t\t\tif (!maxLat || (stop.stopLat > maxLat)) {\n\t\t\t\tmaxLat = stop.stopLat;\n\t\t\t}\n\t\t\tif (!maxLon || (stop.stopLon > maxLon)) {\n\t\t\t\tmaxLon = stop.stopLon;\n\t\t\t}\n\t\t\tthis.attachVehiclesInfoToStop(stop, this.props.data.vehicleBoardings);\n\t\t});\n\t\tlet latGap = maxLat - minLat;\n\t\tlet lonGap = maxLon - minLon;\n\t\tconst lonK = 1000.0 / lonGap;\n\t\tconst lonX = -minLon * 1000.0 / lonGap;\n\t\tconst latK = -1000.0 / latGap;\n\t\tconst latX = maxLat * 1000.0 / latGap;\n\n\t\t// Init VisService state\n\t\tVisService.edgeRoundness = {};\n\n\t\tthis.state = {\n\t\t\tdata: cloneDeep(props.data),\n\t\t\tselectedStop: null,\n\t\t\tselectedPathway: null,\n\t\t\tmapMarkers: [],\n\t\t\tstations,\n\t\t\tplatforms,\n\t\t\tlevels: props.data.levels,\n\t\t\tlatK,\n\t\t\tlatX,\n\t\t\tlonK,\n\t\t\tlonX,\n\t\t\tdeletedStopsIds: [],\n\t\t\tdeletedPathwaysIds: []\n\t\t};\n\t}\n\n\tpublic componentDidMount() {\n\t\tconst bounds = new google.maps.LatLngBounds();\n\t\tthis.props.data.stops.forEach((stop: Stop) => {\n\t\t\tbounds.extend({\n\t\t\t\tlat: stop.stopLat,\n\t\t\t\tlng: stop.stopLon\n\t\t\t});\n\t\t});\n\n\t\tlet map: google.maps.Map;\n\n\t\tif (this.mapRef.current) {\n\t\t\tif (this.props.mapDiv && this.props.map) {\n\t\t\t\tthis.mapRef.current.appendChild(this.props.mapDiv);\n\t\t\t\tthis.props.map.fitBounds(bounds);\n\t\t\t\tmap = this.props.map;\n\t\t\t}\n\t\t\telse {\n\t\t\t\tconsole.log(\"Google map initialized\");\n\t\t\t\tmap = new google.maps.Map(this.mapRef.current);\n\t\t\t\tmap.fitBounds(bounds);\n\t\t\t}\n\t\t}\n\n\t\tthis.props.data.stops.filter((stop: Stop) => {\n\t\t\treturn [0, 2].includes(stop.locationType);\n\t\t}).forEach((stop: Stop) => {\n\t\t\tthis.state.mapMarkers.push(new google.maps.Marker({\n\t\t\t\tmap: map,\n\t\t\t\tposition: {\n\t\t\t\t\tlat: stop.stopLat,\n\t\t\t\t\tlng: stop.stopLon\n\t\t\t\t},\n\t\t\t\ticon: stop.locationType === 0 ? circleBlueImage : circleRedImage\n\t\t\t}));\n\t\t});\n\n\t\tdocument.addEventListener('keydown', this.handleDocumentKeydown);\n\t}\n\n\tprivate handleDocumentKeydown = (e: KeyboardEvent) => {\n\t\tif (e.keyCode === 27) {\n\t\t\tthis.handleDialogCancel();\n\t\t}\n\t}\n\n\tpublic componentWillUnmount() {\n\t\tthis.state.mapMarkers.forEach((marker) => {\n\t\t\tmarker.setMap(null);\n\t\t});\n\t\tdocument.removeEventListener('keydown', this.handleDocumentKeydown);\n\t}\n\n\tprivate handleStopAddMode = (node: VisNode, callback: (node?: VisNode) => void) => {\n\t\tnode = VisService.prepareNewNode(node, this.state.stations, {\n\t\t\tlatK: this.state.latK,\n\t\t\tlatX: this.state.latX,\n\t\t\tlonK: this.state.lonK,\n\t\t\tlonX: this.state.lonX\n\t\t});\n\t\tthis.setState({\n\t\t\tselectedStop: {\n\t\t\t\tstop: node.stop,\n\t\t\t\tnode: node,\n\t\t\t\tcallback: callback\n\t\t\t}\n\t\t});\n\t}\n\n\tprivate handleStopEditMode = (node: VisNode, callback: (node?: VisNode) => void) => {\n\t\tthis.setState({\n\t\t\tselectedStop: {\n\t\t\t\tstop: node.stop,\n\t\t\t\tnode: node,\n\t\t\t\tcallback: callback\n\t\t\t}\n\t\t});\n\t}\n\n\tprivate handlePathwayAddMode = (edge: VisEdge, callback: (edge?: VisEdge) => void) => {\n\t\tedge = VisService.prepareNewEdge(edge);\n\t\tthis.setState({\n\t\t\tselectedPathway: {\n\t\t\t\tpathway: edge.pathway,\n\t\t\t\tedge: edge,\n\t\t\t\tcallback: callback\n\t\t\t}\n\t\t});\n\t}\n\n\tprivate handlePathwayEditMode = (edge: VisEdge, callback: (edge?: VisEdge) => void) => {\n\t\tthis.setState({\n\t\t\tselectedPathway: {\n\t\t\t\tpathway: edge.pathway,\n\t\t\t\tedge: edge,\n\t\t\t\tcallback: callback\n\t\t\t}\n\t\t});\n\t}\n\n\tprivate attachVehiclesInfoToStop(stop: Stop, vehicleBoardings: VehicleBoarding[]): Stop {\n\t\tconst vehiclesInfo = vehicleBoardings\n\t\t\t.filter(vehicleBoarding => vehicleBoarding.boardingAreaId === stop.stopId)\n\t\t\t.map((vehicleBoarding): string => {\n\t\t\t\tconst vehicle = this.props.data.vehicles.find(vehicle => vehicle.vehicleCategoryId === vehicleBoarding.vehicleCategoryId);\n\t\t\t\tif (vehicle) {\n\t\t\t\t\tconst child = vehicle.children.find(child => child.childSequence === vehicleBoarding.childSequence);\n\t\t\t\t\tif (child) {\n\t\t\t\t\t\tconst door = child.doors.find(door => vehicleBoarding.doorId === door.doorId);\n\t\t\t\t\t\tif (door) {\n\t\t\t\t\t\t\treturn child.childSequence + \" - \" + door.doorSequence;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\treturn \"\";\n\t\t\t})\n\t\t\t.filter(vehicleBoarding => vehicleBoarding !== \"\");\n\t\tstop.vehiclesInfo = vehiclesInfo ? vehiclesInfo[0] : \"\";\n\t\treturn stop;\n\t}\n\n\tprivate handleStopDialogApply = (stop: Stop, newVehicleBoardings: VehicleBoarding[]) => {\n\t\tif (this.state.selectedStop) {\n\t\t\tthis.attachVehiclesInfoToStop(stop, newVehicleBoardings);\n\n\t\t\tconst data = this.state.data;\n\t\t\tconst stopIndex = data.stops.findIndex(curStop => curStop.stopId === stop.stopId);\n\t\t\tif (stopIndex === -1) {\n\t\t\t\tdata.stops.push(stop);\n\t\t\t}\n\t\t\telse {\n\t\t\t\tdata.stops[stopIndex] = stop;\n\t\t\t}\n\t\t\tconst node = VisService.attachStopToNode(stop, this.state.selectedStop.node);\n\t\t\tthis.state.selectedStop.callback(node);\n\t\t\tdata.vehicleBoardings = newVehicleBoardings;\n\t\t\tthis.setState({\n\t\t\t\tselectedStop: null,\n\t\t\t\tdata\n\t\t\t});\n\t\t}\n\t}\n\n\tprivate handlePathwayDialogApply = (pathway: Pathway) => {\n\t\tif (this.state.selectedPathway) {\n\t\t\tconst data = this.state.data;\n\t\t\tconst pathwayIndex = data.pathways.findIndex(curPathway => curPathway.pathwayId === pathway.pathwayId);\n\t\t\tif (pathwayIndex === -1) {\n\t\t\t\tdata.pathways.push(pathway);\n\t\t\t}\n\t\t\telse {\n\t\t\t\tdata.pathways[pathwayIndex] = pathway;\n\t\t\t}\n\t\t\tconst edge = VisService.attachPathwayToEdge(pathway, this.state.selectedPathway.edge);\n\t\t\tthis.state.selectedPathway.callback(edge);\n\t\t\tthis.setState({\n\t\t\t\tselectedPathway: null,\n\t\t\t\tdata\n\t\t\t});\n\t\t}\n\t}\n\n\tprivate handleItemDelete = (\n\t\tdataToDelete: { nodes: string[], edges: string[] },\n\t\tcallback: (dataToDelete?: { nodes: string[], edges: string[] }) => void\n\t) => {\n\t\tconst hasError = dataToDelete.nodes.some((nodeId: string) => {\n\t\t\tconst stop: Stop | undefined = this.state.data.stops.find(stop => stop.stopId === nodeId);\n\t\t\tif (stop && ![3, 4].includes(stop.locationType)) {\n\t\t\t\talert(\"You can't delete this location type\");\n\t\t\t\treturn true;\n\t\t\t}\n\t\t\tconst stopIndex = this.state.data.stops.findIndex(stop => stop.stopId === nodeId);\n\t\t\tif (stopIndex !== -1) {\n\t\t\t\tthis.state.data.stops.splice(stopIndex, 1);\n\t\t\t\tthis.state.deletedStopsIds.push(nodeId);\n\t\t\t}\n\t\t\treturn false;\n\t\t});\n\t\tif (hasError) {\n\t\t\tcallback();\n\t\t\treturn;\n\t\t}\n\t\tdataToDelete.edges.forEach((pathwayId: string) => {\n\t\t\tconst pathwayIndex = this.state.data.pathways.findIndex(pathway => pathway.pathwayId === pathwayId);\n\t\t\tif (pathwayIndex !== -1) {\n\t\t\t\tthis.state.data.pathways.splice(pathwayIndex, 1);\n\t\t\t\tthis.state.deletedPathwaysIds.push(pathwayId);\n\t\t\t}\n\t\t});\n\t\tcallback(dataToDelete);\n\t}\n\n\tprivate handleDialogCancel = () => {\n\t\tif (this.state.selectedStop) {\n\t\t\tthis.state.selectedStop.callback();\n\t\t\tthis.setState({\n\t\t\t\tselectedStop: null\n\t\t\t});\n\t\t}\n\t\tif (this.state.selectedPathway) {\n\t\t\tthis.state.selectedPathway.callback();\n\t\t\tthis.setState({\n\t\t\t\tselectedPathway: null\n\t\t\t});\n\t\t}\n\t}\n\n\tprivate handleSaveClick = () => {\n\t\t// Get deleted vehicleBoardings\n\t\tconst oldVehicleBoardings = this.props.data.vehicleBoardings;\n\t\tconst newVehicleBoardings = this.state.data.vehicleBoardings;\n\t\tlet deletedVehicleBoardingsIds: string[] = oldVehicleBoardings.filter(oldVehicleBoarding => {\n\t\t\tconst oldId = DataService.getVehicleBoardingId(oldVehicleBoarding);\n\t\t\tconst index = newVehicleBoardings.findIndex(newVehicleBoarding => {\n\t\t\t\treturn DataService.getVehicleBoardingId(newVehicleBoarding) === oldId;\n\t\t\t});\n\t\t\treturn (index === -1);\n\t\t}).map(vehicleBoarding => DataService.getVehicleBoardingId(vehicleBoarding));\n\n\t\tthis.props.onSave(this.state.data,\n\t\t\tthis.state.deletedStopsIds,\n\t\t\tthis.state.deletedPathwaysIds,\n\t\t\tdeletedVehicleBoardingsIds);\n\t}\n\n\tprivate handleCancelClick = () => {\n\t\tthis.props.onCancel();\n\t}\n\n\tprivate handleStopDragEnd = (nodeId: string, position: {x: number, y: number}) => {\n\t\tconst stop: Stop | undefined = this.state.data.stops.find((stop: Stop) => {\n\t\t\treturn stop.stopId === nodeId;\n\t\t});\n\t\t// Update position for generic nodes and boarding areas\n\t\tif (stop && [3, 4].includes(stop.locationType)) {\n\t\t\tstop.stopLat = ((position.y || 0) - this.state.latX) / this.state.latK;\n\t\t\tstop.stopLon = ((position.x || 0) - this.state.lonX) / this.state.lonK;\n\t\t}\n\t}\n\n\tprivate handleFareZoneAdd = (position: {x: number, y: number}, callback: (nodes: VisNode[], edges: VisEdge[]) => void) => {\n\t\tconst node1: VisNode = VisService.prepareNewNode({\n\t\t\tx: position.x,\n\t\t\ty: position.y\n\t\t} as VisNode, this.state.stations, {\n\t\t\tlatK: this.state.latK,\n\t\t\tlatX: this.state.latX,\n\t\t\tlonK: this.state.lonK,\n\t\t\tlonX: this.state.lonX\n\t\t});\n\t\tthis.state.data.stops.push(node1.stop);\n\n\t\tconst node2: VisNode = VisService.prepareNewNode({\n\t\t\tx: position.x - 100,\n\t\t\ty: position.y\n\t\t} as VisNode, this.state.stations, {\n\t\t\tlatK: this.state.latK,\n\t\t\tlatX: this.state.latX,\n\t\t\tlonK: this.state.lonK,\n\t\t\tlonX: this.state.lonX\n\t\t});\n\t\tthis.state.data.stops.push(node2.stop);\n\n\t\tlet edge1: VisEdge = VisService.prepareNewEdge({\n\t\t\tfrom: node1.id,\n\t\t\tto: node2.id\n\t\t} as VisEdge);\n\t\tedge1.pathway.pathwayMode = PathwayModeMap['FareGate'];\n\t\tedge1.pathway.isBidirectional = false;\n\t\tedge1.pathway.traversalTime = 10;\n\t\tedge1 = VisService.attachPathwayToEdge(edge1.pathway, edge1);\n\t\tthis.state.data.pathways.push(edge1.pathway);\n\n\t\tlet edge2: VisEdge = VisService.prepareNewEdge({\n\t\t\tfrom: node2.id,\n\t\t\tto: node1.id\n\t\t} as VisEdge);\n\t\tedge2.pathway.pathwayMode = PathwayModeMap['ExitGate'];\n\t\tedge2.pathway.isBidirectional = false;\n\t\tedge2.pathway.traversalTime = 10;\n\t\tedge2 = VisService.attachPathwayToEdge(edge2.pathway, edge2);\n\t\tthis.state.data.pathways.push(edge2.pathway);\n\n\t\tcallback([node1, node2], [edge1, edge2]);\n\t}\n\n\trender() {\n\t\treturn (\n\t\t\t<div className=\"station-builder\">\n\t\t\t\t<div className=\"panel\">\n\t\t\t\t\t<button className=\"save\" onClick={this.handleSaveClick}>Save</button>\n\t\t\t\t\t<button className=\"cancel\" onClick={this.handleCancelClick}>Cancel</button>\n\t\t\t\t</div>\n\t\t\t\t<div className=\"main\">\n\t\t\t\t\t<div className=\"graph\">\n\t\t\t\t\t\t<Vis\n\t\t\t\t\t\t\tdata={this.state.data}\n\t\t\t\t\t\t\tonStopAdd={this.handleStopAddMode}\n\t\t\t\t\t\t\tonStopEdit={this.handleStopEditMode}\n\t\t\t\t\t\t\tonItemDelete={this.handleItemDelete}\n\t\t\t\t\t\t\tonStopDragEnd={this.handleStopDragEnd}\n\t\t\t\t\t\t\tonPathwayAdd={this.handlePathwayAddMode}\n\t\t\t\t\t\t\tonPathwayEdit={this.handlePathwayEditMode}\n\t\t\t\t\t\t\tonFareZoneAdd={this.handleFareZoneAdd}\n\t\t\t\t\t\t\tlatK={this.state.latK}\n\t\t\t\t\t\t\tlatX={this.state.latX}\n\t\t\t\t\t\t\tlonK={this.state.lonK}\n\t\t\t\t\t\t\tlonX={this.state.lonX}\n\t\t\t\t\t\t\tisDialogShown={!!(this.state.selectedStop || this.state.selectedPathway)}></Vis>\n\n\t\t\t\t\t\t{this.state.selectedStop && <StopDialog\n\t\t\t\t\t\t\tstop={this.state.selectedStop.stop}\n\t\t\t\t\t\t\tstations={this.state.stations}\n\t\t\t\t\t\t\tplatforms={this.state.platforms}\n\t\t\t\t\t\t\tlevels={this.state.levels}\n\t\t\t\t\t\t\tvehicles={this.state.data.vehicles}\n\t\t\t\t\t\t\tvehicleBoardings={this.state.data.vehicleBoardings}\n\t\t\t\t\t\t\tonCancel={this.handleDialogCancel}\n\t\t\t\t\t\t\tonApply={this.handleStopDialogApply}></StopDialog>}\n\n\t\t\t\t\t\t{this.state.selectedPathway && <PathwayDialog\n\t\t\t\t\t\t\tpathway={this.state.selectedPathway.pathway}\n\t\t\t\t\t\t\tonCancel={this.handleDialogCancel}\n\t\t\t\t\t\t\tonApply={this.handlePathwayDialogApply}></PathwayDialog>}\n\t\t\t\t\t</div>\n\t\t\t\t\t<div className=\"map\" ref={this.mapRef}></div>\n\t\t\t\t</div>\n\t\t\t\t{(this.state.selectedStop || this.state.selectedPathway) && <div className=\"dialog-bg\" onClick={this.handleDialogCancel}></div>}\n\t\t\t</div>\n\t\t);\n\t}\n}\n","export default class FileService {\n\tpublic static readUploadedFileAsText = async (inputFile: File): Promise<string> => {\n\t\tconst temporaryFileReader = new FileReader();\n\n\t\treturn new Promise((resolve, reject) => {\n\t\t\ttemporaryFileReader.onerror = () => {\n\t\t\t\ttemporaryFileReader.abort();\n\t\t\t\treject(new DOMException(\"Error while parsing input file.\"));\n\t\t\t};\n\n\t\t\ttemporaryFileReader.onload = () => {\n\t\t\t\tresolve((temporaryFileReader.result || \"\") as string);\n\t\t\t};\n\t\t\ttemporaryFileReader.readAsText(inputFile);\n\t\t});\n\t};\n}\n","declare const google: any;\n\nclass TxtOverlay extends google.maps.OverlayView {\n\tprivate pos_: google.maps.LatLng;\n\tprivate text_: string;\n\tprivate class_: string;\n\tprivate map_: google.maps.Map;\n\tprivate div_: HTMLElement | null;\n\n\tpublic constructor(pos: google.maps.LatLng, text: string, className: string, map: google.maps.Map) {\n\t\tsuper();\n\t\tthis.pos_ = pos;\n\t\tthis.text_ = text;\n\t\tthis.class_ = className;\n\t\tthis.map_ = map;\n\t\tthis.div_ = null;\n\t\tthis.setMap(map);\n\t}\n\n\tpublic onAdd = () => {\n\t\tvar div = document.createElement('DIV');\n\t\tdiv.className = this.class_;\n\t\tdiv.innerHTML = this.text_;\n\t\tthis.div_ = div;\n\t\tvar overlayProjection = this.getProjection();\n\t\tvar position = overlayProjection.fromLatLngToDivPixel(this.pos_);\n\t\tdiv.style.left = position.x + 'px';\n\t\tdiv.style.top = position.y + 'px';\n\t\tvar panes = this.getPanes();\n\t\tpanes.floatPane.appendChild(div);\n\t}\n\t\n\tpublic draw = () =>  {\n\t\tvar overlayProjection = this.getProjection();\n\t\tvar position = overlayProjection.fromLatLngToDivPixel(this.pos_);\n\t\tvar div = this.div_;\n\t\tif (div) {\n\t\t\tdiv.style.left = position.x + 'px';\n\t\t\tdiv.style.top = position.y + 'px';\n\t\t}\n\t}\n\t\n\tpublic onRemove = () => {\n\t\tif (this.div_ && this.div_.parentNode) {\n\t\t\tthis.div_.parentNode.removeChild(this.div_);\n\t\t\tthis.div_ = null;\n\t\t}\n\t}\n\t\n\tpublic hide = () => {\n\t\tif (this.div_) {\n\t\t\tthis.div_.style.visibility = \"hidden\";\n\t\t}\n\t}\n\t\n\t\n\tpublic show = () => {\n\t\tif (this.div_) {\n\t\t\tthis.div_.style.visibility = \"visible\";\n\t\t}\n\t}\n\t\n\tpublic toggle = () => {\n\t\tif (this.div_) {\n\t\t\tif (this.div_.style.visibility === \"hidden\") {\n\t\t\t\tthis.show();\n\t\t\t} else {\n\t\t\t\tthis.hide();\n\t\t\t}\n\t\t}\n\t}\n\t\n\tpublic toggleDOM = () => {\n\t\tif (this.getMap()) {\n\t\t\tthis.setMap(null);\n\t\t} else {\n\t\t\tthis.setMap(this.map_);\n\t\t}\n\t}\n}\n\nexport default TxtOverlay;","import React, { Component } from \"react\";\nimport \"./App.scss\";\nimport StationBuilder from \"./components/StationBuilder\";\nimport Communication from \"./interfaces/Communication\";\nimport DataService from \"./services/DataService\";\nimport JSZip, { JSZipObject } from 'jszip';\nimport FileService from \"./services/FileService\";\nimport Stop from \"./interfaces/Stop\";\nimport circleBlackImage from './images/circle-black.png';\nimport ewayLogo from './images/eway-logo.png';\nimport TxtOverlay from \"./map/TxtOverlay\";\nimport Pathway from \"./interfaces/Pathway\";\nimport Level from \"./interfaces/Level\";\nimport { saveAs } from 'file-saver';\nimport VisService from \"./services/VisService\";\nimport VehicleBoarding from \"./interfaces/VehicleBoarding\";\nimport Vehicle from \"./interfaces/Vehicle\";\nimport VehicleCategory from \"./interfaces/VehicleCategory\";\nimport VehicleCoupling from \"./interfaces/VehicleCoupling\";\nimport VehicleDoor from \"./interfaces/VehicleDoor\";\n\nexport interface AppProps {}\n\ntype AppMode = \"FILE_UPLADING\" | \"STATION_SELECTION\" | \"STATION_BUILDER\";\n\ndeclare const google: any;\n\nexport interface AppState {\n\tisLoading: boolean;\n\tmode: AppMode;\n\tstations: Communication | null;\n\tselectedStation: Communication | null;\n\tuntouchedFiles: {[key: string]: string};\n\tmap?: google.maps.Map;\n\tmapObjects: (google.maps.Marker | TxtOverlay)[];\n}\n\nexport default class App extends Component<AppProps, AppState> {\n\tprivate mapRef: React.RefObject<HTMLDivElement> = React.createRef();\n\tprivate requiredFileNames = [\"stops.txt\", \"pathways.txt\"];\n\n\tpublic constructor(props: AppProps) {\n\t\tsuper(props);\n\t\tthis.state = {\n\t\t\tisLoading: false,\n\t\t\tmode: \"FILE_UPLADING\",\n\t\t\tstations: null,\n\t\t\tselectedStation: null,\n\t\t\tuntouchedFiles: {},\n\t\t\tmapObjects: []\n\t\t};\n\t}\n\n\tprivate handleFileChange = (event: React.ChangeEvent<HTMLInputElement>) => {\n\t\tif (event.target.files) {\n\t\t\tthis.setState({\n\t\t\t\tisLoading: true\n\t\t\t});\n\t\t\t// Zip\n\t\t\tif (event.target.files.length === 1) {\n\t\t\t\tconst zipFile = event.target.files[0];\n\t\t\t\tthis.handleZip(zipFile);\n\t\t\t}\n\t\t\t// Separate files\n\t\t\telse {\n\t\t\t\tconst files = Array.from(event.target.files);\n\t\t\t\tthis.handleFiles(files);\n\t\t\t}\n\t\t}\n\t}\n\n\tprivate handleFiles(files: File[]) {\n\t\tconst fileNames: string[] = [];\n\t\tconst filePromises = Promise.all(files\n\t\t\t.filter((file: File) => file.name.indexOf(\".txt\") !== -1)\n\t\t\t.map((file: File) => {\n\t\t\t\tfileNames.push(file.name);\n\t\t\t\treturn FileService.readUploadedFileAsText(file);\n\t\t\t}));\n\t\t\n\t\tif (!this.checkRequiredFiles(fileNames)) {\n\t\t\tthis.setState({\n\t\t\t\tisLoading: false\n\t\t\t});\n\t\t\treturn;\n\t\t}\n\n\t\tthis.handleFilePromises(filePromises, fileNames);\n\t}\n\n\tprivate handleZip(zipFile: Blob | File) {\n\t\tJSZip.loadAsync(zipFile).then((zip) => {\n\t\t\tconst files: JSZipObject[] = [];\n\t\t\tzip.forEach((relativePath, file) => {\n\t\t\t\tfiles.push(file);\n\t\t\t});\n\t\t\t\n\t\t\tconst fileNames: string[] = [];\n\t\t\tconst filePromises = Promise.all(files\n\t\t\t\t.filter((file: JSZipObject) => file.name.indexOf(\".txt\") !== -1)\n\t\t\t\t.map((file: JSZipObject) => {\n\t\t\t\t\tfileNames.push(file.name);\n\t\t\t\t\treturn file.async(\"text\");\n\t\t\t\t}));\n\t\t\t\n\t\t\tif (!this.checkRequiredFiles(fileNames)) {\n\t\t\t\tthis.setState({\n\t\t\t\t\tisLoading: false\n\t\t\t\t});\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tthis.handleFilePromises(filePromises, fileNames);\n\t\t}, function (e) {\n\t\t\talert(e.message);\n\t\t});\n\t}\n\n\tprivate handleFilePromises(\n\t\tfilePromises: Promise<string[]>,\n\t\tfileNames: string[]\n\t) {\n\t\tlet communicationPacket: Communication = {\n\t\t\tstops: [],\n\t\t\tpathways: [],\n\t\t\tvehicleBoardings: [],\n\t\t\tlevels: [],\n\t\t\tvehicles: []\n\t\t};\n\n\t\tfilePromises.then((fileContents: string[]) => {\n\t\t\tconst untouchedFiles: {[key: string]: string} = {};\n\t\t\tfileContents.forEach((fileContent: string, fileIndex: number) => {\n\t\t\t\tconst fileExtracted = this.extractData(fileNames[fileIndex], fileContent, communicationPacket);\n\t\t\t\tif (!fileExtracted) {\n\t\t\t\t\tuntouchedFiles[fileNames[fileIndex]] = fileContent;\n\t\t\t\t}\n\t\t\t});\n\n\t\t\t// Set id's initial values for new stops and pathways\n\t\t\tlet minStopId = 0;\n\t\t\tcommunicationPacket.stops.forEach(stop => {\n\t\t\t\tif (Number(stop.stopId) < minStopId) {\n\t\t\t\t\tminStopId = Number(stop.stopId);\n\t\t\t\t}\n\t\t\t});\n\t\t\tlet minPathwayId = 0;\n\t\t\tcommunicationPacket.pathways.forEach(pathway => {\n\t\t\t\tif (Number(pathway.pathwayId) < minPathwayId) {\n\t\t\t\t\tminPathwayId = Number(pathway.pathwayId);\n\t\t\t\t}\n\t\t\t});\n\t\t\tVisService.newStopId = minStopId - 1;\n\t\t\tVisService.newPathwayId = minPathwayId - 1;\n\n\t\t\t// Attach coordinates to nodes without lat:lng\n\t\t\tcommunicationPacket.stops = communicationPacket.stops.map(stop => {\n\t\t\t\tif (stop.stopLat === -1 && stop.stopLon === -1) {\n\t\t\t\t\tconst station = communicationPacket.stops.find(curStop => curStop.stopId === stop.parentStation);\n\t\t\t\t\tif (station) {\n\t\t\t\t\t\tstop.stopLat = station.stopLat;\n\t\t\t\t\t\tstop.stopLon = station.stopLon;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\treturn stop;\n\t\t\t});\n\n\t\t\t// Extract vehicles from untouched files\n\t\t\tif (untouchedFiles[\"vehicle_categories.txt\"]\n\t\t\t\t&& untouchedFiles[\"vehicle_couplings.txt\"]\n\t\t\t\t&& untouchedFiles[\"vehicle_doors.txt\"]) {\n\t\t\t\tcommunicationPacket.vehicles = this.extractVehicles(\n\t\t\t\t\tuntouchedFiles[\"vehicle_categories.txt\"],\n\t\t\t\t\tuntouchedFiles[\"vehicle_couplings.txt\"],\n\t\t\t\t\tuntouchedFiles[\"vehicle_doors.txt\"]);\n\t\t\t}\n\n\t\t\tconsole.log(communicationPacket);\n\t\t\tthis.setState({\n\t\t\t\tisLoading: false,\n\t\t\t\tstations: communicationPacket,\n\t\t\t\tmode: \"STATION_SELECTION\",\n\t\t\t\tuntouchedFiles\n\t\t\t}, () => {\n\t\t\t\tthis.showStationsOnMap(communicationPacket.stops);\n\t\t\t});\n\t\t});\n\t}\n\n\tprivate extractVehicles(vehicleCategoriesTxt: string,\n\t\tvehicleCouplingsTxt: string,\n\t\tvehicleDoorsTxt: string): Vehicle[] {\n\t\t\n\t\tconst vehicles: {[key: string]: Vehicle} = {};\n\t\tconst categories: VehicleCategory[] = DataService.fromGTFS(vehicleCategoriesTxt, DataService.vehicleCategoryFromGTFS);\n\t\tconst couplings: VehicleCoupling[] = DataService.fromGTFS(vehicleCouplingsTxt, DataService.vehicleCouplingFromGTFS);\n\t\tconst doors: VehicleDoor[] = DataService.fromGTFS(vehicleDoorsTxt, DataService.vehicleDoorFromGTFS);\n\n\t\tconst categoriesHash: {[key: string]: VehicleCategory} = {};\n\t\tcategories.forEach(category => {\n\t\t\tcategoriesHash[category.vehicleCategoryId] = category;\n\t\t});\n\t\tconst doorsHash: {[key: string]: VehicleDoor[]} = {};\n\t\tdoors.forEach(door => {\n\t\t\tif (!doorsHash[door.vehicleCategoryId]) {\n\t\t\t\tdoorsHash[door.vehicleCategoryId] = [];\n\t\t\t}\n\t\t\tdoorsHash[door.vehicleCategoryId].push(door);\n\t\t});\n\n\t\tcouplings.forEach(coupling => {\n\t\t\tif (!vehicles[coupling.parentId]) {\n\t\t\t\tvehicles[coupling.parentId] = {\n\t\t\t\t\t...categoriesHash[coupling.parentId],\n\t\t\t\t\tchildren: []\n\t\t\t\t};\n\t\t\t}\n\t\t\tvehicles[coupling.parentId].children.push({\n\t\t\t\tvehicleCategoryId: coupling.childId,\n\t\t\t\tchildSequence: coupling.childSequence,\n\t\t\t\tdoors: doorsHash[coupling.childId]\n\t\t\t});\n\t\t});\n\n\t\treturn Object.values(vehicles);\n\t}\n\n\tprivate showStationsOnMap(stops: Stop[]) {\n\t\tlet map: google.maps.Map;\n\t\tif (!this.state.map) {\n\t\t\tmap = new google.maps.Map(this.mapRef.current);\n\t\t\tconsole.log(\"Google map initialized\");\n\t\t\tthis.setState({\n\t\t\t\tmap\n\t\t\t});\n\t\t}\n\t\telse {\n\t\t\tmap = this.state.map;\n\t\t}\n\n\t\tif (this.state.mapObjects.length === 0) {\n\t\t\tconst bounds = new google.maps.LatLngBounds();\n\t\t\tstops.filter(stop => stop.locationType === 1).forEach(stop => {\n\t\t\t\tconst position = {\n\t\t\t\t\tlat: stop.stopLat,\n\t\t\t\t\tlng: stop.stopLon\n\t\t\t\t};\n\t\t\t\tbounds.extend(position);\n\t\t\t\tconst marker = new google.maps.Marker({\n\t\t\t\t\tmap,\n\t\t\t\t\tposition,\n\t\t\t\t\ticon: circleBlackImage\n\t\t\t\t});\n\t\t\t\tconst label = new TxtOverlay(\n\t\t\t\t\tnew google.maps.LatLng(stop.stopLat, stop.stopLon),\n\t\t\t\t\tstop.stopName || \"\",\n\t\t\t\t\t\"station-name\",\n\t\t\t\t\tmap\n\t\t\t\t);\n\t\t\t\tgoogle.maps.event.addListener(marker, 'click', () => {\n\t\t\t\t\tthis.handleStationSelect(stop.stopId);\n\t\t\t\t});\n\t\t\t\tthis.state.mapObjects.push(marker);\n\t\t\t\tthis.state.mapObjects.push(label);\n\t\t\t});\n\t\t\tmap.fitBounds(bounds);\n\t\t}\n\t}\n\n\tprivate checkRequiredFiles(fileNames: string[]): boolean {\n\t\tconst requiredFileMissing = this.requiredFileNames.some((requiredFileName: string) => {\n\t\t\treturn fileNames.findIndex(fileName => fileName === requiredFileName) === -1;\n\t\t});\n\t\tif (requiredFileMissing) {\n\t\t\talert(\"You missed some of the required files: [\" + this.requiredFileNames.join(\", \") + \"]\");\n\t\t\treturn false;\n\t\t}\n\t\telse {\n\t\t\treturn true;\n\t\t}\n\t}\n\n\tprivate extractData(fileName: string, data: string, communicationPacket: Communication): boolean {\n\t\tswitch (fileName) {\n\t\t\tcase \"stops.txt\":\n\t\t\t\tcommunicationPacket.stops = DataService.fromGTFS(\n\t\t\t\t\tdata,\n\t\t\t\t\tDataService.stopFromGTFS\n\t\t\t\t);\n\t\t\t\treturn true;\n\t\t\tcase \"pathways.txt\":\n\t\t\t\tcommunicationPacket.pathways = DataService.fromGTFS(\n\t\t\t\t\tdata,\n\t\t\t\t\tDataService.pathwayFromGTFS\n\t\t\t\t);\n\t\t\t\treturn true;\n\t\t\tcase \"levels.txt\":\n\t\t\t\tcommunicationPacket.levels = DataService.fromGTFS(\n\t\t\t\t\tdata,\n\t\t\t\t\tDataService.levelFromGTFS\n\t\t\t\t);\n\t\t\t\treturn true;\n\t\t\tcase \"vehicle_boardings.txt\":\n\t\t\t\tcommunicationPacket.vehicleBoardings = DataService.fromGTFS(\n\t\t\t\t\tdata,\n\t\t\t\t\tDataService.vehicleBoardingFromGTFS\n\t\t\t\t);\n\t\t\t\treturn true;\n\t\t\tdefault:\n\t\t\t\treturn false;\n\t\t}\n\t}\n\n\tprivate handleStationSave = (dataNew: Communication, deletedStopsIds: string[], deletedPathwaysIds: string[], deletedVehicleBoardingsIds: string[]) => {\n\t\tconst dataActual = this.state.stations;\n\t\tif (dataActual) {\n\t\t\tdataNew.stops.forEach(stop => {\n\t\t\t\tconst stopIndex = dataActual.stops.findIndex(curStop => curStop.stopId === stop.stopId);\n\t\t\t\tif (stopIndex !== -1) {\n\t\t\t\t\tdataActual.stops[stopIndex] = stop;\n\t\t\t\t}\n\t\t\t\telse {\n\t\t\t\t\tdataActual.stops.push(stop);\n\t\t\t\t}\n\t\t\t});\n\t\t\tdeletedStopsIds.forEach(stopId => {\n\t\t\t\tconst stopIndex = dataActual.stops.findIndex(curStop => curStop.stopId === stopId);\n\t\t\t\tif (stopIndex !== -1) {\n\t\t\t\t\tdataActual.stops.splice(stopIndex, 1);\n\t\t\t\t}\n\t\t\t});\n\n\t\t\tdataNew.pathways.forEach(pathway => {\n\t\t\t\tconst pathwayIndex = dataActual.pathways.findIndex(curPathway => curPathway.pathwayId === pathway.pathwayId);\n\t\t\t\tif (pathwayIndex !== -1) {\n\t\t\t\t\tdataActual.pathways[pathwayIndex] = pathway;\n\t\t\t\t}\n\t\t\t\telse {\n\t\t\t\t\tdataActual.pathways.push(pathway);\n\t\t\t\t}\n\t\t\t});\n\t\t\tdeletedPathwaysIds.forEach(pathwayId => {\n\t\t\t\tconst pathwayIndex = dataActual.pathways.findIndex(curPathway => curPathway.pathwayId === pathwayId);\n\t\t\t\tif (pathwayIndex !== -1) {\n\t\t\t\t\tdataActual.pathways.splice(pathwayIndex, 1);\n\t\t\t\t}\n\t\t\t});\n\n\t\t\tdataNew.vehicleBoardings.forEach(vehicleBoardingNew => {\n\t\t\t\tconst vehicleBoardingNewId = DataService.getVehicleBoardingId(vehicleBoardingNew);\n\t\t\t\tconst vehicleBoardingIndex = dataActual.vehicleBoardings.findIndex(\n\t\t\t\t\tcurVehicleBoarding => DataService.getVehicleBoardingId(curVehicleBoarding) === vehicleBoardingNewId\n\t\t\t\t);\n\t\t\t\tif (vehicleBoardingIndex === -1) {\n\t\t\t\t\tdataActual.vehicleBoardings.push(vehicleBoardingNew);\n\t\t\t\t}\n\t\t\t});\n\t\t\tdeletedVehicleBoardingsIds.forEach(vehicleBoardingId => {\n\t\t\t\tconst vehicleBoardingIndex = dataActual.vehicleBoardings.findIndex(\n\t\t\t\t\tcurVehicleBoarding => DataService.getVehicleBoardingId(curVehicleBoarding) === vehicleBoardingId\n\t\t\t\t);\n\t\t\t\tif (vehicleBoardingIndex !== -1) {\n\t\t\t\t\tdataActual.vehicleBoardings.splice(vehicleBoardingIndex, 1);\n\t\t\t\t}\n\t\t\t});\n\n\t\t\tthis.setState({\n\t\t\t\tmode: \"STATION_SELECTION\"\n\t\t\t});\n\t\t}\n\t}\n\n\tprivate handleStationCancel = () => {\n\t\tthis.setState({\n\t\t\tmode: \"STATION_SELECTION\"\n\t\t});\n\t}\n\n\tprivate loadSampleDataMsk = () => {\n\t\tthis.setState({\n\t\t\tisLoading: true\n\t\t});\n\t\tconst sampleZip = fetch(\"https://kostjerry.github.io/gtfs-station-builder/sample/gtfs-translations-pathways-vehicles-sample.zip\");\n\t\tsampleZip.then(response => {\n\t\t\tif (response.ok) {\n\t\t\t\tresponse.blob().then(sampleZipBlob => {\n\t\t\t\t\tthis.handleZip(sampleZipBlob);\n\t\t\t\t});\n\t\t\t}\n\t\t});\n\t}\n\n\tprivate loadSampleDataParis = () => {\n\t\tthis.setState({\n\t\t\tisLoading: true\n\t\t});\n\t\tconst sampleZip = fetch(\"https://kostjerry.github.io/gtfs-station-builder/sample/go-deeper-paris.zip\");\n\t\tsampleZip.then(response => {\n\t\t\tif (response.ok) {\n\t\t\t\tresponse.blob().then(sampleZipBlob => {\n\t\t\t\t\tthis.handleZip(sampleZipBlob);\n\t\t\t\t});\n\t\t\t}\n\t\t});\n\t}\n\n\tprivate handleStationSelect = (stationId: string) => {\n\t\tif (this.state.stations) {\n\t\t\tconst station = this.state.stations.stops.find(stop => stop.stopId === stationId);\n\t\t\tif (station) {\n\n\t\t\t\t// Filter selected station and its neighbors\n\t\t\t\tconst stationIds = this.state.stations.stops.filter(stop => {\n\t\t\t\t\treturn ((Math.abs(stop.stopLat - station.stopLat) < 0.005)\n\t\t\t\t\t\t&& (Math.abs(stop.stopLon - station.stopLon) < 0.005)\n\t\t\t\t\t\t&& (stop.locationType === 1));\n\t\t\t\t}).map(station => station.stopId);\n\t\t\t\tlet platformIds: string[] = [];\n\t\t\t\tthis.state.stations.stops.forEach(stop => {\n\t\t\t\t\tif (stationIds.includes(stop.parentStation || '-1') && (stop.locationType === 0)) {\n\t\t\t\t\t\tplatformIds.push(stop.stopId);\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t\tconst stops = this.state.stations.stops.filter(stop => {\n\t\t\t\t\treturn (stationIds.includes(stop.parentStation || '-1')\n\t\t\t\t\t\t|| stationIds.includes(stop.stopId)\n\t\t\t\t\t\t|| platformIds.includes(stop.parentStation || '-1'));\n\t\t\t\t});\n\n\t\t\t\tconst stopIds = stops.map(stop => stop.stopId);\n\t\t\t\tconst pathways = this.state.stations.pathways.filter(pathway => {\n\t\t\t\t\treturn stopIds.includes(pathway.fromStopId) ||\n\t\t\t\t\t\tstopIds.includes(pathway.toStopId);\n\t\t\t\t});\n\n\t\t\t\tconst vehicleBoardings = this.state.stations.vehicleBoardings.filter(vehicleBoarding => {\n\t\t\t\t\treturn stopIds.includes(vehicleBoarding.boardingAreaId);\n\t\t\t\t});\n\n\t\t\t\tthis.setState({\n\t\t\t\t\tselectedStation: {\n\t\t\t\t\t\tstops,\n\t\t\t\t\t\tpathways,\n\t\t\t\t\t\tvehicleBoardings,\n\t\t\t\t\t\tlevels: this.state.stations.levels,\n\t\t\t\t\t\tvehicles: this.state.stations.vehicles\n\t\t\t\t\t},\n\t\t\t\t\tmode: \"STATION_BUILDER\"\n\t\t\t\t});\n\t\t\t}\n\t\t}\n\t}\n\n\tprivate handleLoadFeedClick = () => {\n\t\tthis.state.mapObjects.forEach(mapObject => {\n\t\t\tmapObject.setMap(null);\n\t\t});\n\t\tthis.setState({\n\t\t\tmode: \"FILE_UPLADING\",\n\t\t\tstations: null,\n\t\t\tselectedStation: null,\n\t\t\tuntouchedFiles: {},\n\t\t\tmapObjects: []\n\t\t});\n\t}\n\n\tprivate handleDownloadClick = () => {\n\t\tif (this.state.stations) {\n\t\t\tthis.setState({\n\t\t\t\tisLoading: true\n\t\t\t});\n\n\t\t\tlet stopsTxt = DataService.getStopGTFSHeader() + \"\\n\";\n\t\t\tthis.state.stations.stops.forEach((stop: Stop) => {\n\t\t\t\tstopsTxt += DataService.stopToGTFS(stop) + \"\\n\";\n\t\t\t});\n\n\t\t\tlet pathwaysTxt = DataService.getPathwayGTFSHeader() + \"\\n\";\n\t\t\tthis.state.stations.pathways.forEach((pathway: Pathway) => {\n\t\t\t\tpathwaysTxt += DataService.pathwayToGTFS(pathway) + \"\\n\";\n\t\t\t});\n\n\t\t\tlet levelsTxt = DataService.getLevelGTFSHeader() + \"\\n\";\n\t\t\tthis.state.stations.levels.forEach((level: Level) => {\n\t\t\t\tlevelsTxt += DataService.levelToGTFS(level) + \"\\n\";\n\t\t\t});\n\n\t\t\tlet vehicleBoardingsTxt = DataService.getVehicleBoardingGTFSHeader() + \"\\n\";\n\t\t\tthis.state.stations.vehicleBoardings.forEach((vehicleBoarding: VehicleBoarding) => {\n\t\t\t\tvehicleBoardingsTxt += DataService.vehicleBoardingToGTFS(vehicleBoarding) + \"\\n\";\n\t\t\t});\n\n\t\t\tconst zip = new JSZip();\n\t\t\tzip.file('stops.txt', stopsTxt);\n\t\t\tzip.file('pathways.txt', pathwaysTxt);\n\t\t\tzip.file('levels.txt', levelsTxt);\n\t\t\tzip.file('vehicle_boardings.txt', vehicleBoardingsTxt);\n\t\t\tfor (const fileName in this.state.untouchedFiles) {\n\t\t\t\tzip.file(fileName, this.state.untouchedFiles[fileName]);\n\t\t\t}\n\t\t\t\n\t\t\tzip.generateAsync({\n\t\t\t\ttype: \"blob\",\n\t\t\t\tplatform: \"UNIX\",\n\t\t\t\tcompression: \"DEFLATE\",\n\t\t\t\tcompressionOptions: {\n\t\t\t\t\tlevel: 5\n\t\t\t\t}\n\t\t\t}).then((blob) => {\n\t\t\t\tthis.setState({\n\t\t\t\t\tisLoading: false\n\t\t\t\t});\n\t\t\t\tsaveAs(blob, \"gtfs.zip\");\n\t\t\t});\n\t\t}\n\t}\n\n\trender() {\n\t\treturn (\n\t\t\t<div className=\"gtfs-stations-builder-container\">\n\t\t\t\t{this.state.isLoading && <div className=\"loader\"></div>}\n\n\t\t\t\t{this.state.mode === \"FILE_UPLADING\" && (\n\t\t\t\t\t<div className=\"controls\">\n\t\t\t\t\t\t<img src={ewayLogo} alt=\"\" />\n\t\t\t\t\t\t<h2>GTFS station builder</h2>\n\t\t\t\t\t\t<div>\n\t\t\t\t\t\t\tSelect stops.txt, pathways.txt and levels.txt (you can also select a .zip containing those files):\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<input\n\t\t\t\t\t\t\ttype=\"file\"\n\t\t\t\t\t\t\tmultiple={true}\n\t\t\t\t\t\t\tonChange={this.handleFileChange}\n\t\t\t\t\t\t/>\n\t\t\t\t\t\t<br />\n\t\t\t\t\t\t<div>OR</div>\n\t\t\t\t\t\t<br />\n\t\t\t\t\t\t<button onClick={this.loadSampleDataMsk}>LOAD SAMPLE DATA [Moscow pathways and vehicles]</button>\n\t\t\t\t\t\t<br />\n\t\t\t\t\t\t<button onClick={this.loadSampleDataParis}>LOAD SAMPLE DATA [Go deeper Paris pathways]</button>\n\t\t\t\t\t</div>\n\t\t\t\t)}\n\n\t\t\t\t{this.state.mode === \"STATION_SELECTION\" && this.state.stations && <div>\n\t\t\t\t\t<div className=\"panel\">\n\t\t\t\t\t\t<button className=\"download\" onClick={this.handleDownloadClick}>Download</button>\n\t\t\t\t\t\t<button className=\"load\" onClick={this.handleLoadFeedClick}>Load another feed</button>\n\t\t\t\t\t</div>\n\t\t\t\t</div>}\n\t\t\t\t<div className={\"map\" + (this.state.mode !== \"STATION_SELECTION\" ? \" hidden\" : \"\")} ref={this.mapRef}></div>\n\n\t\t\t\t{this.state.mode === \"STATION_BUILDER\" && this.state.selectedStation && (\n\t\t\t\t\t<StationBuilder\n\t\t\t\t\t\tdata={this.state.selectedStation}\n\t\t\t\t\t\tonSave={this.handleStationSave}\n\t\t\t\t\t\tonCancel={this.handleStationCancel}></StationBuilder>\n\t\t\t\t)}\n\t\t\t</div>\n\t\t);\n\t}\n}\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport StationBuilder from './components/StationBuilder';\nimport App from './App';\n\nwindow.GtfsStationBuilder = {\n    mount: (props, container) => {\n        ReactDOM.render(<StationBuilder {...props} />, container);\n    },\n    unmount: (container) => {\n        ReactDOM.unmountComponentAtNode(container);\n    }\n}\n\nconst ref = document.getElementById(\"gtfs-station-builder-root\");\nif (ref) {\n\tReactDOM.render(<App />, ref);\n}\n","module.exports = \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABgAAAAYCAYAAADgdz34AAAABmJLR0QA/wD/AP+gvaeTAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAB3RJTUUH4wgODi84vCtShwAAAMVJREFUSMftlbENwjAUREPKdLAFtEyRiFBSwgaho6Uge8Ak3oIVMgAiBdWjOYkPMorskAIpJ30pts/35G9LSZJRfyEgBxpVPgSg4aUmZG8awZsMcYLCnKAY6h4ACN2XdoSWgPOBYmCf4bUNwqM+4StlPICqT4u+AZzy9r7WGF2BLAZwU8CsAwBw/gnA41kArXzb3i0yawfgpO+dfC0wDwGU9pKBqarSHMBS3ovGx+hn6lFtfBmwiX1Na7XrrnJAOf5fRr3pCeqXbYu/ZJnBAAAAAElFTkSuQmCC\"","module.exports = \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABgAAAAYCAYAAADgdz34AAAABmJLR0QA/wD/AP+gvaeTAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAB3RJTUUH4wgODwAgvJmYiwAAAOZJREFUSMftlDEOgjAUhltGNr2Frp4CIquj3gA3Vwe5h56kt/AKHMDI4PS5PGJDGmlpWYx/0oTS9nt//sJT6q+BAOy5nguutdZKKZV5HiyAVkbhCw9x1vJR64L3Gq5lE5LQyZxbkNIyWfo4D77kHtK79HWejUArwLjyThFLY8NwKOZ73grjBdSuArE/jBHO0XWhlu5APqXAQwDLkQIA1+gCrmiANdDJ6/3kiIZw4ARc5PkgSx2wCilQOaJYALVcPMBG9t5kfg7ujF/UWPtyYBcDN8BThgGqyY0rWfOatTP69KJU8N/QG1gTxBTCzhI8AAAAAElFTkSuQmCC\"","module.exports = \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAcNJREFUeNp8kr8vQ1EUx799rVYbXiVIlPrNRFKJ+BFCYhRCSNjEwG4xmIjdYvAHGCwNq5UQkUgk2Egs0kgsLJRWOb7nvVulWif5vPfOved77n33fr34P8IGjfdCBZ4ioklDI/GTZ3JJ4uTgvxX7yCGRIrySLVJVSNxLbrWwhMygVDZRJnHYfNsyDb8Eco12ScVPsSZHOtkCr+wgLNLcLdI/KjI4LjIwJhKNyTYbtcPKNllTodc0mCVLXAEbsDHX1w8EQ0Ca5/aecQnbiNXVI3T/gGNk8AZpYvm+xYcyoV1GEcB8JAp8Mkml+f7MobnXwoJdjRH4tFwbDKvYNgl6dKIm4q5YKFLcUVMjupyLcaLVZ67JGSnXzXAVZD5+CwP+X6md+wxpgxdzz7jDhyv2eP6IviOZRML5RyceLdPgQrMTmi19Qb8ESooa5en6BmeuKfU/Ly0zrg5LnXJiBUkgcV9YnUhgnfNHboNzcpyd8hmHOXe8iKDcolIk0iHSMSRS2ynXzHXc1LyR6fz+1WQv26SBhlL3LVA0RVdGcwZS8bK5/j+hB7yatXQeuu/T/JU9Rc6qXU1C2khQT5tcGbs//iz8EmAAjZWhjml2ZOkAAAAASUVORK5CYII=\""],"sourceRoot":""}